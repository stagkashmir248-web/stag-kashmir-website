(()=>{var e={};e.id=520,e.ids=[520],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21941:(e,r,t)=>{"use strict";t.d(r,{M$:()=>c,Sz:()=>l,d$:()=>o,zh:()=>d});var n=t(91199);t(42087);var a=t(70664),i=t(7944),s=t(33331);let o=(0,i.unstable_cache)(async()=>{try{return await a.z.product.findMany({where:{isArchived:!1},orderBy:{createdAt:"desc"},include:{variations:!0}})}catch(e){return console.error("Failed to fetch products:",e),[]}},["website-products"],{revalidate:3600,tags:["products"]}),c=(0,i.unstable_cache)(async e=>{try{return await a.z.product.findFirst({where:{slug:e,isArchived:!1},include:{variations:!0}})}catch(r){return console.error(`Failed to fetch product ${e}:`,r),null}},["website-product-by-slug"],{revalidate:3600,tags:["products"]}),l=(0,i.unstable_cache)(async(e,r,t=4)=>{try{let n={id:{not:e},isArchived:!1};r&&(n.category=r);let i=await a.z.product.findMany({where:n,take:t,orderBy:{createdAt:"desc"},select:{id:!0,slug:!0,name:!0,price:!0,compareAtPrice:!0,imageUrl:!0,stock:!0,category:!0}});if(i.length<t){let r=await a.z.product.findMany({where:{isArchived:!1,id:{not:e},...i.length>0?{NOT:{id:{in:i.map(e=>e.id)}}}:{}},take:t-i.length,orderBy:{createdAt:"desc"},select:{id:!0,slug:!0,name:!0,price:!0,compareAtPrice:!0,imageUrl:!0,stock:!0,category:!0}});return[...i,...r]}return i}catch(e){return console.error("Failed to fetch related products:",e),[]}},["website-related-products"],{revalidate:3600,tags:["products"]}),d=async(e,r=5)=>{try{if(!e.trim())return[];return await a.z.product.findMany({where:{isArchived:!1,OR:[{name:{contains:e,mode:"insensitive"}},{category:{contains:e,mode:"insensitive"}}]},take:r,select:{id:!0,slug:!0,name:!0,price:!0,imageUrl:!0,category:!0}})}catch(e){return console.error("Failed to search products:",e),[]}};(0,s.D)([o,c,l,d]),(0,n.A)(o,"7f968c88eb464a3622087bfbc6c0b8b9a5109a8131",null),(0,n.A)(c,"7f3b2c42cab10e20cad01db774d9f831841c6fb349",null),(0,n.A)(l,"7f57427a84a646118002d5cd67de268ed9131f7a24",null),(0,n.A)(d,"7fe405c67d1c0db1ace49ea43db24c8d93b7d3f676",null)},26327:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,4536,23))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},46620:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"7f3b2c42cab10e20cad01db774d9f831841c6fb349":()=>n.M$,"7f57427a84a646118002d5cd67de268ed9131f7a24":()=>n.Sz,"7f968c88eb464a3622087bfbc6c0b8b9a5109a8131":()=>n.d$,"7fe405c67d1c0db1ace49ea43db24c8d93b7d3f676":()=>n.zh});var n=t(21941)},54351:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,85814,23))},55511:e=>{"use strict";e.exports=require("crypto")},59404:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>l});var n=t(65239),a=t(48088),i=t(88170),s=t.n(i),o=t(30893),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);t.d(r,c);let l={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,94934)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,16439)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\login\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67218:(e,r,t)=>{"use strict";Object.defineProperty(r,"A",{enumerable:!0,get:function(){return n.registerServerReference}});let n=t(12907)},70664:(e,r,t)=>{"use strict";t.d(r,{z:()=>a});var n=t(96330);let a=global.prisma||new n.PrismaClient({log:["query"]})},74282:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"00982aa9fa8a6bde911e1a5e2ef19232cf986e2eac":()=>n.$$RSC_SERVER_ACTION_0,"00df619ee1acdc7bb91c1fd56d9f7cda7bc7e46e15":()=>n.$$RSC_SERVER_ACTION_1});var n=t(94934)},74722:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{normalizeAppPath:function(){return i},normalizeRscURL:function(){return s}});let n=t(85531),a=t(35499);function i(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,r,t,n)=>!r||(0,a.isGroupSegment)(r)||"@"===r[0]||("page"===r||"route"===r)&&t===n.length-1?e:e+"/"+r,""))}function s(e){return e.replace(/\.rsc($|\?)/,"$1")}},79130:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{decryptActionBoundArgs:function(){return m},encryptActionBoundArgs:function(){return g}}),t(34822);let n=t(12907),a=t(52513),i=t(77855),s=t(82602),o=t(63033),c=t(84971),l=function(e){return e&&e.__esModule?e:{default:e}}(t(61120)),d=new TextEncoder,u=new TextDecoder;async function f(e,r){let t=await (0,s.getActionEncryptionKey)();if(void 0===t)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=atob(r),a=n.slice(0,16),i=n.slice(16),o=u.decode(await (0,s.decrypt)(t,(0,s.stringToUint8Array)(a),(0,s.stringToUint8Array)(i)));if(!o.startsWith(e))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return o.slice(e.length)}async function p(e,r){let t=await (0,s.getActionEncryptionKey)();if(void 0===t)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=new Uint8Array(16);o.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(n));let a=(0,s.arrayBufferToString)(n.buffer),i=await (0,s.encrypt)(t,n,d.encode(e+r));return btoa(a+(0,s.arrayBufferToString)(i))}let g=l.default.cache(async function e(r,...t){let{clientModules:a}=(0,s.getClientReferenceManifestForRsc)(),l=Error();Error.captureStackTrace(l,e);let d=!1,u=o.workUnitAsyncStorage.getStore(),f=(null==u?void 0:u.type)==="prerender"?(0,c.createHangingInputAbortSignal)(u):void 0,g=await (0,i.streamToString)((0,n.renderToReadableStream)(t,a,{signal:f,onError(e){(null==f||!f.aborted)&&(d||(d=!0,l.message=e instanceof Error?e.message:String(e)))}}),f);if(d)throw l;if(!u)return p(r,g);let m=(0,o.getPrerenderResumeDataCache)(u),b=(0,o.getRenderResumeDataCache)(u),y=r+g,h=(null==m?void 0:m.encryptedBoundArgs.get(y))??(null==b?void 0:b.encryptedBoundArgs.get(y));if(h)return h;let v="prerender"===u.type?u.cacheSignal:void 0;null==v||v.beginRead();let x=await p(r,g);return null==v||v.endRead(),null==m||m.encryptedBoundArgs.set(y,x),x});async function m(e,r){let t,n=await r,i=o.workUnitAsyncStorage.getStore();if(i){let r="prerender"===i.type?i.cacheSignal:void 0,a=(0,o.getPrerenderResumeDataCache)(i),s=(0,o.getRenderResumeDataCache)(i);(t=(null==a?void 0:a.decryptedBoundArgs.get(n))??(null==s?void 0:s.decryptedBoundArgs.get(n)))||(null==r||r.beginRead(),t=await f(e,n),null==r||r.endRead(),null==a||a.decryptedBoundArgs.set(n,t))}else t=await f(e,n);let{edgeRscModuleMapping:c,rscModuleMapping:l}=(0,s.getClientReferenceManifestForRsc)();return await (0,a.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(d.encode(t)),(null==i?void 0:i.type)==="prerender"?i.renderSignal.aborted?e.close():i.renderSignal.addEventListener("abort",()=>e.close(),{once:!0}):e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:l,serverModuleMap:(0,s.getServerModuleMap)()}})}},82602:(e,r,t)=>{"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{arrayBufferToString:function(){return o},decrypt:function(){return d},encrypt:function(){return l},getActionEncryptionKey:function(){return m},getClientReferenceManifestForRsc:function(){return g},getServerModuleMap:function(){return p},setReferenceManifestsSingleton:function(){return f},stringToUint8Array:function(){return c}});let a=t(71617),i=t(74722),s=t(29294);function o(e){let r=new Uint8Array(e),t=r.byteLength;if(t<65535)return String.fromCharCode.apply(null,r);let n="";for(let e=0;e<t;e++)n+=String.fromCharCode(r[e]);return n}function c(e){let r=e.length,t=new Uint8Array(r);for(let n=0;n<r;n++)t[n]=e.charCodeAt(n);return t}function l(e,r,t){return crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,t)}function d(e,r,t){return crypto.subtle.decrypt({name:"AES-GCM",iv:r},e,t)}let u=Symbol.for("next.server.action-manifests");function f({page:e,clientReferenceManifest:r,serverActionsManifest:t,serverModuleMap:n}){var a;let s=null==(a=globalThis[u])?void 0:a.clientReferenceManifestsPerPage;globalThis[u]={clientReferenceManifestsPerPage:{...s,[(0,i.normalizeAppPath)(e)]:r},serverActionsManifest:t,serverModuleMap:n}}function p(){let e=globalThis[u];if(!e)throw Object.defineProperty(new a.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});return e.serverModuleMap}function g(){let e=globalThis[u];if(!e)throw Object.defineProperty(new a.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let{clientReferenceManifestsPerPage:r}=e,t=s.workAsyncStorage.getStore();if(!t){var n=r;let e=Object.values(n),t={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let r of e)t.clientModules={...t.clientModules,...r.clientModules},t.edgeRscModuleMapping={...t.edgeRscModuleMapping,...r.edgeRscModuleMapping},t.rscModuleMapping={...t.rscModuleMapping,...r.rscModuleMapping};return t}let i=r[t.route];if(!i)throw Object.defineProperty(new a.InvariantError(`Missing Client Reference Manifest for ${t.route}.`),"__NEXT_ERROR_CODE",{value:"E570",enumerable:!1,configurable:!0});return i}async function m(){if(n)return n;let e=globalThis[u];if(!e)throw Object.defineProperty(new a.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let r=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===r)throw Object.defineProperty(new a.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return n=await crypto.subtle.importKey("raw",c(atob(r)),"AES-GCM",!0,["encrypt","decrypt"])}},85531:(e,r)=>{"use strict";function t(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ensureLeadingSlash",{enumerable:!0,get:function(){return t}})},94934:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$RSC_SERVER_ACTION_0:()=>c,$$RSC_SERVER_ACTION_1:()=>l,default:()=>d});var n=t(37413),a=t(67218);t(79130);var i=t(59914),s=t(4536),o=t.n(s);let c=async function(){await (0,i.CI)({redirectTo:"/login"})},l=async function(){await (0,i.Jv)("google",{redirectTo:"/admin"})};async function d(e){let r=await e.searchParams,t=await (0,i.j2)();return(0,n.jsx)("div",{className:"min-h-screen bg-slate-50 flex flex-col justify-center items-center py-12 px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-lg",children:[(0,n.jsxs)("div",{className:"text-center flex flex-col items-center",children:[(0,n.jsx)("img",{src:"/Stag_logo-removebg-preview.png",alt:"Stag Kashmir",className:"w-[140px] h-auto object-contain mb-4"}),(0,n.jsx)("h2",{className:"text-2xl font-extrabold text-slate-900",children:"Admin Login"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"Only authorized administrators can access this area."})]}),r?.error==="AccessDenied"&&(0,n.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4 rounded-r",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("span",{className:"material-symbols-outlined text-red-500",children:"error"})}),(0,n.jsx)("div",{className:"ml-3",children:(0,n.jsx)("p",{className:"text-sm text-red-700",children:"Access denied. You do not have permission to view this page."})})]})}),t?.user?(0,n.jsxs)("div",{className:"mt-8 space-y-6 text-center",children:[(0,n.jsxs)("p",{className:"text-sm text-slate-600 bg-slate-100 p-3 rounded-md",children:["Currently signed in as ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:t.user.email})]}),(0,n.jsx)("form",{action:(0,a.A)(c,"00982aa9fa8a6bde911e1a5e2ef19232cf986e2eac",null),children:(0,n.jsx)("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 transition-all shadow-sm",children:"Sign Out & Try Different Account"})})]}):(0,n.jsx)("form",{action:(0,a.A)(l,"00df619ee1acdc7bb91c1fd56d9f7cda7bc7e46e15",null),className:"mt-8 space-y-6",children:(0,n.jsx)("div",{children:(0,n.jsxs)("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-slate-300 text-sm font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all shadow-sm",children:[(0,n.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-slate-500",viewBox:"0 0 24 24",fill:"currentColor",children:(0,n.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"})})}),"Sign in with Google"]})})}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(o(),{href:"/",className:"w-full flex justify-center py-2 px-4 text-sm font-medium text-slate-500 hover:text-slate-900 transition-colors",children:"â† Return to main site"})})]})})}},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[80,479,43,538,341],()=>t(59404));module.exports=n})();