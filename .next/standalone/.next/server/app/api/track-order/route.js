(()=>{var e={};e.id=20,e.ids=[20],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31183:(e,r,t)=>{"use strict";t.d(r,{z:()=>n});var s=t(96330);let n=global.prisma||new s.PrismaClient({log:["query"]})},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79067:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{GET:()=>c});var n=t(96559),a=t(48088),o=t(37719),i=t(32190),u=t(31183);let p=new Map;async function c(e){if(function(e){let r=Date.now(),t=p.get(e);return!t||r>t.resetAt?(p.set(e,{count:1,resetAt:r+6e4}),!1):t.count>=10||(t.count++,!1)}(e.headers.get("x-forwarded-for")?.split(",")[0]?.trim()??e.headers.get("x-real-ip")??"unknown"))return i.NextResponse.json({error:"Too many requests. Please wait a minute and try again."},{status:429,headers:{"Retry-After":"60"}});let r=e.nextUrl.searchParams.get("phone")?.trim(),t=e.nextUrl.searchParams.get("code")?.trim().toUpperCase();if(!r||!t)return i.NextResponse.json({error:"Phone and tracking code are required."},{status:400});if(r.length>20||t.length>10)return i.NextResponse.json({error:"Invalid input."},{status:400});try{let e=await u.z.order.findFirst({where:{phone:{contains:r.replace(/\s/g,"").replace("+91","").slice(-10)},trackingCode:t},include:{items:{include:{product:{select:{name:!0,imageUrl:!0,slug:!0}}}}}});if(!e)return i.NextResponse.json({error:"No order found. Check your phone number and tracking code."},{status:404});return i.NextResponse.json({order:e})}catch(e){return console.error("[track-order]",e),i.NextResponse.json({error:"Server error. Please try again."},{status:500})}}setInterval(()=>{let e=Date.now();p.forEach((r,t)=>{e>r.resetAt&&p.delete(t)})},3e5);let d=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/track-order/route",pathname:"/api/track-order",filename:"route",bundlePath:"app/api/track-order/route"},resolvedPagePath:"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\api\\track-order\\route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:g,serverHooks:x}=d;function h(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:g})}},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{},96559:(e,r,t)=>{"use strict";e.exports=t(44870)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[80],()=>t(79067));module.exports=s})();