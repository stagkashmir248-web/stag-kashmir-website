"use strict";(()=>{var e={};e.id=160,e.ids=[160],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},46620:(e,r,a)=>{a.r(r),a.d(r,{"7f3b2c42cab10e20cad01db774d9f831841c6fb349":()=>t.M$,"7f57427a84a646118002d5cd67de268ed9131f7a24":()=>t.Sz,"7f968c88eb464a3622087bfbc6c0b8b9a5109a8131":()=>t.d$,"7fe405c67d1c0db1ace49ea43db24c8d93b7d3f676":()=>t.zh});var t=a(21941)},55511:e=>{e.exports=require("crypto")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72665:(e,r,a)=>{a.r(r),a.d(r,{"00baa4b735df1f70c1f3c6249c1ec986c75bc304df":()=>t.$$RSC_SERVER_ACTION_0,"00bc0f97afd3e2d2c7101acb2ba9566a55c94cbfbf":()=>n.zu,"40007ea9af7a748c801ff878b310d14ae3444b107c":()=>s.$$RSC_SERVER_ACTION_0,"407e233d0ac7f47786c68b226cad313f0730972575":()=>n.h6,"409bea58edeab63b7651f78b41d043450c5ced6a63":()=>n.Io,"40c3bf1b7ad7bca7f68736b746716dc764ce7cf04a":()=>s.$$RSC_SERVER_ACTION_1,"40d6f4173ab27a077080d48a73327997ca3018ce9b":()=>n.Wr,"40e9ccb5dbaeb3c402313b733a9ff700e3683f6fba":()=>n.eR});var t=a(99111),s=a(90274),n=a(95891)},80396:(e,r,a)=>{a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>o,routeModule:()=>u,tree:()=>l});var t=a(65239),s=a(48088),n=a(88170),i=a.n(n),d=a(30893),c={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);a.d(r,c);let l={children:["",{children:["admin",{children:["reviews",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,90274)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\reviews\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,99111)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,16439)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\reviews\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/reviews/page",pathname:"/admin/reviews",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},90274:(e,r,a)=>{a.r(r),a.d(r,{$$RSC_SERVER_ACTION_0:()=>o,$$RSC_SERVER_ACTION_1:()=>p,default:()=>u,dynamic:()=>l});var t=a(37413),s=a(67218),n=a(79130),i=a(95891),d=a(4536),c=a.n(d);let l="force-dynamic",o=async function(e){var[r]=await (0,n.decryptActionBoundArgs)("40007ea9af7a748c801ff878b310d14ae3444b107c",e);await (0,i.Io)(r)},p=async function(e){var[r]=await (0,n.decryptActionBoundArgs)("40c3bf1b7ad7bca7f68736b746716dc764ce7cf04a",e);await (0,i.Wr)(r)};async function u(){let e=await (0,i.zu)(),r=e.filter(e=>!e.approved),a=e.filter(e=>e.approved),d=({review:e})=>(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 bg-white/[0.03] border border-white/8 rounded-xl p-5",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"font-semibold text-white text-sm",children:e.authorName}),(0,t.jsx)("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(r=>(0,t.jsx)("span",{className:`material-symbols-outlined !text-[14px] ${e.rating>=r?"text-yellow-400":"text-slate-600"}`,style:{fontVariationSettings:"'FILL' 1"},children:"star"},r))}),(0,t.jsx)(c(),{href:`/shop/${e.product.slug}`,className:"text-xs text-primary hover:underline",children:e.product.name}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:new Date(e.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),(0,t.jsx)("p",{className:"text-slate-300 text-sm leading-relaxed",children:e.comment})]}),(0,t.jsxs)("div",{className:"flex gap-2 shrink-0",children:[!e.approved&&(0,t.jsx)("form",{action:(0,s.A)(o,"40007ea9af7a748c801ff878b310d14ae3444b107c",null).bind(null,(0,n.encryptActionBoundArgs)("40007ea9af7a748c801ff878b310d14ae3444b107c",e.id)),children:(0,t.jsx)("button",{className:"px-3 py-1.5 bg-green-500/10 text-green-400 border border-green-500/20 rounded-lg text-xs font-semibold hover:bg-green-500/20 transition-colors",children:"âœ“ Approve"})}),(0,t.jsx)("form",{action:(0,s.A)(p,"40c3bf1b7ad7bca7f68736b746716dc764ce7cf04a",null).bind(null,(0,n.encryptActionBoundArgs)("40c3bf1b7ad7bca7f68736b746716dc764ce7cf04a",e.id)),children:(0,t.jsx)("button",{className:"px-3 py-1.5 bg-red-500/10 text-red-400 border border-red-500/20 rounded-lg text-xs font-semibold hover:bg-red-500/20 transition-colors",children:"Delete"})})]})]});return(0,t.jsxs)("div",{className:"p-6 max-w-4xl mx-auto flex flex-col gap-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-1",children:"Customer Reviews"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Approve reviews before they appear on the storefront."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-yellow-400 animate-pulse"}),(0,t.jsxs)("h2",{className:"text-lg font-bold text-white",children:["Pending Approval (",r.length,")"]})]}),0===r.length?(0,t.jsx)("p",{className:"text-slate-500 text-sm py-6 text-center border border-white/5 rounded-xl",children:"No pending reviews \uD83C\uDF89"}):(0,t.jsx)("div",{className:"flex flex-col gap-3",children:r.map(e=>(0,t.jsx)(d,{review:e},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-400"}),(0,t.jsxs)("h2",{className:"text-lg font-bold text-white",children:["Approved (",a.length,")"]})]}),0===a.length?(0,t.jsx)("p",{className:"text-slate-500 text-sm py-6 text-center border border-white/5 rounded-xl",children:"No approved reviews yet."}):(0,t.jsx)("div",{className:"flex flex-col gap-3",children:a.map(e=>(0,t.jsx)(d,{review:e},e.id))})]})]})}},95891:(e,r,a)=>{a.d(r,{Io:()=>l,Wr:()=>o,eR:()=>d,h6:()=>i,zu:()=>c});var t=a(67218);a(79130);var s=a(31183),n=a(62351);async function i(e){if(!e.authorName.trim()||!e.comment.trim()||e.rating<1||e.rating>5)return{success:!1,error:"Please fill in all fields with a valid rating."};try{return await s.z.review.create({data:{productId:e.productId,authorName:e.authorName.trim(),rating:e.rating,comment:e.comment.trim(),approved:!1}}),(0,n.revalidatePath)(`/shop/${e.productSlug}`),{success:!0}}catch(e){return console.error("Failed to submit review:",e),{success:!1,error:"Failed to submit review."}}}async function d(e){try{return await s.z.review.findMany({where:{productId:e,approved:!0},orderBy:{createdAt:"desc"}})}catch{return[]}}async function c(){try{return await s.z.review.findMany({orderBy:{createdAt:"desc"},include:{product:{select:{name:!0,slug:!0}}}})}catch{return[]}}async function l(e){try{return await s.z.review.update({where:{id:e},data:{approved:!0}}),(0,n.revalidatePath)("/admin/reviews"),{success:!0}}catch{return{success:!1}}}async function o(e){try{return await s.z.review.delete({where:{id:e}}),(0,n.revalidatePath)("/admin/reviews"),{success:!0}}catch{return{success:!1}}}(0,a(17478).D)([i,d,c,l,o]),(0,t.A)(i,"407e233d0ac7f47786c68b226cad313f0730972575",null),(0,t.A)(d,"40e9ccb5dbaeb3c402313b733a9ff700e3683f6fba",null),(0,t.A)(c,"00bc0f97afd3e2d2c7101acb2ba9566a55c94cbfbf",null),(0,t.A)(l,"409bea58edeab63b7651f78b41d043450c5ced6a63",null),(0,t.A)(o,"40d6f4173ab27a077080d48a73327997ca3018ce9b",null)},96330:e=>{e.exports=require("@prisma/client")}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[80,479,43,538,186,341,391],()=>a(80396));module.exports=t})();