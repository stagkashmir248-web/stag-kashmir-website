"use strict";(()=>{var e={};e.id=698,e.ids=[698],e.modules={1132:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var s=r(37413),a=r(62389),l=r(4536),d=r.n(l),i=r(35133);async function n(){let e=await (0,a.c)();return e.success?(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Dashboard Overview"}),(0,s.jsx)("p",{className:"text-slate-500 mt-2",children:"Welcome back! Here is what's happening today."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 flex flex-col items-center justify-center relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-green-50 dark:bg-green-900/10 rounded-full group-hover:scale-150 transition-transform duration-500 ease-out z-0"}),(0,s.jsx)("span",{className:"material-symbols-outlined !text-[32px] text-green-500 mb-3 relative z-10",children:"payments"}),(0,s.jsx)("h3",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider relative z-10 mb-1",children:"Total Revenue"}),(0,s.jsxs)("p",{className:"text-4xl font-extrabold text-slate-900 dark:text-white relative z-10",children:["₹",e.totalRevenue?.toLocaleString("en-IN",{maximumFractionDigits:0})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 flex flex-col items-center justify-center relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-blue-50 dark:bg-blue-900/10 rounded-full group-hover:scale-150 transition-transform duration-500 ease-out z-0"}),(0,s.jsx)("span",{className:"material-symbols-outlined !text-[32px] text-blue-500 mb-3 relative z-10",children:"pending_actions"}),(0,s.jsx)("h3",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider relative z-10 mb-1",children:"Pending Orders"}),(0,s.jsx)("p",{className:"text-4xl font-extrabold text-slate-900 dark:text-white relative z-10",children:e.pendingOrders})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 flex flex-col items-center justify-center relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-purple-50 dark:bg-purple-900/10 rounded-full group-hover:scale-150 transition-transform duration-500 ease-out z-0"}),(0,s.jsx)("span",{className:"material-symbols-outlined !text-[32px] text-purple-500 mb-3 relative z-10",children:"group"}),(0,s.jsx)("h3",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider relative z-10 mb-1",children:"Total Customers"}),(0,s.jsx)("p",{className:"text-4xl font-extrabold text-slate-900 dark:text-white relative z-10",children:e.totalCustomers})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-red-50/50 dark:bg-red-900/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[(0,s.jsx)("span",{className:"material-symbols-outlined",children:"warning"}),(0,s.jsx)("h2",{className:"font-bold text-lg",children:"Low Stock Alerts"})]}),(0,s.jsxs)("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 text-xs font-bold px-2 py-1 rounded-full",children:[e.lowStockAlerts?.length," Items"]})]}),(0,s.jsx)("div",{className:"p-0 flex-1 overflow-auto max-h-[400px]",children:e.lowStockAlerts?.length===0?(0,s.jsxs)("div",{className:"p-8 text-center text-slate-500 flex flex-col items-center gap-2",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-4xl text-green-400",children:"check_circle"}),(0,s.jsx)("p",{children:"All items are sufficiently stocked!"})]}):(0,s.jsx)("ul",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:e.lowStockAlerts?.map(e=>s.jsxs("li",{className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:e.name}),s.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"}),e.type]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:`text-sm font-bold px-3 py-1 rounded-full ${0===e.stock?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:[e.stock," left"]}),s.jsx(d(),{href:"/admin/products",className:"text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 p-1.5 rounded-md transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})})]})]},e.id))})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-800/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[(0,s.jsx)("span",{className:"material-symbols-outlined",children:"history"}),(0,s.jsx)("h2",{className:"font-bold text-lg",children:"Recent Orders"})]}),(0,s.jsx)(d(),{href:"/admin/orders",className:"text-sm text-primary hover:underline font-medium",children:"View All"})]}),(0,s.jsx)("div",{className:"p-0 flex-1 overflow-auto max-h-[400px]",children:e.recentOrders?.length===0?(0,s.jsx)("div",{className:"p-8 text-center text-slate-500",children:"No recent orders found."}):(0,s.jsx)("ul",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:e.recentOrders?.map(e=>s.jsxs("li",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors flex flex-col gap-2",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:e.customer}),s.jsxs("span",{className:"text-xs text-slate-500 font-mono mt-0.5",children:["#",e.id.slice(-6).toUpperCase()]})]}),s.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["₹",e.total?.toLocaleString("en-IN")]})]}),s.jsxs("div",{className:"flex justify-between items-center text-xs",children:[s.jsx("span",{className:"text-slate-400",children:i.GP(new Date(e.createdAt),"MMM d, yyyy 'at' h:mm a")}),s.jsx("span",{className:`px-2 py-0.5 rounded-full font-bold uppercase tracking-wider text-[10px] ${"PENDING"===e.status?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"SHIPPED"===e.status?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"DELIVERED"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"}`,children:e.status})]})]},e.id))})})]})]})]}):(0,s.jsxs)("div",{className:"p-8 text-center bg-red-50 text-red-600 rounded-xl",children:["Error loading dashboard: ",e.error]})}},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13041:(e,t,r)=>{r.r(t),r.d(t,{"009ef5116e5184387b4519c68f5d0a7340e4adde3f":()=>a.c,"00baa4b735df1f70c1f3c6249c1ec986c75bc304df":()=>s.$$RSC_SERVER_ACTION_0});var s=r(99111),a=r(62389)},17478:(e,t)=>{function r(e){for(let t=0;t<e.length;t++){let r=e[t];if("function"!=typeof r)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof r}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(t,"D",{enumerable:!0,get:function(){return r}})},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26212:(e,t,r)=>{r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=r(65239),a=r(48088),l=r(88170),d=r.n(l),i=r(30893),n={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);r.d(t,n);let o={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1132)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,16439)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},46620:(e,t,r)=>{r.r(t),r.d(t,{"7f3b2c42cab10e20cad01db774d9f831841c6fb349":()=>s.M$,"7f57427a84a646118002d5cd67de268ed9131f7a24":()=>s.Sz,"7f968c88eb464a3622087bfbc6c0b8b9a5109a8131":()=>s.d$,"7fe405c67d1c0db1ace49ea43db24c8d93b7d3f676":()=>s.zh});var s=r(21941)},55511:e=>{e.exports=require("crypto")},62389:(e,t,r)=>{r.d(t,{c:()=>l});var s=r(67218);r(79130);var a=r(31183);async function l(){try{let e=new Date;e.getFullYear(),e.getMonth();let t=(await a.z.order.findMany({where:{status:{not:"CANCELLED"}}})).reduce((e,t)=>e+t.total,0),r=await a.z.order.count({where:{status:"PENDING"}}),s=await a.z.user.count(),l=await a.z.product.findMany({where:{stock:{lt:5},isArchived:!1},select:{id:!0,name:!0,stock:!0},take:10}),d=await a.z.productVariation.findMany({where:{stock:{lt:5},product:{isArchived:!1}},include:{product:{select:{name:!0}}},take:10}),i=[...l.map(e=>({id:e.id,name:e.name,stock:e.stock,type:"Product"})),...d.map(e=>({id:e.id,name:`${e.product.name} - ${e.name}`,stock:e.stock,type:"Variation"}))].sort((e,t)=>e.stock-t.stock).slice(0,10),n=await a.z.order.findMany({take:5,orderBy:{createdAt:"desc"},select:{id:!0,customer:!0,total:!0,status:!0,createdAt:!0}}),o=await a.z.inquiry.findMany({take:5,orderBy:{createdAt:"desc"},select:{id:!0,name:!0,subject:!0,createdAt:!0}});return{success:!0,totalRevenue:t,pendingOrders:r,totalCustomers:s,lowStockAlerts:i,recentOrders:n,recentInquiries:o}}catch(e){return console.error("Failed to fetch dashboard metrics:",e),{success:!1,error:"Failed to load dashboard data"}}}(0,r(17478).D)([l]),(0,s.A)(l,"009ef5116e5184387b4519c68f5d0a7340e4adde3f",null)},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},96330:e=>{e.exports=require("@prisma/client")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[80,479,43,538,389,133,341,391],()=>r(26212));module.exports=s})();