exports.id=52,exports.ids=[52],exports.modules={3582:(e,t,r)=>{"use strict";let n=r(63033),i=r(29294),a=r(75124),o=r(75659),s=r(66224),c=r(38248),u=new WeakMap;function l(e){let t=new d(e),r=Promise.resolve(t);return Object.defineProperty(r,"isEnabled",{get:()=>t.isEnabled,set(e){Object.defineProperty(r,"isEnabled",{value:e,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),r.enable=t.enable.bind(t),r.disable=t.disable.bind(t),r}class d{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){f("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){f("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}let p=(0,o.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})});function f(e){let t=i.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});else if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});else if("after"===r.phase)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(r){if("prerender"===r.type){let n=Object.defineProperty(Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});(0,a.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,n,r)}else if("prerender-ppr"===r.type)(0,a.postponeWithTracking)(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let n=Object.defineProperty(new c.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}}}}},4431:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,o.isNextRouterError)(t)||(0,a.isBailoutToCSRError)(t)||(0,c.isDynamicServerError)(t)||(0,s.isDynamicPostpone)(t)||(0,i.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(37461),i=r(61794),a=r(97683),o=r(21351),s=r(75124),c=r(38248);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},12130:(e,t,r)=>{var n;(()=>{var i={226:function(i,a){!function(o,s){"use strict";var c="function",u="undefined",l="object",d="string",p="major",f="model",h="name",y="type",m="vendor",b="version",w="architecture",g="console",_="mobile",v="tablet",k="smarttv",E="wearable",A="embedded",S="Amazon",x="Apple",R="ASUS",T="BlackBerry",P="Browser",O="Chrome",C="Firefox",U="Google",j="Huawei",$="Microsoft",I="Motorola",H="Opera",D="Samsung",W="Sharp",L="Sony",M="Xiaomi",N="Zebra",K="Facebook",J="Chromium OS",q="Mac OS",B=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},z=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},F=function(e,t){return typeof e===d&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,""),typeof t===u?e:e.substring(0,350)},X=function(e,t){for(var r,n,i,a,o,u,d=0;d<t.length&&!o;){var p=t[d],f=t[d+1];for(r=n=0;r<p.length&&!o&&p[r];)if(o=p[r++].exec(e))for(i=0;i<f.length;i++)u=o[++n],typeof(a=f[i])===l&&a.length>0?2===a.length?typeof a[1]==c?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==c||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):void 0:this[a[0]]=u?a[1].call(this,u,a[2]):void 0:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):s):this[a]=u||s;d+=2}},Z=function(e,t){for(var r in t)if(typeof t[r]===l&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(F(t[r][n],e))return"?"===r?s:r}else if(F(t[r],e))return"?"===r?s:r;return e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,b],[/opios[\/ ]+([\w\.]+)/i],[b,[h,H+" Mini"]],[/\bopr\/([\w\.]+)/i],[b,[h,H]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,b],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[h,"UC"+P]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[b,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[b,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[b,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+P],b],[/\bfocus\/([\w\.]+)/i],[b,[h,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[h,H+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[h,H+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[h,"MIUI "+P]],[/fxios\/([-\w\.]+)/i],[b,[h,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+P]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+P],b],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,b],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,K],b],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,b],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[b,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[h,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,O+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[h,"Android "+P]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,b],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[b,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[b,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[b,Z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[h,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,b],[/(cobalt)\/([\w\.]+)/i],[h,[b,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,V]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[m,D],[y,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[m,D],[y,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[m,x],[y,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[m,x],[y,v]],[/(macintosh);/i],[f,[m,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[m,W],[y,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[m,j],[y,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[m,j],[y,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[m,M],[y,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[m,M],[y,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[m,"OPPO"],[y,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[m,"Vivo"],[y,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[m,"Realme"],[y,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[m,I],[y,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[m,I],[y,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[m,"LG"],[y,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[m,"LG"],[y,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[m,"Lenovo"],[y,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[m,"Nokia"],[y,_]],[/(pixel c)\b/i],[f,[m,U],[y,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[m,U],[y,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[m,L],[y,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[m,L],[y,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[m,"OnePlus"],[y,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[m,S],[y,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[m,S],[y,_]],[/(playbook);[-\w\),; ]+(rim)/i],[f,m,[y,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[m,T],[y,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[m,R],[y,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[m,R],[y,_]],[/(nexus 9)/i],[f,[m,"HTC"],[y,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[f,/_/g," "],[y,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[m,"Acer"],[y,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[m,"Meizu"],[y,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,f,[y,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,f,[y,v]],[/(surface duo)/i],[f,[m,$],[y,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[m,"Fairphone"],[y,_]],[/(u304aa)/i],[f,[m,"AT&T"],[y,_]],[/\bsie-(\w*)/i],[f,[m,"Siemens"],[y,_]],[/\b(rct\w+) b/i],[f,[m,"RCA"],[y,v]],[/\b(venue[\d ]{2,7}) b/i],[f,[m,"Dell"],[y,v]],[/\b(q(?:mv|ta)\w+) b/i],[f,[m,"Verizon"],[y,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[m,"Barnes & Noble"],[y,v]],[/\b(tm\d{3}\w+) b/i],[f,[m,"NuVision"],[y,v]],[/\b(k88) b/i],[f,[m,"ZTE"],[y,v]],[/\b(nx\d{3}j) b/i],[f,[m,"ZTE"],[y,_]],[/\b(gen\d{3}) b.+49h/i],[f,[m,"Swiss"],[y,_]],[/\b(zur\d{3}) b/i],[f,[m,"Swiss"],[y,v]],[/\b((zeki)?tb.*\b) b/i],[f,[m,"Zeki"],[y,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],f,[y,v]],[/\b(ns-?\w{0,9}) b/i],[f,[m,"Insignia"],[y,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[m,"NextBook"],[y,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],f,[y,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],f,[y,_]],[/\b(ph-1) /i],[f,[m,"Essential"],[y,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[m,"Envizen"],[y,v]],[/\b(trio[-\w\. ]+) b/i],[f,[m,"MachSpeed"],[y,v]],[/\btu_(1491) b/i],[f,[m,"Rotor"],[y,v]],[/(shield[\w ]+) b/i],[f,[m,"Nvidia"],[y,v]],[/(sprint) (\w+)/i],[m,f,[y,_]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[m,$],[y,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[m,N],[y,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[m,N],[y,_]],[/smart-tv.+(samsung)/i],[m,[y,k]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[m,D],[y,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,"LG"],[y,k]],[/(apple) ?tv/i],[m,[f,x+" TV"],[y,k]],[/crkey/i],[[f,O+"cast"],[m,U],[y,k]],[/droid.+aft(\w)( bui|\))/i],[f,[m,S],[y,k]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[m,W],[y,k]],[/(bravia[\w ]+)( bui|\))/i],[f,[m,L],[y,k]],[/(mitv-\w{5}) bui/i],[f,[m,M],[y,k]],[/Hbbtv.*(technisat) (.*);/i],[m,f,[y,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,G],[f,G],[y,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,k]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,f,[y,g]],[/droid.+; (shield) bui/i],[f,[m,"Nvidia"],[y,g]],[/(playstation [345portablevi]+)/i],[f,[m,L],[y,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[m,$],[y,g]],[/((pebble))app/i],[m,f,[y,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[m,x],[y,E]],[/droid.+; (glass) \d/i],[f,[m,U],[y,E]],[/droid.+; (wt63?0{2,3})\)/i],[f,[m,N],[y,E]],[/(quest( 2| pro)?)/i],[f,[m,K],[y,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[y,A]],[/(aeobc)\b/i],[f,[m,S],[y,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[y,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[y,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[y,_]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,b],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,b],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[b,Z,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[b,Z,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,q],[b,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,b],[/\(bb(10);/i],[b,[h,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[b,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[h,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[b,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[b,[h,O+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,J],b],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,b],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,b]]},ee=function(e,t){if(typeof e===l&&(t=e,e=s),!(this instanceof ee))return new ee(e,t).getResult();var r=typeof o!==u&&o.navigator?o.navigator:s,n=e||(r&&r.userAgent?r.userAgent:""),i=r&&r.userAgentData?r.userAgentData:s,a=t?B(Q,t):Q,g=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[h]=s,t[b]=s,X.call(t,n,a.browser),t[p]=typeof(e=t[b])===d?e.replace(/[^\d\.]/g,"").split(".")[0]:s,g&&r&&r.brave&&typeof r.brave.isBrave==c&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[w]=s,X.call(e,n,a.cpu),e},this.getDevice=function(){var e={};return e[m]=s,e[f]=s,e[y]=s,X.call(e,n,a.device),g&&!e[y]&&i&&i.mobile&&(e[y]=_),g&&"Macintosh"==e[f]&&r&&typeof r.standalone!==u&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[f]="iPad",e[y]=v),e},this.getEngine=function(){var e={};return e[h]=s,e[b]=s,X.call(e,n,a.engine),e},this.getOS=function(){var e={};return e[h]=s,e[b]=s,X.call(e,n,a.os),g&&!e[h]&&i&&"Unknown"!=i.platform&&(e[h]=i.platform.replace(/chrome os/i,J).replace(/macos/i,q)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===d&&e.length>350?G(e,350):e,this},this.setUA(n),this};ee.VERSION="1.0.35",ee.BROWSER=z([h,b,p]),ee.CPU=z([w]),ee.DEVICE=z([f,m,y,g,_,k,v,E,A]),ee.ENGINE=ee.OS=z([h,b]),typeof a!==u?(i.exports&&(a=i.exports=ee),a.UAParser=ee):r.amdO?void 0!==(n=(function(){return ee}).call(t,r,t,e))&&(e.exports=n):typeof o!==u&&(o.UAParser=ee);var et=typeof o!==u&&(o.jQuery||o.Zepto);if(et&&!et.ua){var er=new ee;et.ua=er.getResult(),et.ua.get=function(){return er.getUA()},et.ua.set=function(e){er.setUA(e);var t=er.getResult();for(var r in t)et.ua[r]=t[r]}}}("object"==typeof window?window:this)}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}},n=!0;try{i[e].call(r.exports,r,r.exports,o),n=!1}finally{n&&delete a[e]}return r.exports}o.ab=__dirname+"/",e.exports=o(226)})()},16296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isRequestAPICallableInsideAfter:function(){return c},throwForSearchParamsAccessInUseCache:function(){return s},throwWithStaticGenerationBailoutError:function(){return a},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return o}});let n=r(66224),i=r(3295);function a(e,t){throw Object.defineProperty(new n.StaticGenBailoutError(`Route ${e} couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E576",enumerable:!1,configurable:!0})}function o(e,t){throw Object.defineProperty(new n.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function s(e){throw Object.defineProperty(Error(`Route ${e} used "searchParams" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "searchParams" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E634",enumerable:!1,configurable:!0})}function c(){let e=i.afterTaskAsyncStorage.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}},18389:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}});var r=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},20464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"after",{enumerable:!0,get:function(){return i}});let n=r(29294);function i(e){let t=n.workAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:r}=t;return r.after(e)}},21351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return a}});let n=r(32913),i=r(59311);function a(e){return(0,i.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ImageResponse:function(){return n.ImageResponse},NextRequest:function(){return i.NextRequest},NextResponse:function(){return a.NextResponse},URLPattern:function(){return s.URLPattern},after:function(){return c.after},connection:function(){return u.connection},unstable_rootParams:function(){return l.unstable_rootParams},userAgent:function(){return o.userAgent},userAgentFromString:function(){return o.userAgentFromString}});let n=r(91339),i=r(81661),a=r(39999),o=r(64043),s=r(70388),c=r(44234),u=r(40193),l=r(61096)},23874:(e,t,r)=>{"use strict";Object.defineProperty(t,"U",{enumerable:!0,get:function(){return p}});let n=r(82362),i=r(14659),a=r(29294),o=r(63033),s=r(75124),c=r(66224),u=r(37461),l=r(75659),d=(r(97748),r(16296));function p(){let e="cookies",t=a.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(t.forceStatic)return h(n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});else if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(r)if("prerender"===r.type){var l=t.route,p=r;let e=f.get(p);if(e)return e;let n=(0,u.makeHangingPromise)(p.renderSignal,"`cookies()`");return f.set(p,n),Object.defineProperties(n,{[Symbol.iterator]:{value:function(){let e="`cookies()[Symbol.iterator]()`",t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}},size:{get(){let e="`cookies().size`",t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}},get:{value:function(){let e;e=0==arguments.length?"`cookies().get()`":`\`cookies().get(${y(arguments[0])})\``;let t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}},getAll:{value:function(){let e;e=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${y(arguments[0])})\``;let t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}},has:{value:function(){let e;e=0==arguments.length?"`cookies().has()`":`\`cookies().has(${y(arguments[0])})\``;let t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}},set:{value:function(){let e;if(0==arguments.length)e="`cookies().set()`";else{let t=arguments[0];e=t?`\`cookies().set(${y(t)}, ...)\``:"`cookies().set(...)`"}let t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}},delete:{value:function(){let e;e=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${y(arguments[0])})\``:`\`cookies().delete(${y(arguments[0])}, ...)\``;let t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}},clear:{value:function(){let e="`cookies().clear()`",t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}},toString:{value:function(){let e="`cookies().toString()`",t=b(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,p)}}}),n}else"prerender-ppr"===r.type?(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&(0,s.throwToInterruptStaticGeneration)(e,t,r);(0,s.trackDynamicDataInDynamicRender)(t,r)}let m=(0,o.getExpectedRequestStore)(e);return h((0,n.areCookiesMutableInCurrentPhase)(m)?m.userspaceMutableCookies:m.cookies)}let f=new WeakMap;function h(e){let t=f.get(e);if(t)return t;let r=Promise.resolve(e);return f.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):w.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):g.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function y(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}let m=(0,l.createDedupedByCallsiteServerErrorLoggerDev)(b);function b(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})}function w(){return this.getAll().map(e=>[e.name,e]).values()}function g(e){for(let e of this.getAll())this.delete(e.name);return e}},24796:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(32913).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},32913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HTTPAccessErrorStatus:function(){return r},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return i},getAccessFallbackErrorTypeByStatus:function(){return s},getAccessFallbackHTTPStatus:function(){return o},isHTTPAccessFallbackError:function(){return a}});let r={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},n=new Set(Object.values(r)),i="NEXT_HTTP_ERROR_FALLBACK";function a(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===i&&n.has(Number(r))}function o(e){return Number(e.digest.split(";")[1])}function s(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39999:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextResponse",{enumerable:!0,get:function(){return d}});let n=r(14659),i=r(49761),a=r(40857),o=r(10492),s=r(14659),c=Symbol("internal response"),u=new Set([301,302,303,307,308]);function l(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);let r=this.headers,u=new Proxy(new s.ResponseCookies(r),{get(e,i,a){switch(i){case"delete":case"set":return(...a)=>{let o=Reflect.apply(e[i],e,a),c=new Headers(r);return o instanceof s.ResponseCookies&&r.set("x-middleware-set-cookie",o.getAll().map(e=>(0,n.stringifyCookie)(e)).join(",")),l(t,c),o};default:return o.ReflectAdapter.get(e,i,a)}}});this[c]={cookies:u,url:t.url?new i.NextURL(t.url,{headers:(0,a.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[c].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!u.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,a.validateURL)(e)),new d(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,a.validateURL)(e)),l(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),l(e,t),new d(null,{...e,headers:t})}}},40193:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"connection",{enumerable:!0,get:function(){return u}});let n=r(29294),i=r(63033),a=r(75124),o=r(66224),s=r(37461),c=r(16296);function u(){let e=n.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,c.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(e.forceStatic)return Promise.resolve(void 0);if(t){if("cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E111",enumerable:!1,configurable:!0});else if("unstable-cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0})}if(e.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(t)if("prerender"===t.type)return(0,s.makeHangingPromise)(t.renderSignal,"`connection()`");else"prerender-ppr"===t.type?(0,a.postponeWithTracking)(e.route,"connection",t.dynamicTracking):"prerender-legacy"===t.type&&(0,a.throwToInterruptStaticGeneration)("connection",e,t);(0,a.trackDynamicDataInDynamicRender)(e,t)}return Promise.resolve(void 0)}},40347:(e,t,r)=>{"use strict";function n(e){return{id:"google",name:"Google",type:"oidc",issuer:"https://accounts.google.com",style:{brandColor:"#1a73e8"},options:e}}r.d(t,{A:()=>n})},44234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){Object.keys(e).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})}(r(20464),t)},51078:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{describeHasCheckingStringProperty:function(){return i},describeStringPropertyAccess:function(){return n},wellKnownProperties:function(){return a}});let r=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function n(e,t){return r.test(t)?"`"+e+"."+t+"`":"`"+e+"["+JSON.stringify(t)+"]`"}function i(e,t){let r=JSON.stringify(t);return"`Reflect.has("+e+", "+r+")`, `"+r+" in "+e+"`, or similar"}let a=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","toJSON","$$typeof","__esModule"])},51243:(e,t,r)=>{"use strict";let n,i,a,o,s,c,u;r.d(t,{Ay:()=>og});var l={};r.r(l),r.d(l,{q:()=>tZ,l:()=>t0});var d=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},p=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function f(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class h{constructor(e,t,r){if(rS.add(this),rx.set(this,{}),rR.set(this,void 0),rT.set(this,void 0),d(this,rT,r,"f"),d(this,rR,e,"f"),!t)return;let{name:n}=e;for(let[e,r]of Object.entries(t))e.startsWith(n)&&r&&(p(this,rx,"f")[e]=r)}get value(){return Object.keys(p(this,rx,"f")).sort((e,t)=>parseInt(e.split(".").pop()||"0")-parseInt(t.split(".").pop()||"0")).map(e=>p(this,rx,"f")[e]).join("")}chunk(e,t){let r=p(this,rS,"m",rO).call(this);for(let n of p(this,rS,"m",rP).call(this,{name:p(this,rR,"f").name,value:e,options:{...p(this,rR,"f").options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(p(this,rS,"m",rO).call(this))}}rx=new WeakMap,rR=new WeakMap,rT=new WeakMap,rS=new WeakSet,rP=function(e){let t=Math.ceil(e.value.length/3936);if(1===t)return p(this,rx,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,i=e.value.substr(3936*n,3936);r.push({...e,name:t,value:i}),p(this,rx,"f")[t]=i}return p(this,rT,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:e.value.length,chunks:r.map(e=>e.value.length+160)}),r},rO=function(){let e={};for(let t in p(this,rx,"f"))delete p(this,rx,"f")?.[t],e[t]={name:t,value:"",options:{...p(this,rR,"f").options,maxAge:0}};return e};class y extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class m extends y{}m.kind="signIn";class b extends y{}b.type="AdapterError";class w extends y{}w.type="AccessDenied";class g extends y{}g.type="CallbackRouteError";class _ extends y{}_.type="ErrorPageLoop";class v extends y{}v.type="EventError";class k extends y{}k.type="InvalidCallbackUrl";class E extends m{constructor(){super(...arguments),this.code="credentials"}}E.type="CredentialsSignin";class A extends y{}A.type="InvalidEndpoints";class S extends y{}S.type="InvalidCheck";class x extends y{}x.type="JWTSessionError";class R extends y{}R.type="MissingAdapter";class T extends y{}T.type="MissingAdapterMethods";class P extends y{}P.type="MissingAuthorize";class O extends y{}O.type="MissingSecret";class C extends m{}C.type="OAuthAccountNotLinked";class U extends m{}U.type="OAuthCallbackError";class j extends y{}j.type="OAuthProfileParseError";class $ extends y{}$.type="SessionTokenError";class I extends m{}I.type="OAuthSignInError";class H extends m{}H.type="EmailSignInError";class D extends y{}D.type="SignOutError";class W extends y{}W.type="UnknownAction";class L extends y{}L.type="UnsupportedStrategy";class M extends y{}M.type="InvalidProvider";class N extends y{}N.type="UntrustedHost";class K extends y{}K.type="Verification";class J extends m{}J.type="MissingCSRF";let q=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class B extends y{}B.type="DuplicateConditionalUI";class z extends y{}z.type="MissingWebAuthnAutocomplete";class F extends y{}F.type="WebAuthnVerificationError";class V extends m{}V.type="AccountNotLinked";class G extends y{}G.type="ExperimentalFeatureNotEnabled";let X=!1;function Z(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}let Y=!1,Q=!1,ee=!1,et=["createVerificationToken","useVerificationToken","getUserByEmail"],er=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],en=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];var ei=r(55511);let ea=(e,t,r,n,i)=>{let a=parseInt(e.substr(3),10)>>3||20,o=(0,ei.createHmac)(e,r.byteLength?r:new Uint8Array(a)).update(t).digest(),s=Math.ceil(i/a),c=new Uint8Array(a*s+n.byteLength+1),u=0,l=0;for(let t=1;t<=s;t++)c.set(n,l),c[l+n.byteLength]=t,c.set((0,ei.createHmac)(e,o).update(c.subarray(u,l+n.byteLength+1)).digest(),l),u=l,l+=a;return c.slice(0,i)};"function"!=typeof ei.hkdf||process.versions.electron||(n=async(...e)=>new Promise((t,r)=>{ei.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})}));let eo=async(e,t,r,i,a)=>(n||ea)(e,t,r,i,a);function es(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function ec(e,t,r,n,i){return eo(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=es(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),es(r,"salt"),function(e){let t=es(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(n),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(i,e))}async function eu(e,t){let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))}let el=new TextEncoder,ed=new TextDecoder;function ep(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function ef(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function eh(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return ef(r,t,0),ef(r,e%0x100000000,4),r}function ey(e){let t=new Uint8Array(4);return ef(t,e),t}function em(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>127)throw TypeError("non-ASCII string encountered in encode()");t[r]=n}return t}function eb(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:ed.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=ed.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/");try{var r=t;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let e=atob(r),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function ew(e){let t=e;return("string"==typeof t&&(t=el.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):(function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class eg extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class e_ extends eg{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class ev extends eg{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class ek extends eg{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class eE extends eg{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class eA extends eg{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}class eS extends eg{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class ex extends eg{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class eR extends eg{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class eT extends eg{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}function eP(e){if(!eO(e))throw Error("CryptoKey instance expected")}let eO=e=>{if(e?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return e instanceof CryptoKey}catch{return!1}},eC=e=>e?.[Symbol.toStringTag]==="KeyObject",eU=e=>eO(e)||eC(e),ej=e=>"object"==typeof e&&null!==e;function e$(e){if(!ej(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}let eI=e=>e$(e)&&"string"==typeof e.kty,eH=e=>"oct"!==e.kty&&("AKP"===e.kty&&"string"==typeof e.priv||"string"==typeof e.d),eD=e=>"oct"!==e.kty&&void 0===e.d&&void 0===e.priv,eW=e=>"oct"===e.kty&&"string"==typeof e.k;function eL(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let eM=(e,...t)=>eL("Key must be ",e,...t),eN=(e,t,...r)=>eL(`Key for the ${e} algorithm must be `,t,...r);async function eK(e){if(eC(e))if("secret"!==e.type)return e.export({format:"jwk"});else e=e.export();if(e instanceof Uint8Array)return{kty:"oct",k:ew(e)};if(!eO(e))throw TypeError(eM(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...a}=await crypto.subtle.exportKey("jwk",e);return"AKP"===a.kty&&(a.alg=n),a}async function eJ(e){return eK(e)}let eq=(e,t)=>{if("string"!=typeof e||!e)throw new eR(`${t} missing or invalid`)};async function eB(e,t){let r,n;if(eI(e))r=e;else if(eU(e))r=await eJ(e);else throw TypeError(eM(e,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"AKP":eq(r.alg,'"alg" (Algorithm) Parameter'),eq(r.pub,'"pub" (Public key) Parameter'),n={alg:r.alg,kty:r.kty,pub:r.pub};break;case"EC":eq(r.crv,'"crv" (Curve) Parameter'),eq(r.x,'"x" (X Coordinate) Parameter'),eq(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":eq(r.crv,'"crv" (Subtype of Key Pair) Parameter'),eq(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":eq(r.e,'"e" (Exponent) Parameter'),eq(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":eq(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new eE('"kty" (Key Type) Parameter missing or unsupported')}let i=em(JSON.stringify(n));return ew(await eu(t,i))}let ez=Symbol();function eF(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new eE(`Unsupported JWE Algorithm: ${e}`)}}let eV=e=>crypto.getRandomValues(new Uint8Array(eF(e)>>3));function eG(e,t){if(t.length<<3!==eF(e))throw new eS("Invalid Initialization Vector length")}function eX(e,t){let r=e.byteLength<<3;if(r!==t)throw new eS(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)}let eZ=(e,t="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`),eY=(e,t)=>e.name===t;function eQ(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!eY(e.algorithm,"AES-GCM"))throw eZ("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eZ(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!eY(e.algorithm,"AES-KW"))throw eZ("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eZ(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw eZ("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!eY(e.algorithm,"PBKDF2"))throw eZ("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!eY(e.algorithm,"RSA-OAEP"))throw eZ("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(parseInt(e.algorithm.hash.name.slice(4),10)!==r)throw eZ(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}var n=e,i=r;if(i&&!n.usages.includes(i))throw TypeError(`CryptoKey does not support this operation, its usages must include ${i}.`)}async function e0(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(eM(r,"Uint8Array"));let a=parseInt(e.slice(1,4),10),o=await crypto.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),s=await crypto.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},o,t)),u=ep(i,n,c,eh(i.length<<3));return{ciphertext:c,tag:new Uint8Array((await crypto.subtle.sign("HMAC",s,u)).slice(0,a>>3)),iv:n}}async function e1(e,t,r,n,i){let a;r instanceof Uint8Array?a=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(eQ(r,e,"encrypt"),a=r);let o=new Uint8Array(await crypto.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},a,t)),s=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:s,iv:n}}async function e2(e,t,r,n,i){if(!eO(r)&&!(r instanceof Uint8Array))throw TypeError(eM(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(n?eG(e,n):n=eV(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&eX(r,parseInt(e.slice(-3),10)),e0(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&eX(r,parseInt(e.slice(1,4),10)),e1(e,t,r,n,i);default:throw new eE("Unsupported JWE Content Encryption Algorithm")}}function e5(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function e3(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(eQ(e,t,r),e)}async function e6(e,t,r){let n=await e3(t,e,"wrapKey");e5(n,e);let i=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",i,n,"AES-KW"))}async function e4(e,t,r){let n=await e3(t,e,"unwrapKey");e5(n,e);let i=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",i))}function e8(e){return ep(ey(e.length),e)}async function e9(e,t,r){let n=t>>3,i=Math.ceil(n/32),a=new Uint8Array(32*i);for(let t=1;t<=i;t++){let n=new Uint8Array(4+e.length+r.length);n.set(ey(t),0),n.set(e,4),n.set(r,4+e.length);let i=await eu("sha256",n);a.set(i,(t-1)*32)}return a.slice(0,n)}async function e7(e,t,r,n,i=new Uint8Array,a=new Uint8Array){var o;eQ(e,"ECDH"),eQ(t,"ECDH","deriveBits");let s=e8(em(r)),c=e8(i),u=e8(a),l=ep(s,c,u,ey(n),new Uint8Array);return e9(new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,"X25519"===(o=e).algorithm.name?256:Math.ceil(parseInt(o.algorithm.namedCurve.slice(-3),10)/8)<<3)),n,l)}function te(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===e.algorithm.name}}let tt=(e,t)=>ep(em(e),Uint8Array.of(0),t);async function tr(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new eS("PBES2 Salt Input must be 8 or more octets");let i=tt(t,e),a=parseInt(t.slice(13,16),10),o={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},s=await (n instanceof Uint8Array?crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]):(eQ(n,t,"deriveBits"),n));return new Uint8Array(await crypto.subtle.deriveBits(o,s,a))}async function tn(e,t,r,n=2048,i=crypto.getRandomValues(new Uint8Array(16))){let a=await tr(i,e,n,t);return{encryptedKey:await e6(e.slice(-6),a,r),p2c:n,p2s:ew(i)}}async function ti(e,t,r,n,i){let a=await tr(i,e,n,t);return e4(e.slice(-6),a,r)}function ta(e,t){if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}}let to=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new eE(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function ts(e,t,r){return eQ(t,e,"encrypt"),ta(e,t),new Uint8Array(await crypto.subtle.encrypt(to(e),t,r))}async function tc(e,t,r){return eQ(t,e,"decrypt"),ta(e,t),new Uint8Array(await crypto.subtle.decrypt(to(e),t,r))}async function tu(e){if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"AKP":switch(e.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":t={name:e.alg},r=e.priv?["sign"]:["verify"];break;default:throw new eE('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new eE('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new eE('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new eE('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new eE('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n={...e};return"AKP"!==n.kty&&delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??(!e.d&&!e.priv),e.key_ops??r)}let tl=async(e,t,r,n=!1)=>{let a=(i||=new WeakMap).get(e);if(a?.[r])return a[r];let o=await tu({...t,alg:r});return n&&Object.freeze(e),a?a[r]=o:i.set(e,{[r]:o}),o},td=(e,t)=>{let r,n=(i||=new WeakMap).get(e);if(n?.[t])return n[t];let a="public"===e.type,o=!!a;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}r=e.toCryptoKey(e.asymmetricKeyType,o,a?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,o,[a?"verify":"sign"])}switch(e.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(t!==e.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,o,[a?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let n;switch(t){case"RSA-OAEP":n="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":n="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":n="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":n="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:n},o,a?["encrypt"]:["decrypt"]);r=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:n},o,[a?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let n=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},o,[a?"verify":"sign"])),"ES384"===t&&"P-384"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},o,[a?"verify":"sign"])),"ES512"===t&&"P-521"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},o,[a?"verify":"sign"])),t.startsWith("ECDH-ES")&&(r=e.toCryptoKey({name:"ECDH",namedCurve:n},o,a?[]:["deriveBits"]))}if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");return n?n[t]=r:i.set(e,{[t]:r}),r};async function tp(e,t){if(e instanceof Uint8Array||eO(e))return e;if(eC(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return td(e,t)}catch(e){if(e instanceof TypeError)throw e}let r=e.export({format:"jwk"});return tl(e,r,t)}if(eI(e))return e.k?eb(e.k):tl(e,e,t,!0);throw Error("unreachable")}function tf(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new eE(`Unsupported JWE Algorithm: ${e}`)}}let th=e=>crypto.getRandomValues(new Uint8Array(tf(e)>>3));async function ty(e,t){if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),i=new Uint8Array(await crypto.subtle.sign(r,n,e)),a=new Uint8Array(await crypto.subtle.sign(r,n,t)),o=0,s=-1;for(;++s<32;)o|=i[s]^a[s];return 0===o}async function tm(e,t,r,n,i,a){let o,s;if(!(t instanceof Uint8Array))throw TypeError(eM(t,"Uint8Array"));let c=parseInt(e.slice(1,4),10),u=await crypto.subtle.importKey("raw",t.subarray(c>>3),"AES-CBC",!1,["decrypt"]),l=await crypto.subtle.importKey("raw",t.subarray(0,c>>3),{hash:`SHA-${c<<1}`,name:"HMAC"},!1,["sign"]),d=ep(a,n,r,eh(a.length<<3)),p=new Uint8Array((await crypto.subtle.sign("HMAC",l,d)).slice(0,c>>3));try{o=await ty(i,p)}catch{}if(!o)throw new eA;try{s=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},u,r))}catch{}if(!s)throw new eA;return s}async function tb(e,t,r,n,i,a){let o;t instanceof Uint8Array?o=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(eQ(t,e,"decrypt"),o=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},o,ep(r,i)))}catch{throw new eA}}async function tw(e,t,r,n,i,a){if(!eO(t)&&!(t instanceof Uint8Array))throw TypeError(eM(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new eS("JWE Initialization Vector missing");if(!i)throw new eS("JWE Authentication Tag missing");switch(eG(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&eX(t,parseInt(e.slice(-3),10)),tm(e,t,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&eX(t,parseInt(e.slice(1,4),10)),tb(e,t,r,n,i,a);default:throw new eE("Unsupported JWE Content Encryption Algorithm")}}async function tg(e,t,r,n){let i=e.slice(0,7),a=await e2(i,r,t,n,new Uint8Array);return{encryptedKey:a.ciphertext,iv:ew(a.iv),tag:ew(a.tag)}}async function t_(e,t,r,n,i){return tw(e.slice(0,7),t,r,n,i,new Uint8Array)}async function tv(e,t,r,n,i={}){let a,o,s;switch(e){case"dir":s=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let c;if(eP(r),!te(r))throw new eE("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:u,apv:l}=i;c=i.epk?await tp(i.epk,e):(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:d,y:p,crv:f,kty:h}=await eJ(c),y=await e7(r,c,"ECDH-ES"===e?t:e,"ECDH-ES"===e?tf(t):parseInt(e.slice(-5,-2),10),u,l);if(o={epk:{x:d,crv:f,kty:h}},"EC"===h&&(o.epk.y=p),u&&(o.apu=ew(u)),l&&(o.apv=ew(l)),"ECDH-ES"===e){s=y;break}s=n||th(t);let m=e.slice(-6);a=await e6(m,y,s);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=n||th(t),eP(r),a=await ts(e,r,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||th(t);let{p2c:c,p2s:u}=i;({encryptedKey:a,...o}=await tn(e,r,s,c,u));break}case"A128KW":case"A192KW":case"A256KW":s=n||th(t),a=await e6(e,r,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||th(t);let{iv:c}=i;({encryptedKey:a,...o}=await tg(e,r,s,c));break}default:throw new eE('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:a,parameters:o}}function tk(...e){let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}function tE(e,t,r,n,i){let a;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let o of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(o))throw new eE(`Extension Header Parameter "${o}" is not recognized`);if(void 0===i[o])throw new e(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&void 0===n[o])throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}let tA=e=>e?.[Symbol.toStringTag],tS=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0},tx=(e,t,r)=>{if(!(t instanceof Uint8Array)){if(eI(t)){if(eW(t)&&tS(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!eU(t))throw TypeError(eN(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${tA(t)} instances for symmetric algorithms must be of type "secret"`)}},tR=(e,t,r)=>{if(eI(t))switch(r){case"decrypt":case"sign":if(eH(t)&&tS(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(eD(t)&&tS(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!eU(t))throw TypeError(eN(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${tA(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${tA(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${tA(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${tA(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${tA(t)} instances for asymmetric algorithm encryption must be of type "public"`)}};function tT(e,t,r){switch(e.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":tx(e,t,r);break;default:tR(e,t,r)}}class tP{#e;#t;#r;#n;#i;#a;#o;#s;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#s)throw TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=e,this}setInitializationVector(e){if(this.#o)throw TypeError("setInitializationVector can only be called once");return this.#o=e,this}async encrypt(e,t){let r,n,i,a,o,s;if(!this.#t&&!this.#n&&!this.#r)throw new eS("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!tk(this.#t,this.#n,this.#r))throw new eS("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let c={...this.#t,...this.#n,...this.#r};if(tE(eS,new Map,t?.crit,this.#t,c),void 0!==c.zip)throw new eE('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:u,enc:l}=c;if("string"!=typeof u||!u)throw new eS('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof l||!l)throw new eS('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#a&&("dir"===u||"ECDH-ES"===u))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${u}`);tT("dir"===u?l:u,e,"encrypt");{let i,a=await tp(e,u);({cek:n,encryptedKey:r,parameters:i}=await tv(u,l,a,this.#a,this.#s)),i&&(t&&ez in t?this.#n?this.#n={...this.#n,...i}:this.setUnprotectedHeader(i):this.#t?this.#t={...this.#t,...i}:this.setProtectedHeader(i))}if(this.#t?o=em(a=ew(JSON.stringify(this.#t))):(a="",o=new Uint8Array),this.#i){let e=em(s=ew(this.#i));i=ep(o,em("."),e)}else i=o;let{ciphertext:d,tag:p,iv:f}=await e2(l,this.#e,n,this.#o,i),h={ciphertext:ew(d)};return f&&(h.iv=ew(f)),p&&(h.tag=ew(p)),r&&(h.encrypted_key=ew(r)),s&&(h.aad=s),this.#t&&(h.protected=a),this.#r&&(h.unprotected=this.#r),this.#n&&(h.header=this.#n),h}}class tO{#c;constructor(e){this.#c=new tP(e)}setContentEncryptionKey(e){return this.#c.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#c.setInitializationVector(e),this}setProtectedHeader(e){return this.#c.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#c.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this.#c.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}let tC=e=>Math.floor(e.getTime()/1e3),tU=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function tj(e){let t,r=tU.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t}function t$(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let tI=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`,tH=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));class tD{#u;constructor(e){if(!e$(e))throw TypeError("JWT Claims Set MUST be an object");this.#u=structuredClone(e)}data(){return el.encode(JSON.stringify(this.#u))}get iss(){return this.#u.iss}set iss(e){this.#u.iss=e}get sub(){return this.#u.sub}set sub(e){this.#u.sub=e}get aud(){return this.#u.aud}set aud(e){this.#u.aud=e}set jti(e){this.#u.jti=e}set nbf(e){"number"==typeof e?this.#u.nbf=t$("setNotBefore",e):e instanceof Date?this.#u.nbf=t$("setNotBefore",tC(e)):this.#u.nbf=tC(new Date)+tj(e)}set exp(e){"number"==typeof e?this.#u.exp=t$("setExpirationTime",e):e instanceof Date?this.#u.exp=t$("setExpirationTime",tC(e)):this.#u.exp=tC(new Date)+tj(e)}set iat(e){void 0===e?this.#u.iat=tC(new Date):e instanceof Date?this.#u.iat=t$("setIssuedAt",tC(e)):"string"==typeof e?this.#u.iat=t$("setIssuedAt",tC(new Date)+tj(e)):this.#u.iat=t$("setIssuedAt",e)}}class tW{#a;#o;#s;#t;#l;#d;#p;#f;constructor(e={}){this.#f=new tD(e)}setIssuer(e){return this.#f.iss=e,this}setSubject(e){return this.#f.sub=e,this}setAudience(e){return this.#f.aud=e,this}setJti(e){return this.#f.jti=e,this}setNotBefore(e){return this.#f.nbf=e,this}setExpirationTime(e){return this.#f.exp=e,this}setIssuedAt(e){return this.#f.iat=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setKeyManagementParameters(e){if(this.#s)throw TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setContentEncryptionKey(e){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=e,this}setInitializationVector(e){if(this.#o)throw TypeError("setInitializationVector can only be called once");return this.#o=e,this}replicateIssuerAsHeader(){return this.#l=!0,this}replicateSubjectAsHeader(){return this.#d=!0,this}replicateAudienceAsHeader(){return this.#p=!0,this}async encrypt(e,t){let r=new tO(this.#f.data());return this.#t&&(this.#l||this.#d||this.#p)&&(this.#t={...this.#t,iss:this.#l?this.#f.iss:void 0,sub:this.#d?this.#f.sub:void 0,aud:this.#p?this.#f.aud:void 0}),r.setProtectedHeader(this.#t),this.#o&&r.setInitializationVector(this.#o),this.#a&&r.setContentEncryptionKey(this.#a),this.#s&&r.setKeyManagementParameters(this.#s),r.encrypt(e,t)}}async function tL(e,t,r){let n;if(!e$(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return eb(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new eE('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return tu({...e,alg:t,ext:n});case"AKP":if("string"!=typeof e.alg||!e.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==t&&t!==e.alg)throw TypeError("JWK alg and alg option value mismatch");return tu({...e,ext:n});case"EC":case"OKP":return tu({...e,alg:t,ext:n});default:throw new eE('Unsupported "kty" (Key Type) Parameter value')}}async function tM(e,t,r,n,i){switch(e){case"dir":if(void 0!==r)throw new eS("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new eS("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,a;if(!e$(n.epk))throw new eS('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(eP(t),!te(t))throw new eE("ECDH with the provided key is not allowed or not supported by your javascript runtime");let o=await tL(n.epk,e);if(eP(o),void 0!==n.apu){if("string"!=typeof n.apu)throw new eS('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=eb(n.apu)}catch{throw new eS("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new eS('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=eb(n.apv)}catch{throw new eS("Failed to base64url decode the apv")}}let s=await e7(o,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?tf(n.enc):parseInt(e.slice(-5,-2),10),i,a);if("ECDH-ES"===e)return s;if(void 0===r)throw new eS("JWE Encrypted Key missing");return e4(e.slice(-6),s,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new eS("JWE Encrypted Key missing");return eP(t),tc(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(void 0===r)throw new eS("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new eS('JOSE Header "p2c" (PBES2 Count) missing or invalid');let o=i?.maxPBES2Count||1e4;if(n.p2c>o)throw new eS('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new eS('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=eb(n.p2s)}catch{throw new eS("Failed to base64url decode the p2s")}return ti(e,t,r,n.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new eS("JWE Encrypted Key missing");return e4(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,a;if(void 0===r)throw new eS("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new eS('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new eS('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=eb(n.iv)}catch{throw new eS("Failed to base64url decode the iv")}try{a=eb(n.tag)}catch{throw new eS("Failed to base64url decode the tag")}return t_(e,t,r,i,a)}default:throw new eE('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function tN(e,t){if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}async function tK(e,t,r){let n,i,a,o,s,c,u;if(!e$(e))throw new eS("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new eS("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new eS("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new eS("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new eS("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new eS("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new eS("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new eS("JWE AAD incorrect type");if(void 0!==e.header&&!e$(e.header))throw new eS("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!e$(e.unprotected))throw new eS("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=eb(e.protected);n=JSON.parse(ed.decode(t))}catch{throw new eS("JWE Protected Header is invalid")}if(!tk(n,e.header,e.unprotected))throw new eS("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let l={...n,...e.header,...e.unprotected};if(tE(eS,new Map,r?.crit,n,l),void 0!==l.zip)throw new eE('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:p}=l;if("string"!=typeof d||!d)throw new eS("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof p||!p)throw new eS("missing JWE Encryption Algorithm (enc) in JWE Header");let f=r&&tN("keyManagementAlgorithms",r.keyManagementAlgorithms),h=r&&tN("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(f&&!f.has(d)||!f&&d.startsWith("PBES2"))throw new ek('"alg" (Algorithm) Header Parameter value not allowed');if(h&&!h.has(p))throw new ek('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=eb(e.encrypted_key)}catch{throw new eS("Failed to base64url decode the encrypted_key")}let y=!1;"function"==typeof t&&(t=await t(n,e),y=!0),tT("dir"===d?p:d,t,"decrypt");let m=await tp(t,d);try{a=await tM(d,m,i,l,r)}catch(e){if(e instanceof TypeError||e instanceof eS||e instanceof eE)throw e;a=th(p)}if(void 0!==e.iv)try{o=eb(e.iv)}catch{throw new eS("Failed to base64url decode the iv")}if(void 0!==e.tag)try{s=eb(e.tag)}catch{throw new eS("Failed to base64url decode the tag")}let b=void 0!==e.protected?em(e.protected):new Uint8Array;c=void 0!==e.aad?ep(b,em("."),em(e.aad)):b;try{u=eb(e.ciphertext)}catch{throw new eS("Failed to base64url decode the ciphertext")}let w={plaintext:await tw(p,a,u,o,s,c)};if(void 0!==e.protected&&(w.protectedHeader=n),void 0!==e.aad)try{w.additionalAuthenticatedData=eb(e.aad)}catch{throw new eS("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(w.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(w.unprotectedHeader=e.header),y)?{...w,key:m}:w}async function tJ(e,t,r){if(e instanceof Uint8Array&&(e=ed.decode(e)),"string"!=typeof e)throw new eS("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:a,3:o,4:s,length:c}=e.split(".");if(5!==c)throw new eS("Invalid Compact JWE");let u=await tK({ciphertext:o,iv:a||void 0,protected:n,tag:s||void 0,encrypted_key:i||void 0},t,r),l={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return"function"==typeof t?{...l,key:u.key}:l}async function tq(e,t,r){let n=await tJ(e,t,r),i=function(e,t,r={}){let n,i;try{n=JSON.parse(ed.decode(t))}catch{}if(!e$(n))throw new ex("JWT Claims Set must be a top-level JSON object");let{typ:a}=r;if(a&&("string"!=typeof e.typ||tI(e.typ)!==tI(a)))throw new e_('unexpected "typ" JWT header value',n,"typ","check_failed");let{requiredClaims:o=[],issuer:s,subject:c,audience:u,maxTokenAge:l}=r,d=[...o];for(let e of(void 0!==l&&d.push("iat"),void 0!==u&&d.push("aud"),void 0!==c&&d.push("sub"),void 0!==s&&d.push("iss"),new Set(d.reverse())))if(!(e in n))throw new e_(`missing required "${e}" claim`,n,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(n.iss))throw new e_('unexpected "iss" claim value',n,"iss","check_failed");if(c&&n.sub!==c)throw new e_('unexpected "sub" claim value',n,"sub","check_failed");if(u&&!tH(n.aud,"string"==typeof u?[u]:u))throw new e_('unexpected "aud" claim value',n,"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=tj(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:p}=r,f=tC(p||new Date);if((void 0!==n.iat||l)&&"number"!=typeof n.iat)throw new e_('"iat" claim must be a number',n,"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new e_('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>f+i)throw new e_('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new e_('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=f-i)throw new ev('"exp" claim timestamp check failed',n,"exp","check_failed")}if(l){let e=f-n.iat;if(e-i>("number"==typeof l?l:tj(l)))throw new ev('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(e<0-i)throw new e_('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n}(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(void 0!==a.iss&&a.iss!==i.iss)throw new e_('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==a.sub&&a.sub!==i.sub)throw new e_('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==a.aud&&JSON.stringify(a.aud)!==JSON.stringify(i.aud))throw new e_('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let o={payload:i,protectedHeader:a};return"function"==typeof t?{...o,key:n.key}:o}let tB=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,tz=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,tF=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,tV=/^[\u0020-\u003A\u003D-\u007E]*$/,tG=Object.prototype.toString,tX=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function tZ(e,t){let r=new tX,n=e.length;if(n<2)return r;let i=t?.decode||t1,a=0;do{let t=e.indexOf("=",a);if(-1===t)break;let o=e.indexOf(";",a),s=-1===o?n:o;if(t>s){a=e.lastIndexOf(";",t-1)+1;continue}let c=tY(e,a,t),u=tQ(e,t,c),l=e.slice(c,u);if(void 0===r[l]){let n=tY(e,t+1,s),a=tQ(e,s,n),o=i(e.slice(n,a));r[l]=o}a=s+1}while(a<n);return r}function tY(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function tQ(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function t0(e,t,r){let n=r?.encode||encodeURIComponent;if(!tB.test(e))throw TypeError(`argument name is invalid: ${e}`);let i=n(t);if(!tz.test(i))throw TypeError(`argument val is invalid: ${t}`);let a=e+"="+i;if(!r)return a;if(void 0!==r.maxAge){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!tF.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!tV.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){var o;if(o=r.expires,"[object Date]"!==tG.call(o)||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function t1(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}let{q:t2}=l,t5=()=>Date.now()/1e3|0,t3="A256CBC-HS512";async function t6(e){let{token:t={},secret:r,maxAge:n=2592e3,salt:i}=e,a=Array.isArray(r)?r:[r],o=await t8(t3,a[0],i),s=await eB({kty:"oct",k:ew(o)},`sha${o.byteLength<<3}`);return await new tW(t).setProtectedHeader({alg:"dir",enc:t3,kid:s}).setIssuedAt().setExpirationTime(t5()+n).setJti(crypto.randomUUID()).encrypt(o)}async function t4(e){let{token:t,secret:r,salt:n}=e,i=Array.isArray(r)?r:[r];if(!t)return null;let{payload:a}=await tq(t,async({kid:e,enc:t})=>{for(let r of i){let i=await t8(t,r,n);if(void 0===e||e===await eB({kty:"oct",k:ew(i)},`sha${i.byteLength<<3}`))return i}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[t3,"A256GCM"]});return a}async function t8(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await ec("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function t9({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,a=n.origin;return t?a=await i.redirect({url:t,baseUrl:n.origin}):r&&(a=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:a,callbackUrlCookie:a!==r?a:void 0}}let t7="\x1b[31m",re="\x1b[0m",rt={error(e){let t=e instanceof y?e.type:e.name;if(console.error(`${t7}[auth][error]${re} ${t}: ${e.message}`),e.cause&&"object"==typeof e.cause&&"err"in e.cause&&e.cause.err instanceof Error){let{err:t,...r}=e.cause;console.error(`${t7}[auth][cause]${re}:`,t.stack),r&&console.error(`${t7}[auth][details]${re}:`,JSON.stringify(r,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){console.warn(`\x1b[33m[auth][warn][${e}]${re}`,"Read more: https://warnings.authjs.dev")},debug(e,t){console.log(`\x1b[90m[auth][debug]:${re} ${e}`,JSON.stringify(t,null,2))}};function rr(e){let t={...rt};return e.debug||(t.debug=()=>{}),e.logger?.error&&(t.error=e.logger.error),e.logger?.warn&&(t.warn=e.logger.warn),e.logger?.debug&&(t.debug=e.logger.debug),e.logger??(e.logger=t),t}let rn=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{q:ri,l:ra}=l;async function ro(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return t?.includes("application/json")?await e.json():t?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}async function rs(e,t){try{if("GET"!==e.method&&"POST"!==e.method)throw new W("Only GET and POST requests are supported");t.basePath??(t.basePath="/auth");let r=new URL(e.url),{action:n,providerId:i}=function(e,t){let r=e.match(RegExp(`^${t}(.+)`));if(null===r)throw new W(`Cannot parse action at ${e}`);let n=r.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(1!==n.length&&2!==n.length)throw new W(`Cannot parse action at ${e}`);let[i,a]=n;if(!rn.includes(i)||a&&!["signin","callback","webauthn-options"].includes(i))throw new W(`Cannot parse action at ${e}`);return{action:i,providerId:"undefined"==a?void 0:a}}(r.pathname,t.basePath);return{url:r,action:n,providerId:i,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await ro(e):void 0,cookies:ri(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(n){let r=rr(t);r.error(n),r.debug("request",e)}}function rc(e){let t=new Headers(e.headers);e.cookies?.forEach(e=>{let{name:r,value:n,options:i}=e,a=ra(r,n,i);t.has("Set-Cookie")?t.append("Set-Cookie",a):t.set("Set-Cookie",a)});let r=e.body;"application/json"===t.get("content-type")?r=JSON.stringify(e.body):"application/x-www-form-urlencoded"===t.get("content-type")&&(r=new URLSearchParams(e.body).toString());let n=new Response(r,{headers:t,status:e.redirect?302:e.status??200});return e.redirect&&n.headers.set("Location",e.redirect),n}async function ru(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("").toString()}function rl(e){let t=e=>("0"+e.toString(16)).slice(-2);return Array.from(crypto.getRandomValues(new Uint8Array(e))).reduce((e,r)=>e+t(r),"")}async function rd({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[i,a]=t.split("|");if(a===await ru(`${i}${e.secret}`))return{csrfTokenVerified:r&&i===n,csrfToken:i}}let i=rl(32),a=await ru(`${i}${e.secret}`);return{cookie:`${i}|${a}`,csrfToken:i}}function rp(e,t){if(!t)throw new J(`CSRF token was missing during an action ${e}`)}function rf(e){return null!==e&&"object"==typeof e}function rh(e,...t){if(!t.length)return e;let r=t.shift();if(rf(e)&&rf(r))for(let t in r)rf(r[t])?(rf(e[t])||(e[t]=Array.isArray(r[t])?[]:{}),rh(e[t],r[t])):void 0!==r[t]&&(e[t]=r[t]);return rh(e,...t)}let ry=Symbol("skip-csrf-check"),rm=Symbol("return-type-raw"),rb=Symbol("custom-fetch"),rw=Symbol("conform-internal"),rg=e=>rv({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),r_=e=>rv({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function rv(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}function rk(e,t){if(!e&&t)return;if("string"==typeof e)return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[t,n]of Object.entries(e.params))"claims"===t&&(n=JSON.stringify(n)),r.searchParams.set(t,String(n));return{url:r,request:e?.request,conform:e?.conform,...e?.clientPrivateKey?{clientPrivateKey:e?.clientPrivateKey}:null}}let rE={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>({user:{name:e.user?.name,email:e.user?.email,image:e.user?.image},expires:e.expires?.toISOString?.()??e.expires}),jwt:({token:e})=>e};async function rA({authOptions:e,providerId:t,action:r,url:n,cookies:i,callbackUrl:a,csrfToken:o,csrfDisabled:s,isPost:c}){var u,l;let d=rr(e),{providers:p,provider:h}=function(e){let{providerId:t,config:r}=e,n=new URL(r.basePath??"/auth",e.url.origin),i=r.providers.map(e=>{let t="function"==typeof e?e():e,{options:i,...a}=t,o=i?.id??a.id,s=rh(a,i,{signinUrl:`${n}/signin/${o}`,callbackUrl:`${n}/callback/${o}`});if("oauth"===t.type||"oidc"===t.type){s.redirectProxyUrl??(s.redirectProxyUrl=i?.redirectProxyUrl??r.redirectProxyUrl);let e=function(e){e.issuer&&(e.wellKnown??(e.wellKnown=`${e.issuer}/.well-known/openid-configuration`));let t=rk(e.authorization,e.issuer);t&&!t.url?.searchParams.has("scope")&&t.url.searchParams.set("scope","openid profile email");let r=rk(e.token,e.issuer),n=rk(e.userinfo,e.issuer),i=e.checks??["pkce"];return e.redirectProxyUrl&&(i.includes("state")||i.push("state"),e.redirectProxyUrl=`${e.redirectProxyUrl}/callback/${e.id}`),{...e,authorization:t,token:r,checks:i,userinfo:n,profile:e.profile??rg,account:e.account??r_}}(s);return e.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete e.redirectProxyUrl,e[rb]??(e[rb]=i?.[rb]),e}return s}),a=i.find(({id:e})=>e===t);if(t&&!a){let e=i.map(e=>e.id).join(", ");throw Error(`Provider with id "${t}" not found. Available providers: [${e}].`)}return{providers:i,provider:a}}({url:n,providerId:t,config:e}),y=!1;if((h?.type==="oauth"||h?.type==="oidc")&&h.redirectProxyUrl)try{y=new URL(h.redirectProxyUrl).origin===n.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${h.redirectProxyUrl}`)}let m={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:h,cookies:rh(f(e.useSecureCookies??"https:"===n.protocol),e.cookies),providers:p,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??2592e3,encode:t6,decode:t4,...e.jwt},events:(u=e.events??{},l=d,Object.keys(u).reduce((e,t)=>(e[t]=async(...e)=>{try{let r=u[t];return await r(...e)}catch(e){l.error(new v(e))}},e),{})),adapter:function(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{t.debug(`adapter_${n}`,{args:r});let i=e[n];return await i(...r)}catch(r){let e=new b(r);throw t.error(e),e}},r),{})}(e.adapter,d),callbacks:{...rE,...e.callbacks},logger:d,callbackUrl:n.origin,isOnRedirectProxy:y,experimental:{...e.experimental}},w=[];if(s)m.csrfTokenVerified=!0;else{let{csrfToken:e,cookie:t,csrfTokenVerified:r}=await rd({options:m,cookieValue:i?.[m.cookies.csrfToken.name],isPost:c,bodyValue:o});m.csrfToken=e,m.csrfTokenVerified=r,t&&w.push({name:m.cookies.csrfToken.name,value:t,options:m.cookies.csrfToken.options})}let{callbackUrl:g,callbackUrlCookie:_}=await t9({options:m,cookieValue:i?.[m.cookies.callbackUrl.name],paramValue:a});return m.callbackUrl=g,_&&w.push({name:m.cookies.callbackUrl.name,value:_,options:m.cookies.callbackUrl.options}),{options:m,cookies:w}}var rS,rx,rR,rT,rP,rO,rC,rU,rj,r$,rI,rH,rD,rW,rL,rM,rN={},rK=[],rJ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,rq=Array.isArray;function rB(e,t){for(var r in t)e[r]=t[r];return e}function rz(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function rF(e,t,r){var n,i,a,o={};for(a in t)"key"==a?n=t[a]:"ref"==a?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?rC.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return rV(e,o,n,i,null)}function rV(e,t,r,n,i){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++rj:i,__i:-1,__u:0};return null==i&&null!=rU.vnode&&rU.vnode(a),a}function rG(e){return e.children}function rX(e,t){this.props=e,this.context=t}function rZ(e,t){if(null==t)return e.__?rZ(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?rZ(e):null}function rY(e){(!e.__d&&(e.__d=!0)&&r$.push(e)&&!rQ.__r++||rI!==rU.debounceRendering)&&((rI=rU.debounceRendering)||rH)(rQ)}function rQ(){var e,t,r,n,i,a,o,s;for(r$.sort(rD);e=r$.shift();)e.__d&&(t=r$.length,n=void 0,a=(i=(r=e).__v).__e,o=[],s=[],r.__P&&((n=rB({},i)).__v=i.__v+1,rU.vnode&&rU.vnode(n),r3(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[a]:null,o,null==a?rZ(i):a,!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,r6(o,n,s),n.__e!=a&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)),r$.length>t&&r$.sort(rD));rQ.__r=0}function r0(e,t,r,n,i,a,o,s,c,u,l){var d,p,f,h,y,m=n&&n.__k||rK,b=t.length;for(r.__d=c,function(e,t,r){var n,i,a,o,s,c=t.length,u=r.length,l=u,d=0;for(e.__k=[],n=0;n<c;n++)null!=(i=t[n])&&"boolean"!=typeof i&&"function"!=typeof i?(o=n+d,(i=e.__k[n]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?rV(null,i,null,null,null):rq(i)?rV(rG,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?rV(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,a=null,-1!==(s=i.__i=function(e,t,r,n){var i=e.key,a=e.type,o=r-1,s=r+1,c=t[r];if(null===c||c&&i==c.key&&a===c.type&&0==(131072&c.__u))return r;if(n>+(null!=c&&0==(131072&c.__u)))for(;o>=0||s<t.length;){if(o>=0){if((c=t[o])&&0==(131072&c.__u)&&i==c.key&&a===c.type)return o;o--}if(s<t.length){if((c=t[s])&&0==(131072&c.__u)&&i==c.key&&a===c.type)return s;s++}}return -1}(i,r,o,l))&&(l--,(a=r[s])&&(a.__u|=131072)),null==a||null===a.__v?(-1==s&&d--,"function"!=typeof i.type&&(i.__u|=65536)):s!==o&&(s==o-1?d--:s==o+1?d++:(s>o?d--:d++,i.__u|=65536))):i=e.__k[n]=null;if(l)for(n=0;n<u;n++)null!=(a=r[n])&&0==(131072&a.__u)&&(a.__e==e.__d&&(e.__d=rZ(a)),function e(t,r,n){var i,a;if(rU.unmount&&rU.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||r4(i,null,r)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){rU.__e(e,r)}i.base=i.__P=null}if(i=t.__k)for(a=0;a<i.length;a++)i[a]&&e(i[a],r,n||"function"!=typeof t.type);n||rz(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(a,a))}(r,t,m),c=r.__d,d=0;d<b;d++)null!=(f=r.__k[d])&&(p=-1===f.__i?rN:m[f.__i]||rN,f.__i=d,r3(e,f,p,i,a,o,s,c,u,l),h=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&r4(p.ref,null,f),l.push(f.ref,f.__c||h,f)),null==y&&null!=h&&(y=h),65536&f.__u||p.__k===f.__k?c=function e(t,r,n){var i,a;if("function"==typeof t.type){for(i=t.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=t,r=e(i[a],r,n));return r}t.__e!=r&&(r&&t.type&&!n.contains(r)&&(r=rZ(t)),n.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType);return r}(f,c,e):"function"==typeof f.type&&void 0!==f.__d?c=f.__d:h&&(c=h.nextSibling),f.__d=void 0,f.__u&=-196609);r.__d=c,r.__e=y}function r1(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||rJ.test(t)?r:r+"px"}function r2(e,t,r,n,i){var a;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||r1(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||r1(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?n?r.u=n.u:(r.u=rW,e.addEventListener(t,a?rM:rL,a)):e.removeEventListener(t,a?rM:rL,a);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function r5(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=rW++;else if(t.t<r.u)return;return r(rU.event?rU.event(t):t)}}}function r3(e,t,r,n,i,a,o,s,c,u){var l,d,p,f,h,y,m,b,w,g,_,v,k,E,A,S,x=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),a=[s=t.__e=r.__e]),(l=rU.__b)&&l(t);e:if("function"==typeof x)try{if(b=t.props,w="prototype"in x&&x.prototype.render,g=(l=x.contextType)&&n[l.__c],_=l?g?g.props.value:l.__:n,r.__c?m=(d=t.__c=r.__c).__=d.__E:(w?t.__c=d=new x(b,_):(t.__c=d=new rX(b,_),d.constructor=x,d.render=r8),g&&g.sub(d),d.props=b,d.state||(d.state={}),d.context=_,d.__n=n,p=d.__d=!0,d.__h=[],d._sb=[]),w&&null==d.__s&&(d.__s=d.state),w&&null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=rB({},d.__s)),rB(d.__s,x.getDerivedStateFromProps(b,d.__s))),f=d.props,h=d.state,d.__v=t,p)w&&null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),w&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(w&&null==x.getDerivedStateFromProps&&b!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,_),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,_)||t.__v===r.__v)){for(t.__v!==r.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),v=0;v<d._sb.length;v++)d.__h.push(d._sb[v]);d._sb=[],d.__h.length&&o.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,_),w&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(f,h,y)})}if(d.context=_,d.props=b,d.__P=e,d.__e=!1,k=rU.__r,E=0,w){for(d.state=d.__s,d.__d=!1,k&&k(t),l=d.render(d.props,d.state,d.context),A=0;A<d._sb.length;A++)d.__h.push(d._sb[A]);d._sb=[]}else do d.__d=!1,k&&k(t),l=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++E<25);d.state=d.__s,null!=d.getChildContext&&(n=rB(rB({},n),d.getChildContext())),w&&!p&&null!=d.getSnapshotBeforeUpdate&&(y=d.getSnapshotBeforeUpdate(f,h)),r0(e,rq(S=null!=l&&l.type===rG&&null==l.key?l.props.children:l)?S:[S],t,r,n,i,a,o,s,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),m&&(d.__E=d.__=null)}catch(e){if(t.__v=null,c||null!=a){for(t.__u|=c?160:128;s&&8===s.nodeType&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else t.__e=r.__e,t.__k=r.__k;rU.__e(e,t,r)}else null==a&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,n,i,a,o,s,c){var u,l,d,p,f,h,y,m=r.props,b=t.props,w=t.type;if("svg"===w?i="http://www.w3.org/2000/svg":"math"===w?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=a){for(u=0;u<a.length;u++)if((f=a[u])&&"setAttribute"in f==!!w&&(w?f.localName===w:3===f.nodeType)){e=f,a[u]=null;break}}if(null==e){if(null===w)return document.createTextNode(b);e=document.createElementNS(i,w,b.is&&b),s&&(rU.__m&&rU.__m(t,a),s=!1),a=null}if(null===w)m===b||s&&e.data===b||(e.data=b);else{if(a=a&&rC.call(e.childNodes),m=r.props||rN,!s&&null!=a)for(m={},u=0;u<e.attributes.length;u++)m[(f=e.attributes[u]).name]=f.value;for(u in m)if(f=m[u],"children"==u);else if("dangerouslySetInnerHTML"==u)d=f;else if(!(u in b)){if("value"==u&&"defaultValue"in b||"checked"==u&&"defaultChecked"in b)continue;r2(e,u,null,f,i)}for(u in b)f=b[u],"children"==u?p=f:"dangerouslySetInnerHTML"==u?l=f:"value"==u?h=f:"checked"==u?y=f:s&&"function"!=typeof f||m[u]===f||r2(e,u,f,m[u],i);if(l)s||d&&(l.__html===d.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),r0(e,rq(p)?p:[p],t,r,n,"foreignObject"===w?"http://www.w3.org/1999/xhtml":i,a,o,a?a[0]:r.__k&&rZ(r,0),s,c),null!=a)for(u=a.length;u--;)rz(a[u]);s||(u="value","progress"===w&&null==h?e.removeAttribute("value"):void 0===h||h===e[u]&&("progress"!==w||h)&&("option"!==w||h===m[u])||r2(e,u,h,m[u],i),u="checked",void 0!==y&&y!==e[u]&&r2(e,u,y,m[u],i))}return e}(r.__e,t,r,n,i,a,o,c,u);(l=rU.diffed)&&l(t)}function r6(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)r4(r[n],r[++n],r[++n]);rU.__c&&rU.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){rU.__e(e,t.__v)}})}function r4(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){rU.__e(e,r)}}function r8(e,t,r){return this.constructor(e,r)}function r9(e,t){var r,n,i,a,o;r=e,rU.__&&rU.__(r,t),i=(n="function"==typeof r9)?null:r9&&r9.__k||t.__k,a=[],o=[],r3(t,r=(!n&&r9||t).__k=rF(rG,null,[r]),i||rN,rN,t.namespaceURI,!n&&r9?[r9]:i?null:t.firstChild?rC.call(t.childNodes):null,a,!n&&r9?r9:i?i.__e:t.firstChild,n,o),r6(a,r,o)}rC=rK.slice,rU={__e:function(e,t,r,n){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},rj=0,rX.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=rB({},this.state),"function"==typeof e&&(e=e(rB({},r),this.props)),e&&rB(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),rY(this))},rX.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),rY(this))},rX.prototype.render=rG,r$=[],rH="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rD=function(e,t){return e.__v.__b-t.__v.__b},rQ.__r=0,rW=0,rL=r5(!1),rM=r5(!0);var r7=/[\s\n\\/='"\0<>]/,ne=/^(xlink|xmlns|xml)([A-Z])/,nt=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,nr=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,nn=new Set(["draggable","spellcheck"]),ni=/["&<]/;function na(e){if(0===e.length||!1===ni.test(e))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var no={},ns=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),nc=/[A-Z]/g;function nu(){this.__d=!0}var nl=null,nd,np,nf,nh,ny={},nm=[],nb=Array.isArray,nw=Object.assign;function ng(e,t){var r,n=e.type,i=!0;return e.__c?(i=!1,(r=e.__c).state=r.__s):r=new n(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,null==r.state&&(r.state=ny),null==r.__s&&(r.__s=r.state),n.getDerivedStateFromProps?r.state=nw({},r.state,n.getDerivedStateFromProps(r.props,r.state)):i&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!i&&r.componentWillUpdate&&r.componentWillUpdate(),nf&&nf(e),r.render(r.props,r.state,t)}var n_=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),nv=/["&<]/,nk=0;function nE(e,t,r,n,i,a){t||(t={});var o,s,c=t;"ref"in t&&(o=t.ref,delete t.ref);var u={type:e,props:c,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--nk,__i:-1,__u:0,__source:i,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===c[s]&&(c[s]=o[s]);return rU.vnode&&rU.vnode(u),u}async function nA(e,t){let r=window.SimpleWebAuthnBrowser;async function n(r){let n=new URL(`${e}/webauthn-options/${t}`);r&&n.searchParams.append("action",r),a().forEach(e=>{n.searchParams.append(e.name,e.value)});let i=await fetch(n);if(!i.ok){console.error("Failed to fetch options",i);return}return i.json()}function i(){let e=`#${t}-form`,r=document.querySelector(e);if(!r)throw Error(`Form '${e}' not found`);return r}function a(){return Array.from(i().querySelectorAll("input[data-form-field]"))}async function o(e,t){let r=i();if(e){let t=document.createElement("input");t.type="hidden",t.name="action",t.value=e,r.appendChild(t)}if(t){let e=document.createElement("input");e.type="hidden",e.name="data",e.value=JSON.stringify(t),r.appendChild(e)}return r.submit()}async function s(e,t){let n=await r.startAuthentication(e,t);return await o("authenticate",n)}async function c(e){a().forEach(e=>{if(e.required&&!e.value)throw Error(`Missing required field: ${e.name}`)});let t=await r.startRegistration(e);return await o("register",t)}async function u(){if(!r.browserSupportsWebAuthnAutofill())return;let e=await n("authenticate");if(!e){console.error("Failed to fetch option for autofill authentication");return}try{await s(e.options,!0)}catch(e){console.error(e)}}(async function(){let e=i();if(!r.browserSupportsWebAuthn()){e.style.display="none";return}e&&e.addEventListener("submit",async e=>{e.preventDefault();let t=await n(void 0);if(!t){console.error("Failed to fetch options for form submission");return}if("authenticate"===t.action)try{await s(t.options,!1)}catch(e){console.error(e)}else if("register"===t.action)try{await c(t.options)}catch(e){console.error(e)}})})(),u()}let nS={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},nx=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function nR({html:e,title:t,status:r,cookies:n,theme:i,headTags:a}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${nx}</style><title>${t}</title>${a??""}</head><body class="__next-auth-theme-${i?.colorScheme??"auto"}"><div class="page">${function(e,t,r){var n=rU.__s;rU.__s=!0,nd=rU.__b,np=rU.diffed,nf=rU.__r,nh=rU.unmount;var i=rF(rG,null);i.__k=[e];try{var a=function e(t,r,n,i,a,o,s){if(null==t||!0===t||!1===t||""===t)return"";var c=typeof t;if("object"!=c)return"function"==c?"":"string"==c?na(t):t+"";if(nb(t)){var u,l="";a.__k=t;for(var d=0;d<t.length;d++){var p=t[d];if(null!=p&&"boolean"!=typeof p){var f,h=e(p,r,n,i,a,o,s);"string"==typeof h?l+=h:(u||(u=[]),l&&u.push(l),l="",nb(h)?(f=u).push.apply(f,h):u.push(h))}}return u?(l&&u.push(l),u):l}if(void 0!==t.constructor)return"";t.__=a,nd&&nd(t);var y=t.type,m=t.props;if("function"==typeof y){var b,w,g,_=r;if(y===rG){if("tpl"in m){for(var v="",k=0;k<m.tpl.length;k++)if(v+=m.tpl[k],m.exprs&&k<m.exprs.length){var E=m.exprs[k];if(null==E)continue;"object"==typeof E&&(void 0===E.constructor||nb(E))?v+=e(E,r,n,i,t,o,s):v+=E}return v}if("UNSTABLE_comment"in m)return"\x3c!--"+na(m.UNSTABLE_comment)+"--\x3e";w=m.children}else{if(null!=(b=y.contextType)){var A=r[b.__c];_=A?A.props.value:b.__}var S=y.prototype&&"function"==typeof y.prototype.render;if(S)w=ng(t,_),g=t.__c;else{t.__c=g={__v:t,context:_,props:t.props,setState:nu,forceUpdate:nu,__d:!0,__h:[]};for(var x=0;g.__d&&x++<25;)g.__d=!1,nf&&nf(t),w=y.call(g,m,_);g.__d=!0}if(null!=g.getChildContext&&(r=nw({},r,g.getChildContext())),S&&rU.errorBoundaries&&(y.getDerivedStateFromError||g.componentDidCatch)){w=null!=w&&w.type===rG&&null==w.key&&null==w.props.tpl?w.props.children:w;try{return e(w,r,n,i,t,o,s)}catch(a){return y.getDerivedStateFromError&&(g.__s=y.getDerivedStateFromError(a)),g.componentDidCatch&&g.componentDidCatch(a,ny),g.__d?(w=ng(t,r),null!=(g=t.__c).getChildContext&&(r=nw({},r,g.getChildContext())),e(w=null!=w&&w.type===rG&&null==w.key&&null==w.props.tpl?w.props.children:w,r,n,i,t,o,s)):""}finally{np&&np(t),t.__=null,nh&&nh(t)}}}w=null!=w&&w.type===rG&&null==w.key&&null==w.props.tpl?w.props.children:w;try{var R=e(w,r,n,i,t,o,s);return np&&np(t),t.__=null,rU.unmount&&rU.unmount(t),R}catch(a){if(!o&&s&&s.onError){var T=s.onError(a,t,function(a){return e(a,r,n,i,t,o,s)});if(void 0!==T)return T;var P=rU.__e;return P&&P(a,t),""}if(!o||!a||"function"!=typeof a.then)throw a;return a.then(function a(){try{return e(w,r,n,i,t,o,s)}catch(c){if(!c||"function"!=typeof c.then)throw c;return c.then(function(){return e(w,r,n,i,t,o,s)},a)}})}}var O,C="<"+y,U="";for(var j in m){var $=m[j];if("function"!=typeof $||"class"===j||"className"===j){switch(j){case"children":O=$;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in m)continue;j="for";break;case"className":if("class"in m)continue;j="class";break;case"defaultChecked":j="checked";break;case"defaultSelected":j="selected";break;case"defaultValue":case"value":switch(j="value",y){case"textarea":O=$;continue;case"select":i=$;continue;case"option":i!=$||"selected"in m||(C+=" selected")}break;case"dangerouslySetInnerHTML":U=$&&$.__html;continue;case"style":"object"==typeof $&&($=function(e){var t="";for(var r in e){var n=e[r];if(null!=n&&""!==n){var i="-"==r[0]?r:no[r]||(no[r]=r.replace(nc,"-$&").toLowerCase()),a=";";"number"!=typeof n||i.startsWith("--")||ns.has(i)||(a="px;"),t=t+i+":"+n+a}}return t||void 0}($));break;case"acceptCharset":j="accept-charset";break;case"httpEquiv":j="http-equiv";break;default:if(ne.test(j))j=j.replace(ne,"$1:$2").toLowerCase();else{if(r7.test(j))continue;("-"===j[4]||nn.has(j))&&null!=$?$+="":n?nr.test(j)&&(j="panose1"===j?"panose-1":j.replace(/([A-Z])/g,"-$1").toLowerCase()):nt.test(j)&&(j=j.toLowerCase())}}null!=$&&!1!==$&&(C=!0===$||""===$?C+" "+j:C+" "+j+'="'+("string"==typeof $?na($):$+"")+'"')}}if(r7.test(y))throw Error(y+" is not a valid HTML tag name in "+C+">");if(U||("string"==typeof O?U=na(O):null!=O&&!1!==O&&!0!==O&&(U=e(O,r,"svg"===y||"foreignObject"!==y&&n,i,t,o,s))),np&&np(t),t.__=null,nh&&nh(t),!U&&n_.has(y))return C+"/>";var I="</"+y+">",H=C+">";return nb(U)?[H].concat(U,[I]):"string"!=typeof U?[H,U,I]:H+U+I}(e,ny,!1,void 0,i,!1,void 0);return nb(a)?a.join(""):a}catch(e){if(e.then)throw Error('Use "renderToStringAsync" for suspenseful rendering.');throw e}finally{rU.__c&&rU.__c(e,nm),rU.__s=n,nm.length=0}}(e)}</div></body></html>`}}function nT(e){let{url:t,theme:r,query:n,cookies:i,pages:a,providers:o}=e;return{csrf:(e,t,r)=>e?(t.logger.warn("csrf-disabled"),r.push({name:t.cookies.csrfToken.name,value:"",options:{...t.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:r}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:t.csrfToken},cookies:r},providers:e=>({headers:{"Content-Type":"application/json"},body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:a})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:a},e),{})}),signin(t,s){if(t)throw new W("Unsupported action");if(a?.signIn){let t=`${a.signIn}${a.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return s&&(t=`${t}&${new URLSearchParams({error:s})}`),{redirect:t,cookies:i}}let c=o?.find(e=>"webauthn"===e.type&&e.enableConditionalUI&&!!e.simpleWebAuthnBrowserVersion),u="";if(c){let{simpleWebAuthnBrowserVersion:e}=c;u=`<script src="https://unpkg.com/@simplewebauthn/browser@${e}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return nR({cookies:i,theme:r,html:function(e){let{csrfToken:t,providers:r=[],callbackUrl:n,theme:i,email:a,error:o}=e;"undefined"!=typeof document&&i?.brandColor&&document.documentElement.style.setProperty("--brand-color",i.brandColor),"undefined"!=typeof document&&i?.buttonText&&document.documentElement.style.setProperty("--button-text-color",i.buttonText);let s=o&&(nS[o]??nS.default),c=r.find(e=>"webauthn"===e.type&&e.enableConditionalUI)?.id;return nE("div",{className:"signin",children:[i?.brandColor&&nE("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${i.brandColor}}`}}),i?.buttonText&&nE("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),nE("div",{className:"card",children:[s&&nE("div",{className:"error",children:nE("p",{children:s})}),i?.logo&&nE("img",{src:i.logo,alt:"Logo",className:"logo"}),r.map((e,i)=>{let o,s,c;("oauth"===e.type||"oidc"===e.type)&&({bg:o="#fff",brandColor:s,logo:c=`https://authjs.dev/img/providers/${e.id}.svg`}=e.style??{});let u=s??o??"#fff";return nE("div",{className:"provider",children:["oauth"===e.type||"oidc"===e.type?nE("form",{action:e.signinUrl,method:"POST",children:[nE("input",{type:"hidden",name:"csrfToken",value:t}),n&&nE("input",{type:"hidden",name:"callbackUrl",value:n}),nE("button",{type:"submit",className:"button",style:{"--provider-brand-color":u},tabIndex:0,children:[nE("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",e.name]}),c&&nE("img",{loading:"lazy",height:24,src:c})]})]}):null,("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i>0&&"email"!==r[i-1].type&&"credentials"!==r[i-1].type&&"webauthn"!==r[i-1].type&&nE("hr",{}),"email"===e.type&&nE("form",{action:e.signinUrl,method:"POST",children:[nE("input",{type:"hidden",name:"csrfToken",value:t}),nE("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`,children:"Email"}),nE("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:a,placeholder:"email@example.com",required:!0}),nE("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"credentials"===e.type&&nE("form",{action:e.callbackUrl,method:"POST",children:[nE("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.credentials).map(t=>nE("div",{children:[nE("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.credentials[t].label??t}),nE("input",{name:t,id:`input-${t}-for-${e.id}-provider`,type:e.credentials[t].type??"text",placeholder:e.credentials[t].placeholder??"",...e.credentials[t]})]},`input-group-${e.id}`)),nE("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"webauthn"===e.type&&nE("form",{action:e.callbackUrl,method:"POST",id:`${e.id}-form`,children:[nE("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.formFields).map(t=>nE("div",{children:[nE("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.formFields[t].label??t}),nE("input",{name:t,"data-form-field":!0,id:`input-${t}-for-${e.id}-provider`,type:e.formFields[t].type??"text",placeholder:e.formFields[t].placeholder??"",...e.formFields[t]})]},`input-group-${e.id}`)),nE("button",{id:`submitButton-${e.id}`,type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i+1<r.length&&nE("hr",{})]},e.id)})]}),c&&nE(rG,{children:nE("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${nA})(authURL, "${c}");
`}})})]})}({csrfToken:e.csrfToken,providers:e.providers?.filter(e=>["email","oauth","oidc"].includes(e.type)||"credentials"===e.type&&e.credentials||"webauthn"===e.type&&e.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:s,...n}),title:"Sign In",headTags:u})},signout:()=>a?.signOut?{redirect:a.signOut,cookies:i}:nR({cookies:i,theme:r,html:function(e){let{url:t,csrfToken:r,theme:n}=e;return nE("div",{className:"signout",children:[n?.brandColor&&nE("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),n?.buttonText&&nE("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),nE("div",{className:"card",children:[n?.logo&&nE("img",{src:n.logo,alt:"Logo",className:"logo"}),nE("h1",{children:"Signout"}),nE("p",{children:"Are you sure you want to sign out?"}),nE("form",{action:t?.toString(),method:"POST",children:[nE("input",{type:"hidden",name:"csrfToken",value:r}),nE("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"}),verifyRequest:e=>a?.verifyRequest?{redirect:`${a.verifyRequest}${t?.search??""}`,cookies:i}:nR({cookies:i,theme:r,html:function(e){let{url:t,theme:r}=e;return nE("div",{className:"verify-request",children:[r.brandColor&&nE("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),nE("div",{className:"card",children:[r.logo&&nE("img",{src:r.logo,alt:"Logo",className:"logo"}),nE("h1",{children:"Check your email"}),nE("p",{children:"A sign in link has been sent to your email address."}),nE("p",{children:nE("a",{className:"site",href:t.origin,children:t.host})})]})]})}({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>a?.error?{redirect:`${a.error}${a.error.includes("?")?"&":"?"}error=${e}`,cookies:i}:nR({cookies:i,theme:r,...function(e){let{url:t,error:r="default",theme:n}=e,i=`${t}/signin`,a={default:{status:200,heading:"Error",message:nE("p",{children:nE("a",{className:"site",href:t?.origin,children:t?.host})})},Configuration:{status:500,heading:"Server error",message:nE("div",{children:[nE("p",{children:"There is a problem with the server configuration."}),nE("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:nE("div",{children:[nE("p",{children:"You do not have permission to sign in."}),nE("p",{children:nE("a",{className:"button",href:i,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:nE("div",{children:[nE("p",{children:"The sign in link is no longer valid."}),nE("p",{children:"It may have been used already or it may have expired."})]}),signin:nE("a",{className:"button",href:i,children:"Sign in"})}},{status:o,heading:s,message:c,signin:u}=a[r]??a.default;return{status:o,html:nE("div",{className:"error",children:[n?.brandColor&&nE("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n?.brandColor}
        }
      `}}),nE("div",{className:"card",children:[n?.logo&&nE("img",{src:n?.logo,alt:"Logo",className:"logo"}),nE("h1",{children:s}),nE("div",{className:"message",children:c}),u]})]})}}({url:t,theme:r,error:e}),title:"Error"})}}function nP(e,t=Date.now()){return new Date(t+1e3*e)}async function nO(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw Error("Provider not supported");let{adapter:i,jwt:a,events:o,session:{strategy:s,generateSessionToken:c}}=n;if(!i)return{user:t,account:r};let u=r,{createUser:l,updateUser:d,getUser:p,getUserByAccount:f,getUserByEmail:h,linkAccount:y,createSession:m,getSessionAndUser:b,deleteSession:w}=i,g=null,_=null,v=!1,k="jwt"===s;if(e)if(k)try{let t=n.cookies.sessionToken.name;(g=await a.decode({...a,token:e,salt:t}))&&"sub"in g&&g.sub&&(_=await p(g.sub))}catch{}else{let t=await b(e);t&&(g=t.session,_=t.user)}if("email"===u.type){let r=await h(t.email);return r?(_?.id!==r.id&&!k&&e&&await w(e),_=await d({id:r.id,emailVerified:new Date}),await o.updateUser?.({user:_})):(_=await l({...t,emailVerified:new Date}),await o.createUser?.({user:_}),v=!0),{session:g=k?{}:await m({sessionToken:c(),userId:_.id,expires:nP(n.session.maxAge)}),user:_,isNewUser:v}}if("webauthn"===u.type){let e=await f({providerAccountId:u.providerAccountId,provider:u.provider});if(e){if(_){if(e.id===_.id){let e={...u,userId:_.id};return{session:g,user:_,isNewUser:v,account:e}}throw new V("The account is already associated with another user",{provider:u.provider})}g=k?{}:await m({sessionToken:c(),userId:e.id,expires:nP(n.session.maxAge)});let t={...u,userId:e.id};return{session:g,user:e,isNewUser:v,account:t}}{if(_){await y({...u,userId:_.id}),await o.linkAccount?.({user:_,account:u,profile:t});let e={...u,userId:_.id};return{session:g,user:_,isNewUser:v,account:e}}if(t.email?await h(t.email):null)throw new V("Another account already exists with the same e-mail address",{provider:u.provider});_=await l({...t}),await o.createUser?.({user:_}),await y({...u,userId:_.id}),await o.linkAccount?.({user:_,account:u,profile:t}),g=k?{}:await m({sessionToken:c(),userId:_.id,expires:nP(n.session.maxAge)});let e={...u,userId:_.id};return{session:g,user:_,isNewUser:!0,account:e}}}let E=await f({providerAccountId:u.providerAccountId,provider:u.provider});if(E){if(_){if(E.id===_.id)return{session:g,user:_,isNewUser:v};throw new C("The account is already associated with another user",{provider:u.provider})}return{session:g=k?{}:await m({sessionToken:c(),userId:E.id,expires:nP(n.session.maxAge)}),user:E,isNewUser:v}}{let{provider:e}=n,{type:r,provider:i,providerAccountId:a,userId:s,...d}=u;if(u=Object.assign(e.account(d)??{},{providerAccountId:a,provider:i,type:r,userId:s}),_)return await y({...u,userId:_.id}),await o.linkAccount?.({user:_,account:u,profile:t}),{session:g,user:_,isNewUser:v};let p=t.email?await h(t.email):null;if(p){let e=n.provider;if(e?.allowDangerousEmailAccountLinking)_=p,v=!1;else throw new C("Another account already exists with the same e-mail address",{provider:u.provider})}else _=await l({...t,emailVerified:null}),v=!0;return await o.createUser?.({user:_}),await y({...u,userId:_.id}),await o.linkAccount?.({user:_,account:u,profile:t}),{session:g=k?{}:await m({sessionToken:c(),userId:_.id,expires:nP(n.session.maxAge)}),user:_,isNewUser:v}}}function nC(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(a="oauth4webapi/v3.8.5");let nU="ERR_INVALID_ARG_VALUE",nj="ERR_INVALID_ARG_TYPE";function n$(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let nI=Symbol(),nH=Symbol(),nD=Symbol(),nW=Symbol(),nL=Symbol(),nM=Symbol(),nN=Symbol(),nK=new TextEncoder,nJ=new TextDecoder;function nq(e){return"string"==typeof e?nK.encode(e):nJ.decode(e)}function nB(e){return"string"==typeof e?s(e):o(e)}o=Uint8Array.prototype.toBase64?e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0})):e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},s=Uint8Array.fromBase64?e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(e){throw n$("The input to be decoded is not correctly encoded.",nU,e)}}:e=>{try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw n$("The input to be decoded is not correctly encoded.",nU,e)}};class nz extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=i6,Error.captureStackTrace?.(this,this.constructor)}}class nF extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,t?.code&&(this.code=t?.code),Error.captureStackTrace?.(this,this.constructor)}}function nV(e,t,r){return new nF(e,{code:t,cause:r})}async function nG(e){let t;switch(e.kty){case"EC":t={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":t={crv:e.crv,kty:e.kty,x:e.x};break;case"AKP":t={alg:e.alg,kty:e.kty,pub:e.pub};break;case"RSA":t={e:e.e,kty:e.kty,n:e.n};break;default:throw new nz("unsupported JWK key type",{cause:e})}return nB(await crypto.subtle.digest("SHA-256",nq(JSON.stringify(t))))}function nX(e,t){if(!(e instanceof CryptoKey))throw n$(`${t} must be a CryptoKey`,nj)}function nZ(e,t){if(nX(e,t),"private"!==e.type)throw n$(`${t} must be a private CryptoKey`,nU)}function nY(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function nQ(e){nC(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e??{});if(a&&!t.has("user-agent")&&t.set("user-agent",a),t.has("authorization"))throw n$('"options.headers" must not include the "authorization" header name',nU);return t}function n0(e,t){if(void 0!==t){if("function"==typeof t&&(t=t(e.href)),!(t instanceof AbortSignal))throw n$('"options.signal" must return or be an instance of AbortSignal',nj);return t}}function n1(e){return e.includes("//")?e.replace("//","/"):e}async function n2(e,t,r,n){if(!(e instanceof URL))throw n$(`"${t}" must be an instance of URL`,nj);ih(e,n?.[nI]!==!0);let i=r(new URL(e.href)),a=nQ(n?.headers);return a.set("accept","application/json"),(n?.[nW]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:n0(i,n?.signal)})}async function n5(e,t){return n2(e,"issuerIdentifier",e=>{switch(t?.algorithm){case void 0:case"oidc":e.pathname=n1(`${e.pathname}/.well-known/openid-configuration`);break;case"oauth2":(function(e,t,r=!1){"/"===e.pathname?e.pathname=t:e.pathname=n1(`${t}/${r?e.pathname:e.pathname.replace(/(\/)$/,"")}`)})(e,".well-known/oauth-authorization-server");break;default:throw n$('"options.algorithm" must be "oidc" (default), or "oauth2"',nU)}return e},t)}function n3(e,t,r,n,i){try{if("number"!=typeof e||!Number.isFinite(e))throw n$(`${r} must be a number`,nj,i);if(e>0)return;if(t){if(0!==e)throw n$(`${r} must be a non-negative number`,nU,i);return}throw n$(`${r} must be a positive number`,nU,i)}catch(e){if(n)throw nV(e.message,n,i);throw e}}function n6(e,t,r,n){try{if("string"!=typeof e)throw n$(`${t} must be a string`,nj,n);if(0===e.length)throw n$(`${t} must not be empty`,nU,n)}catch(e){if(r)throw nV(e.message,r,n);throw e}}async function n4(e,t){if(!(e instanceof URL)&&e!==aU)throw n$('"expectedIssuerIdentifier" must be an instance of URL',nj);if(!nC(t,Response))throw n$('"response" must be an instance of Response',nj);if(200!==t.status)throw nV('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',ar,t);ap(t);let r=await aC(t);if(n6(r.issuer,'"response" body "issuer" property',i7,{body:r}),e!==aU&&new URL(r.issuer).href!==e.href)throw nV('"response" body "issuer" property does not match the expected value',as,{expected:e.href,body:r,attribute:"issuer"});return r}function n8(e){var t=e,r="application/json";if(i$(t)!==r)throw n9(t,r)}function n9(e,...t){let r='"response" content-type must be ';if(t.length>2){let e=t.pop();r+=`${t.join(", ")}, or ${e}`}else 2===t.length?r+=`${t[0]} or ${t[1]}`:r+=t[0];return nV(r,at,e)}function n7(){return nB(crypto.getRandomValues(new Uint8Array(32)))}async function ie(e){return n6(e,"codeVerifier"),nB(await crypto.subtle.digest("SHA-256",nq(e)))}function it(e){switch(e.algorithm.name){case"RSA-PSS":switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new nz("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}return;case"RSASSA-PKCS1-v1_5":switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new nz("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}return;case"ECDSA":switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new nz("unsupported EcKeyAlgorithm namedCurve",{cause:e})}return;case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return e.algorithm.name;case"EdDSA":return"Ed25519";default:throw new nz("unsupported CryptoKey algorithm name",{cause:e})}}function ir(e){let t=e?.[nH];return"number"==typeof t&&Number.isFinite(t)?t:0}function ii(e){let t=e?.[nD];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function ia(){return Math.floor(Date.now()/1e3)}function io(e){if("object"!=typeof e||null===e)throw n$('"as" must be an object',nj);n6(e.issuer,'"as.issuer"')}function is(e){if("object"!=typeof e||null===e)throw n$('"client" must be an object',nj);n6(e.client_id,'"client.client_id"')}function ic(e,t){let r=ia()+ir(t);return{jti:n7(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}async function iu(e,t,r){if(!r.usages.includes("sign"))throw n$('CryptoKey instances used for signing assertions must include "sign" in their "usages"',nU);let n=`${nB(nq(JSON.stringify(e)))}.${nB(nq(JSON.stringify(t)))}`,i=nB(await crypto.subtle.sign(ab(r),r,nq(n)));return`${n}.${i}`}async function il(e,t){let{kty:r,e:n,n:i,x:a,y:o,crv:s,pub:u}=await crypto.subtle.exportKey("jwk",e),l={kty:r,e:n,n:i,x:a,y:o,crv:s,pub:u};return"AKP"===r&&(l.alg=t),c.set(e,l),l}async function id(e,t){return(c||=new WeakMap).get(e)||il(e,t)}let ip=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function ih(e,t){if(t&&"https:"!==e.protocol)throw nV("only requests to HTTPS are allowed",an,e);if("https:"!==e.protocol&&"http:"!==e.protocol)throw nV("only HTTP and HTTPS requests are allowed",ai,e)}function iy(e,t,r,n){let i;if("string"!=typeof e||!(i=ip(e)))throw nV(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,void 0===e?au:al,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return ih(i,n),i}function im(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?iy(e.mtls_endpoint_aliases[t],t,r,n):iy(e[t],t,r,n)}class ib extends Error{cause;code;error;status;error_description;response;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=i3,this.cause=t.cause,this.error=t.cause.error,this.status=t.response.status,this.error_description=t.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:t.response}),Error.captureStackTrace?.(this,this.constructor)}}class iw extends Error{cause;code;error;error_description;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=i4,this.cause=t.cause,this.error=t.cause.get("error"),this.error_description=t.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class ig extends Error{cause;code;response;status;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=i5,this.cause=t.cause,this.status=t.response.status,this.response=t.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let i_="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",iv=RegExp("^[,\\s]*("+i_+")"),ik=RegExp("^[,\\s]*("+i_+')\\s*=\\s*"((?:[^"\\\\]|\\\\[\\s\\S])*)"[,\\s]*(.*)'),iE=RegExp("^[,\\s]*"+("("+i_+")\\s*=\\s*(")+i_+")[,\\s]*(.*)"),iA=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+={0,2})(?:$|[,\\s])(.*)");async function iS(e){if(e.status>399&&e.status<500){ap(e),n8(e);try{let t=await e.clone().json();if(nY(t)&&"string"==typeof t.error&&t.error.length)return t}catch{}}}async function ix(e,t,r){if(e.status!==t){let t;if(iK(e),t=await iS(e))throw await e.body?.cancel(),new ib("server responded with an error in the response body",{cause:t,response:e});throw nV(`"response" is not a conform ${r} response (unexpected HTTP status code)`,ar,e)}}function iR(e){if(!iF.has(e))throw n$('"options.DPoP" is not a valid DPoPHandle',nU)}async function iT(e,t,r,n,i,a){if(n6(e,'"accessToken"'),!(r instanceof URL))throw n$('"url" must be an instance of URL',nj);ih(r,a?.[nI]!==!0),n=nQ(n),a?.DPoP&&(iR(a.DPoP),await a.DPoP.addProof(r,n,t.toUpperCase(),e)),n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${e}`);let o=await (a?.[nW]||fetch)(r.href,{duplex:nC(i,ReadableStream)?"half":void 0,body:i,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:n0(r,a?.signal)});return a?.DPoP?.cacheNonce(o,r),o}async function iP(e,t,r,n){io(e),is(t);let i=im(e,"userinfo_endpoint",t.use_mtls_endpoint_aliases,n?.[nI]!==!0),a=nQ(n?.headers);return t.userinfo_signed_response_alg?a.set("accept","application/jwt"):(a.set("accept","application/json"),a.append("accept","application/jwt")),iT(r,"GET",i,a,null,{...n,[nH]:ir(t)})}function iO(e,t,r,n){(u||=new WeakMap).set(e,{jwks:t,uat:r,get age(){return ia()-this.uat}}),n&&Object.assign(n,{jwks:structuredClone(t),uat:r})}function iC(e,t){u?.delete(e),delete t?.jwks,delete t?.uat}async function iU(e,t,r){var n;let i,a,o,{alg:s,kid:c}=r;if(function(e){if(!ay(e.alg))throw new nz('unsupported JWS "alg" identifier',{cause:{alg:e.alg}})}(r),!u?.has(e)&&!("object"!=typeof(n=t?.[nN])||null===n||!("uat"in n)||"number"!=typeof n.uat||ia()-n.uat>=300)&&"jwks"in n&&nY(n.jwks)&&Array.isArray(n.jwks.keys)&&Array.prototype.every.call(n.jwks.keys,nY)&&iO(e,t?.[nN].jwks,t?.[nN].uat),u?.has(e)){if({jwks:i,age:a}=u.get(e),a>=300)return iC(e,t?.[nN]),iU(e,t,r)}else i=await af(e,t).then(ah),a=0,iO(e,i,ia(),t?.[nN]);switch(s.slice(0,2)){case"RS":case"PS":o="RSA";break;case"ES":o="EC";break;case"Ed":o="OKP";break;case"ML":o="AKP";break;default:throw new nz("unsupported JWS algorithm",{cause:{alg:s}})}let l=i.keys.filter(e=>{if(e.kty!==o||void 0!==c&&c!==e.kid||void 0!==e.alg&&s!==e.alg||void 0!==e.use&&"sig"!==e.use||e.key_ops?.includes("verify")===!1)return!1;switch(!0){case"ES256"===s&&"P-256"!==e.crv:case"ES384"===s&&"P-384"!==e.crv:case"ES512"===s&&"P-521"!==e.crv:case"Ed25519"===s&&"Ed25519"!==e.crv:case"EdDSA"===s&&"Ed25519"!==e.crv:return!1}return!0}),{0:d,length:p}=l;if(!p){if(a>=60)return iC(e,t?.[nN]),iU(e,t,r);throw nV("error when selecting a JWT verification key, no applicable keys found",ac,{header:r,candidates:l,jwks_uri:new URL(e.jwks_uri)})}if(1!==p)throw nV('error when selecting a JWT verification key, multiple applicable keys found, a "kid" JWT Header Parameter is required',ac,{header:r,candidates:l,jwks_uri:new URL(e.jwks_uri)});return aP(s,d)}let ij=Symbol();function i$(e){return e.headers.get("content-type")?.split(";")[0]}async function iI(e,t,r,n,i){let a;if(io(e),is(t),!nC(n,Response))throw n$('"response" must be an instance of Response',nj);if(iK(n),200!==n.status)throw nV('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',ar,n);if(ap(n),"application/jwt"===i$(n)){let{claims:r,jwt:o}=await ag(await n.text(),aA.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported,void 0),ir(t),ii(t),i?.[nM]).then(iJ.bind(void 0,t.client_id)).then(iB.bind(void 0,e));iL.set(n,o),a=r}else{if(t.userinfo_signed_response_alg)throw nV("JWT UserInfo Response expected",i8,n);a=await aC(n)}if(n6(a.sub,'"response" body "sub" property',i7,{body:a}),r===ij);else if(n6(r,'"expectedSubject"'),a.sub!==r)throw nV('unexpected "response" body "sub" property value',as,{expected:r,body:a,attribute:"sub"});return a}async function iH(e,t,r,n,i,a,o){return await r(e,t,i,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(o?.[nW]||fetch)(n.href,{body:i,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:n0(n,o?.signal)})}async function iD(e,t,r,n,i,a){let o=im(e,"token_endpoint",t.use_mtls_endpoint_aliases,a?.[nI]!==!0);i.set("grant_type",n);let s=nQ(a?.headers);s.set("accept","application/json"),a?.DPoP!==void 0&&(iR(a.DPoP),await a.DPoP.addProof(o,s,"POST"));let c=await iH(e,t,r,o,i,s,a);return a?.DPoP?.cacheNonce(c,o),c}let iW=new WeakMap,iL=new WeakMap;function iM(e){if(!e.id_token)return;let t=iW.get(e);if(!t)throw n$('"ref" was already garbage collected or did not resolve from the proper sources',nU);return t}async function iN(e,t,r,n,i,a){if(io(e),is(t),!nC(r,Response))throw n$('"response" must be an instance of Response',nj);await ix(r,200,"Token Endpoint"),ap(r);let o=await aC(r);if(n6(o.access_token,'"response" body "access_token" property',i7,{body:o}),n6(o.token_type,'"response" body "token_type" property',i7,{body:o}),o.token_type=o.token_type.toLowerCase(),void 0!==o.expires_in){let e="number"!=typeof o.expires_in?parseFloat(o.expires_in):o.expires_in;n3(e,!0,'"response" body "expires_in" property',i7,{body:o}),o.expires_in=e}if(void 0!==o.refresh_token&&n6(o.refresh_token,'"response" body "refresh_token" property',i7,{body:o}),void 0!==o.scope&&"string"!=typeof o.scope)throw nV('"response" body "scope" property must be a string',i7,{body:o});if(void 0!==o.id_token){n6(o.id_token,'"response" body "id_token" property',i7,{body:o});let a=["aud","exp","iat","iss","sub"];!0===t.require_auth_time&&a.push("auth_time"),void 0!==t.default_max_age&&(n3(t.default_max_age,!0,'"client.default_max_age"'),a.push("auth_time")),n?.length&&a.push(...n);let{claims:s,jwt:c}=await ag(o.id_token,aA.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),ir(t),ii(t),i).then(iZ.bind(void 0,a)).then(iz.bind(void 0,e)).then(iq.bind(void 0,t.client_id));if(Array.isArray(s.aud)&&1!==s.aud.length){if(void 0===s.azp)throw nV('ID Token "aud" (audience) claim includes additional untrusted audiences',ao,{claims:s,claim:"aud"});if(s.azp!==t.client_id)throw nV('unexpected ID Token "azp" (authorized party) claim value',ao,{expected:t.client_id,claims:s,claim:"azp"})}void 0!==s.auth_time&&n3(s.auth_time,!0,'ID Token "auth_time" (authentication time)',i7,{claims:s}),iL.set(r,c),iW.set(o,s)}if(a?.[o.token_type]!==void 0)a[o.token_type](r,o);else if("dpop"!==o.token_type&&"bearer"!==o.token_type)throw new nz("unsupported `token_type` value",{cause:{body:o}});return o}function iK(e){let t;if(t=function(e){if(!nC(e,Response))throw n$('"response" must be an instance of Response',nj);let t=e.headers.get("www-authenticate");if(null===t)return;let r=[],n=t;for(;n;){let e,t=n.match(iv),i=t?.["1"].toLowerCase();if(!i)return;let a=n.substring(t[0].length);if(a&&!a.match(/^[\s,]/))return;let o=a.match(/^\s+(.*)$/),s=!!o;n=o?o[1]:void 0;let c={};if(s)for(;n;){let r,i;if(t=n.match(ik)){if([,r,i,n]=t,i.includes("\\"))try{i=JSON.parse(`"${i}"`)}catch{}c[r.toLowerCase()]=i;continue}if(t=n.match(iE)){[,r,i,n]=t,c[r.toLowerCase()]=i;continue}if(t=n.match(iA)){if(Object.keys(c).length)break;[,e,n]=t;break}return}else n=a||void 0;let u={scheme:i,parameters:c};e&&(u.token68=e),r.push(u)}if(r.length)return r}(e))throw new ig("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}function iJ(e,t){return void 0!==t.claims.aud?iq(e,t):t}function iq(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw nV('unexpected JWT "aud" (audience) claim value',ao,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw nV('unexpected JWT "aud" (audience) claim value',ao,{expected:e,claims:t.claims,claim:"aud"});return t}function iB(e,t){return void 0!==t.claims.iss?iz(e,t):t}function iz(e,t){let r=e[aj]?.(t)??e.issuer;if(t.claims.iss!==r)throw nV('unexpected JWT "iss" (issuer) claim value',ao,{expected:r,claims:t.claims,claim:"iss"});return t}let iF=new WeakSet,iV=Symbol();async function iG(e,t,r,n,i,a,o){if(io(e),is(t),!iF.has(n))throw n$('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',nU);n6(i,'"redirectUri"');let s=aS(n,"code");if(!s)throw nV('no authorization code in "callbackParameters"',i7);let c=new URLSearchParams(o?.additionalParameters);return c.set("redirect_uri",i),c.set("code",s),a!==iV&&(n6(a,'"codeVerifier"'),c.set("code_verifier",a)),iD(e,t,r,"authorization_code",c,o)}let iX={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function iZ(e,t){for(let r of e)if(void 0===t.claims[r])throw nV(`JWT "${r}" (${iX[r]}) claim missing`,i7,{claims:t.claims});return t}let iY=Symbol(),iQ=Symbol();async function i0(e,t,r,n){return"string"==typeof n?.expectedNonce||"number"==typeof n?.maxAge||n?.requireIdToken?i1(e,t,r,n.expectedNonce,n.maxAge,n[nM],n.recognizedTokenTypes):i2(e,t,r,n?.[nM],n?.recognizedTokenTypes)}async function i1(e,t,r,n,i,a,o){let s=[];switch(n){case void 0:n=iY;break;case iY:break;default:n6(n,'"expectedNonce" argument'),s.push("nonce")}switch(i??=t.default_max_age){case void 0:i=iQ;break;case iQ:break;default:n3(i,!0,'"maxAge" argument'),s.push("auth_time")}let c=await iN(e,t,r,s,a,o);n6(c.id_token,'"response" body "id_token" property',i7,{body:c});let u=iM(c);if(i!==iQ){let e=ia()+ir(t),r=ii(t);if(u.auth_time+i<e-r)throw nV("too much time has elapsed since the last End-User authentication",aa,{claims:u,now:e,tolerance:r,claim:"auth_time"})}if(n===iY){if(void 0!==u.nonce)throw nV('unexpected ID Token "nonce" claim value',ao,{expected:void 0,claims:u,claim:"nonce"})}else if(u.nonce!==n)throw nV('unexpected ID Token "nonce" claim value',ao,{expected:n,claims:u,claim:"nonce"});return c}async function i2(e,t,r,n,i){let a=await iN(e,t,r,void 0,n,i),o=iM(a);if(o){if(void 0!==t.default_max_age){n3(t.default_max_age,!0,'"client.default_max_age"');let e=ia()+ir(t),r=ii(t);if(o.auth_time+t.default_max_age<e-r)throw nV("too much time has elapsed since the last End-User authentication",aa,{claims:o,now:e,tolerance:r,claim:"auth_time"})}if(void 0!==o.nonce)throw nV('unexpected ID Token "nonce" claim value',ao,{expected:void 0,claims:o,claim:"nonce"})}return a}let i5="OAUTH_WWW_AUTHENTICATE_CHALLENGE",i3="OAUTH_RESPONSE_BODY_ERROR",i6="OAUTH_UNSUPPORTED_OPERATION",i4="OAUTH_AUTHORIZATION_RESPONSE_ERROR",i8="OAUTH_JWT_USERINFO_EXPECTED",i9="OAUTH_PARSE_ERROR",i7="OAUTH_INVALID_RESPONSE",ae="OAUTH_INVALID_REQUEST",at="OAUTH_RESPONSE_IS_NOT_JSON",ar="OAUTH_RESPONSE_IS_NOT_CONFORM",an="OAUTH_HTTP_REQUEST_FORBIDDEN",ai="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",aa="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",ao="OAUTH_JWT_CLAIM_COMPARISON_FAILED",as="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",ac="OAUTH_KEY_SELECTION_FAILED",au="OAUTH_MISSING_SERVER_METADATA",al="OAUTH_INVALID_SERVER_METADATA";function ad(e,t){if("string"!=typeof t.header.typ||t.header.typ.toLowerCase().replace(/^application\//,"")!==e)throw nV('unexpected JWT "typ" header parameter value',i7,{header:t.header});return t}function ap(e){if(e.bodyUsed)throw n$('"response" body has been used already',nU)}async function af(e,t){io(e);let r=im(e,"jwks_uri",!1,t?.[nI]!==!0),n=nQ(t?.headers);return n.set("accept","application/json"),n.append("accept","application/jwk-set+json"),(t?.[nW]||fetch)(r.href,{body:void 0,headers:Object.fromEntries(n.entries()),method:"GET",redirect:"manual",signal:n0(r,t?.signal)})}async function ah(e){if(!nC(e,Response))throw n$('"response" must be an instance of Response',nj);if(200!==e.status)throw nV('"response" is not a conform JSON Web Key Set response (unexpected HTTP status code)',ar,e);ap(e);let t=await aC(e,e=>(function(e,...t){if(!t.includes(i$(e)))throw n9(e,...t)})(e,"application/json","application/jwk-set+json"));if(!Array.isArray(t.keys))throw nV('"response" body "keys" property must be an array',i7,{body:t});if(!Array.prototype.every.call(t.keys,nY))throw nV('"response" body "keys" property members must be JWK formatted objects',i7,{body:t});return t}function ay(e){switch(e){case"PS256":case"ES256":case"RS256":case"PS384":case"ES384":case"RS384":case"PS512":case"ES512":case"RS512":case"Ed25519":case"EdDSA":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return!0;default:return!1}}function am(e){let{algorithm:t}=e;if("number"!=typeof t.modulusLength||t.modulusLength<2048)throw new nz(`unsupported ${t.name} modulusLength`,{cause:e})}function ab(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(e){let{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new nz("unsupported ECDSA namedCurve",{cause:e})}}(e)};case"RSA-PSS":switch(am(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new nz("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return am(e),e.algorithm.name;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":case"Ed25519":return e.algorithm.name}throw new nz("unsupported CryptoKey algorithm name",{cause:e})}async function aw(e,t,r,n){let i=nq(`${e}.${t}`),a=ab(r);if(!await crypto.subtle.verify(a,r,n,i))throw nV("JWT signature verification failed",i7,{key:r,data:i,signature:n,algorithm:a})}async function ag(e,t,r,n,i){let a,o,{0:s,1:c,length:u}=e.split(".");if(5===u)if(void 0!==i)e=await i(e),{0:s,1:c,length:u}=e.split(".");else throw new nz("JWE decryption is not configured",{cause:e});if(3!==u)throw nV("Invalid JWT",i7,e);try{a=JSON.parse(nq(nB(s)))}catch(e){throw nV("failed to parse JWT Header body as base64url encoded JSON",i9,e)}if(!nY(a))throw nV("JWT Header must be a top level object",i7,e);if(t(a),void 0!==a.crit)throw new nz('no JWT "crit" header parameter extensions are supported',{cause:{header:a}});try{o=JSON.parse(nq(nB(c)))}catch(e){throw nV("failed to parse JWT Payload body as base64url encoded JSON",i9,e)}if(!nY(o))throw nV("JWT Payload must be a top level object",i7,e);let l=ia()+r;if(void 0!==o.exp){if("number"!=typeof o.exp)throw nV('unexpected JWT "exp" (expiration time) claim type',i7,{claims:o});if(o.exp<=l-n)throw nV('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',aa,{claims:o,now:l,tolerance:n,claim:"exp"})}if(void 0!==o.iat&&"number"!=typeof o.iat)throw nV('unexpected JWT "iat" (issued at) claim type',i7,{claims:o});if(void 0!==o.iss&&"string"!=typeof o.iss)throw nV('unexpected JWT "iss" (issuer) claim type',i7,{claims:o});if(void 0!==o.nbf){if("number"!=typeof o.nbf)throw nV('unexpected JWT "nbf" (not before) claim type',i7,{claims:o});if(o.nbf>l+n)throw nV('unexpected JWT "nbf" (not before) claim value',aa,{claims:o,now:l,tolerance:n,claim:"nbf"})}if(void 0!==o.aud&&"string"!=typeof o.aud&&!Array.isArray(o.aud))throw nV('unexpected JWT "aud" (audience) claim type',i7,{claims:o});return{header:a,claims:o,jwt:e}}async function a_(e,t,r){let n;switch(t.alg){case"RS256":case"PS256":case"ES256":n="SHA-256";break;case"RS384":case"PS384":case"ES384":n="SHA-384";break;case"RS512":case"PS512":case"ES512":case"Ed25519":case"EdDSA":n="SHA-512";break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":n={name:"cSHAKE256",length:512,outputLength:512};break;default:throw new nz(`unsupported JWS algorithm for ${r} calculation`,{cause:{alg:t.alg}})}let i=await crypto.subtle.digest(n,nq(e));return nB(i.slice(0,i.byteLength/2))}async function av(e,t,r,n){return t===await a_(e,r,n)}async function ak(e){if(e.bodyUsed)throw n$("form_post Request instances must contain a readable body",nU,{cause:e});return e.text()}async function aE(e){if("POST"!==e.method)throw n$("form_post responses are expected to use the POST method",nU,{cause:e});if("application/x-www-form-urlencoded"!==i$(e))throw n$("form_post responses are expected to use the application/x-www-form-urlencoded content-type",nU,{cause:e});return ak(e)}function aA(e,t,r,n){if(void 0!==e){if("string"==typeof e?n.alg!==e:!e.includes(n.alg))throw nV('unexpected JWT "alg" header parameter',i7,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw nV('unexpected JWT "alg" header parameter',i7,{header:n,expected:t,reason:"authorization server metadata"});return}if(void 0!==r){if("string"==typeof r?n.alg!==r:"function"==typeof r?!r(n.alg):!r.includes(n.alg))throw nV('unexpected JWT "alg" header parameter',i7,{header:n,expected:r,reason:"default value"});return}throw nV('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function aS(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw nV(`"${t}" parameter must be provided only once`,i7);return r}let ax=Symbol(),aR=Symbol();function aT(e,t,r,n){var i;if(io(e),is(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw n$('"parameters" must be an instance of URLSearchParams, or URL',nj);if(aS(r,"response"))throw nV('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',i7,{parameters:r});let a=aS(r,"iss"),o=aS(r,"state");if(!a&&e.authorization_response_iss_parameter_supported)throw nV('response parameter "iss" (issuer) missing',i7,{parameters:r});if(a&&a!==e.issuer)throw nV('unexpected "iss" (issuer) response parameter value',i7,{expected:e.issuer,parameters:r});switch(n){case void 0:case aR:if(void 0!==o)throw nV('unexpected "state" response parameter encountered',i7,{expected:void 0,parameters:r});break;case ax:break;default:if(n6(n,'"expectedState" argument'),o!==n)throw nV(void 0===o?'response parameter "state" missing':'unexpected "state" response parameter value',i7,{expected:n,parameters:r})}if(aS(r,"error"))throw new iw("authorization response from the server is an error",{cause:r});let s=aS(r,"id_token"),c=aS(r,"token");if(void 0!==s||void 0!==c)throw new nz("implicit and hybrid flows are not supported");return i=new URLSearchParams(r),iF.add(i),i}async function aP(e,t){let{ext:r,key_ops:n,use:i,...a}=t;return crypto.subtle.importKey("jwk",a,function(e){switch(e){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${e.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"EdDSA":return"Ed25519";case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return e;default:throw new nz("unsupported JWS algorithm",{cause:{alg:e}})}}(e),!0,["verify"])}function aO(e){let t=new URL(e);return t.search="",t.hash="",t.href}async function aC(e,t=n8){let r;try{r=await e.json()}catch(r){throw t(e),nV('failed to parse "response" body as JSON',i9,r)}if(!nY(r))throw nV('"response" body must be a top level object',i7,{body:r});return r}let aU=Symbol(),aj=Symbol();async function a$(e,t,r){let{cookies:n,logger:i}=r,a=n[e],o=new Date;o.setTime(o.getTime()+9e5),i.debug(`CREATE_${e.toUpperCase()}`,{name:a.name,payload:t,COOKIE_TTL:900,expires:o});let s=await t6({...r.jwt,maxAge:900,token:{value:t},salt:a.name}),c={...a.options,expires:o};return{name:a.name,value:s,options:c}}async function aI(e,t,r){try{let{logger:n,cookies:i,jwt:a}=r;if(n.debug(`PARSE_${e.toUpperCase()}`,{cookie:t}),!t)throw new S(`${e} cookie was missing`);let o=await t4({...a,token:t,salt:i[e].name});if(o?.value)return o.value;throw Error("Invalid cookie")}catch(t){throw new S(`${e} value could not be parsed`,{cause:t})}}function aH(e,t,r){let{logger:n,cookies:i}=t,a=i[e];n.debug(`CLEAR_${e.toUpperCase()}`,{cookie:a}),r.push({name:a.name,value:"",options:{...i[e].options,maxAge:0}})}function aD(e,t){return async function(r,n,i){let{provider:a,logger:o}=i;if(!a?.checks?.includes(e))return;let s=r?.[i.cookies[t].name];o.debug(`USE_${t.toUpperCase()}`,{value:s});let c=await aI(t,s,i);return aH(t,i,n),c}}let aW={async create(e){let t=n7(),r=await ie(t);return{cookie:await a$("pkceCodeVerifier",t,e),value:r}},use:aD("pkce","pkceCodeVerifier")},aL="encodedState",aM={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new S("State data was provided but the provider is not configured to use state");return}let n={origin:t,random:n7()},i=await t6({secret:e.jwt.secret,token:n,salt:aL,maxAge:900});return{cookie:await a$("state",i,e),value:i}},use:aD("state","state"),async decode(e,t){try{t.logger.debug("DECODE_STATE",{state:e});let r=await t4({secret:t.jwt.secret,token:e,salt:aL});if(r)return r;throw Error("Invalid state")}catch(e){throw new S("State could not be decoded",{cause:e})}}},aN={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=n7();return{cookie:await a$("nonce",t,e),value:t}},use:aD("nonce","nonce")},aK="encodedWebauthnChallenge",aJ={create:async(e,t,r)=>({cookie:await a$("webauthnChallenge",await t6({secret:e.jwt.secret,token:{challenge:t,registerData:r},salt:aK,maxAge:900}),e)}),async use(e,t,r){let n=t?.[e.cookies.webauthnChallenge.name],i=await aI("webauthnChallenge",n,e),a=await t4({secret:e.jwt.secret,token:i,salt:aK});if(aH("webauthnChallenge",e,r),!a)throw new S("WebAuthn challenge was missing");return a}};function aq(e){return encodeURIComponent(e).replace(/%20/g,"+")}async function aB(e,t,r){let n,i,a,{logger:o,provider:s}=r,{token:c,userinfo:u}=s;if(c?.url&&"authjs.dev"!==c.url.host||u?.url&&"authjs.dev"!==u.url.host)n={issuer:s.issuer??"https://authjs.dev",token_endpoint:c?.url.toString(),userinfo_endpoint:u?.url.toString()};else{let e=new URL(s.issuer),t=await n5(e,{[nI]:!0,[nW]:s[rb]});if(!(n=await n4(e,t)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!n.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let l={client_id:s.clientId,...s.client};switch(l.token_endpoint_auth_method){case void 0:case"client_secret_basic":i=(e,t,r,n)=>{n.set("authorization",function(e,t){let r=aq(e),n=aq(t),i=btoa(`${r}:${n}`);return`Basic ${i}`}(s.clientId,s.clientSecret))};break;case"client_secret_post":var d;n6(d=s.clientSecret,'"clientSecret"'),i=(e,t,r,n)=>{r.set("client_id",t.client_id),r.set("client_secret",d)};break;case"client_secret_jwt":i=function(e,t){let r;n6(e,'"clientSecret"');let n=void 0;return async(t,i,a,o)=>{r||=await crypto.subtle.importKey("raw",nq(e),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let s={alg:"HS256"},c=ic(t,i);n?.(s,c);let u=`${nB(nq(JSON.stringify(s)))}.${nB(nq(JSON.stringify(c)))}`,l=await crypto.subtle.sign(r.algorithm,r,nq(u));a.set("client_id",i.client_id),a.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.set("client_assertion",`${u}.${nB(new Uint8Array(l))}`)}}(s.clientSecret);break;case"private_key_jwt":i=function(e,t){var r;let{key:n,kid:i}=(r=e)instanceof CryptoKey?{key:r}:r?.key instanceof CryptoKey?(void 0!==r.kid&&n6(r.kid,'"kid"'),{key:r.key,kid:r.kid}):{};return nZ(n,'"clientPrivateKey.key"'),async(e,r,a,o)=>{let s={alg:it(n),kid:i},c=ic(e,r);t?.[nL]?.(s,c),a.set("client_id",r.client_id),a.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.set("client_assertion",await iu(s,c,n))}}(s.token.clientPrivateKey,{[nL](e,t){t.aud=[n.issuer,n.token_endpoint]}});break;case"none":i=(e,t,r,n)=>{r.set("client_id",t.client_id)};break;default:throw Error("unsupported client authentication method")}let p=[],f=await aM.use(t,p,r);try{a=aT(n,l,new URLSearchParams(e),s.checks.includes("state")?f:ax)}catch(e){if(e instanceof iw){let t={providerId:s.id,...Object.fromEntries(e.cause.entries())};throw o.debug("OAuthCallbackError",t),new U("OAuth Provider returned an error",t)}throw e}let h=await aW.use(t,p,r),y=s.callbackUrl;!r.isOnRedirectProxy&&s.redirectProxyUrl&&(y=s.redirectProxyUrl);let m=await iG(n,l,i,a,y,h??"decoy",{[nI]:!0,[nW]:(...e)=>(s.checks.includes("pkce")||e[1].body.delete("code_verifier"),(s[rb]??fetch)(...e))});s.token?.conform&&(m=await s.token.conform(m.clone())??m);let b={},w="oidc"===s.type;if(s[rw])switch(s.id){case"microsoft-entra-id":case"azure-ad":{let e=await m.clone().json();if(e.error){let t={providerId:s.id,...e};throw new U(`OAuth Provider returned an error: ${e.error}`,t)}let{tid:t}=function(e){let t,r;if("string"!=typeof e)throw new ex("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new ex("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new ex("Invalid JWT");if(!n)throw new ex("JWTs must contain a payload");try{t=eb(n)}catch{throw new ex("Failed to base64url decode the payload")}try{r=JSON.parse(ed.decode(t))}catch{throw new ex("Failed to parse the decoded payload as JSON")}if(!e$(r))throw new ex("Invalid JWT Claims Set");return r}(e.id_token);if("string"==typeof t){let e=n.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",r=new URL(n.issuer.replace(e,t)),i=await n5(r,{[nW]:s[rb]});n=await n4(r,i)}}}let g=await i0(n,l,m,{expectedNonce:await aN.use(t,p,r),requireIdToken:w});if(w){let t=iM(g);if(b=t,s[rw]&&"apple"===s.id)try{b.user=JSON.parse(e?.user)}catch{}if(!1===s.idToken){let e=await iP(n,l,g.access_token,{[nW]:s[rb],[nI]:!0});b=await iI(n,l,t.sub,e)}}else if(u?.request){let e=await u.request({tokens:g,provider:s});e instanceof Object&&(b=e)}else if(u?.url){let e=await iP(n,l,g.access_token,{[nW]:s[rb],[nI]:!0});b=await e.json()}else throw TypeError("No userinfo endpoint configured");return g.expires_in&&(g.expires_at=Math.floor(Date.now()/1e3)+Number(g.expires_in)),{...await az(b,s,g,o),profile:b,cookies:p}}async function az(e,t,r,n){try{let n=await t.profile(e,r);return{user:{...n,id:crypto.randomUUID(),email:n.email?.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:n.id??crypto.randomUUID()}}}catch(r){n.debug("getProfile error details",e),n.error(new j(r,{provider:t.id}))}}async function aF(e,t,r,n){let i=await aY(e,t,r),{cookie:a}=await aJ.create(e,i.challenge,r);return{status:200,cookies:[...n??[],a],body:{action:"register",options:i},headers:{"Content-Type":"application/json"}}}async function aV(e,t,r,n){let i=await aZ(e,t,r),{cookie:a}=await aJ.create(e,i.challenge);return{status:200,cookies:[...n??[],a],body:{action:"authenticate",options:i},headers:{"Content-Type":"application/json"}}}async function aG(e,t,r){let n,{adapter:i,provider:a}=e,o=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!o||"object"!=typeof o||!("id"in o)||"string"!=typeof o.id)throw new y("Invalid WebAuthn Authentication response");let s=a1(a0(o.id)),c=await i.getAuthenticator(s);if(!c)throw new y(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:s})}`);let{challenge:u}=await aJ.use(e,t.cookies,r);try{var l;let r=a.getRelayingParty(e,t);n=await a.simpleWebAuthn.verifyAuthenticationResponse({...a.verifyAuthenticationOptions,expectedChallenge:u,response:o,authenticator:{...l=c,credentialDeviceType:l.credentialDeviceType,transports:a2(l.transports),credentialID:a0(l.credentialID),credentialPublicKey:a0(l.credentialPublicKey)},expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new F(e)}let{verified:d,authenticationInfo:p}=n;if(!d)throw new F("WebAuthn authentication response could not be verified");try{let{newCounter:e}=p;await i.updateAuthenticatorCounter(c.credentialID,e)}catch(e){throw new b(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:s,oldCounter:c.counter,newCounter:p.newCounter})}`,e)}let f=await i.getAccount(c.providerAccountId,a.id);if(!f)throw new y(`WebAuthn account not found in database: ${JSON.stringify({credentialID:s,providerAccountId:c.providerAccountId})}`);let h=await i.getUser(f.userId);if(!h)throw new y(`WebAuthn user not found in database: ${JSON.stringify({credentialID:s,providerAccountId:c.providerAccountId,userID:f.userId})}`);return{account:f,user:h}}async function aX(e,t,r){var n;let i,{provider:a}=e,o=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!o||"object"!=typeof o||!("id"in o)||"string"!=typeof o.id)throw new y("Invalid WebAuthn Registration response");let{challenge:s,registerData:c}=await aJ.use(e,t.cookies,r);if(!c)throw new y("Missing user registration data in WebAuthn challenge cookie");try{let r=a.getRelayingParty(e,t);i=await a.simpleWebAuthn.verifyRegistrationResponse({...a.verifyRegistrationOptions,expectedChallenge:s,response:o,expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new F(e)}if(!i.verified||!i.registrationInfo)throw new F("WebAuthn registration response could not be verified");let u={providerAccountId:a1(i.registrationInfo.credentialID),provider:e.provider.id,type:a.type},l={providerAccountId:u.providerAccountId,counter:i.registrationInfo.counter,credentialID:a1(i.registrationInfo.credentialID),credentialPublicKey:a1(i.registrationInfo.credentialPublicKey),credentialBackedUp:i.registrationInfo.credentialBackedUp,credentialDeviceType:i.registrationInfo.credentialDeviceType,transports:(n=o.response.transports,n?.join(","))};return{user:c,account:u,authenticator:l}}async function aZ(e,t,r){let{provider:n,adapter:i}=e,a=r&&r.id?await i.listAuthenticatorsByUserId(r.id):null,o=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:o.id,allowCredentials:a?.map(e=>({id:a0(e.credentialID),type:"public-key",transports:a2(e.transports)}))})}async function aY(e,t,r){let{provider:n,adapter:i}=e,a=r.id?await i.listAuthenticatorsByUserId(r.id):null,o=rl(32),s=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:o,userName:r.email,userDisplayName:r.name??void 0,rpID:s.id,rpName:s.name,excludeCredentials:a?.map(e=>({id:a0(e.credentialID),type:"public-key",transports:a2(e.transports)}))})}function aQ(e){let{provider:t,adapter:r}=e;if(!r)throw new R("An adapter is required for the WebAuthn provider");if(!t||"webauthn"!==t.type)throw new M("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function a0(e){return new Uint8Array(Buffer.from(e,"base64"))}function a1(e){return Buffer.from(e).toString("base64")}function a2(e){return e?e.split(","):void 0}async function a5(e,t,r,n){if(!t.provider)throw new M("Callback route called without provider");let{query:i,body:a,method:o,headers:s}=e,{provider:c,adapter:u,url:l,callbackUrl:d,pages:p,jwt:f,events:h,callbacks:m,session:{strategy:b,maxAge:w},logger:_}=t,v="jwt"===b;try{if("oauth"===c.type||"oidc"===c.type){let o,s=c.authorization?.url.searchParams.get("response_mode")==="form_post"?a:i;if(t.isOnRedirectProxy&&s?.state){let e=await aM.decode(s.state,t);if(e?.origin&&new URL(e.origin).origin!==t.url.origin){let t=`${e.origin}?${new URLSearchParams(s)}`;return _.debug("Proxy redirecting to",t),{redirect:t,cookies:n}}}let y=await aB(s,e.cookies,t);y.cookies.length&&n.push(...y.cookies),_.debug("authorization result",y);let{user:b,account:g,profile:k}=y;if(!b||!g||!k)return{redirect:`${l}/signin`,cookies:n};if(u){let{getUserByAccount:e}=u;o=await e({providerAccountId:g.providerAccountId,provider:c.id})}let E=await a3({user:o??b,account:g,profile:k},t);if(E)return{redirect:E,cookies:n};let{user:A,session:S,isNewUser:x}=await nO(r.value,b,g,t);if(v){let e={name:A.name,email:A.email,picture:A.image,sub:A.id?.toString()},i=await m.jwt({token:e,user:A,account:g,profile:k,isNewUser:x,trigger:x?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*w);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:S.sessionToken,options:{...t.cookies.sessionToken.options,expires:S.expires}});if(await h.signIn?.({user:A,account:g,profile:k,isNewUser:x}),x&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("email"===c.type){let e=i?.token,a=i?.email;if(!e){let t=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!e}});throw t.name="Configuration",t}let o=c.secret??t.secret,s=await u.useVerificationToken({identifier:a,token:await ru(`${e}${o}`)}),l=!!s,y=l&&s.expires.valueOf()<Date.now();if(!l||y||a&&s.identifier!==a)throw new K({hasInvite:l,expired:y});let{identifier:b}=s,g=await u.getUserByEmail(b)??{id:crypto.randomUUID(),email:b,emailVerified:null},_={providerAccountId:g.email,userId:g.id,type:"email",provider:c.id},k=await a3({user:g,account:_},t);if(k)return{redirect:k,cookies:n};let{user:E,session:A,isNewUser:S}=await nO(r.value,g,_,t);if(v){let e={name:E.name,email:E.email,picture:E.image,sub:E.id?.toString()},i=await m.jwt({token:e,user:E,account:_,isNewUser:S,trigger:S?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*w);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:A.sessionToken,options:{...t.cookies.sessionToken.options,expires:A.expires}});if(await h.signIn?.({user:E,account:_,isNewUser:S}),S&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("credentials"===c.type&&"POST"===o){let e=a??{};Object.entries(i??{}).forEach(([e,t])=>l.searchParams.set(e,t));let u=await c.authorize(e,new Request(l,{headers:s,method:o,body:JSON.stringify(a)}));if(u)u.id=u.id?.toString()??crypto.randomUUID();else throw new E;let p={providerAccountId:u.id,type:"credentials",provider:c.id},y=await a3({user:u,account:p,credentials:e},t);if(y)return{redirect:y,cookies:n};let b={name:u.name,email:u.email,picture:u.image,sub:u.id},g=await m.jwt({token:b,user:u,account:p,isNewUser:!1,trigger:"signIn"});if(null===g)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,i=await f.encode({...f,token:g,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*w);let o=r.chunk(i,{expires:a});n.push(...o)}return await h.signIn?.({user:u,account:p}),{redirect:d,cookies:n}}else if("webauthn"===c.type&&"POST"===o){let i,a,o,s=e.body?.action;if("string"!=typeof s||"authenticate"!==s&&"register"!==s)throw new y("Invalid action parameter");let c=aQ(t);switch(s){case"authenticate":{let t=await aG(c,e,n);i=t.user,a=t.account;break}case"register":{let r=await aX(t,e,n);i=r.user,a=r.account,o=r.authenticator}}await a3({user:i,account:a},t);let{user:u,isNewUser:l,session:b,account:g}=await nO(r.value,i,a,t);if(!g)throw new y("Error creating or finding account");if(o&&u.id&&await c.adapter.createAuthenticator({...o,userId:u.id}),v){let e={name:u.name,email:u.email,picture:u.image,sub:u.id?.toString()},i=await m.jwt({token:e,user:u,account:g,isNewUser:l,trigger:l?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*w);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:b.sessionToken,options:{...t.cookies.sessionToken.options,expires:b.expires}});if(await h.signIn?.({user:u,account:g,isNewUser:l}),l&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}throw new M(`Callback for provider type (${c.type}) is not supported`)}catch(t){if(t instanceof y)throw t;let e=new g(t,{provider:c.id});throw _.debug("callback route error details",{method:o,query:i,body:a}),e}}async function a3(e,t){let r,{signIn:n,redirect:i}=t.callbacks;try{r=await n(e)}catch(e){if(e instanceof y)throw e;throw new w(e)}if(!r)throw new w("AccessDenied");if("string"==typeof r)return await i({url:r,baseUrl:t.url.origin})}async function a6(e,t,r,n,i){let{adapter:a,jwt:o,events:s,callbacks:c,logger:u,session:{strategy:l,maxAge:d}}=e,p={body:null,headers:{"Content-Type":"application/json",...!n&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:r},f=t.value;if(!f)return p;if("jwt"===l){try{let r=e.cookies.sessionToken.name,a=await o.decode({...o,token:f,salt:r});if(!a)throw Error("Invalid JWT");let u=await c.jwt({token:a,...n&&{trigger:"update"},session:i}),l=nP(d);if(null!==u){let e={user:{name:u.name,email:u.email,image:u.picture},expires:l.toISOString()},n=await c.session({session:e,token:u});p.body=n;let i=await o.encode({...o,token:u,salt:r}),a=t.chunk(i,{expires:l});p.cookies?.push(...a),await s.session?.({session:n,token:u})}else p.cookies?.push(...t.clean())}catch(e){u.error(new x(e)),p.cookies?.push(...t.clean())}return p}try{let{getSessionAndUser:r,deleteSession:o,updateSession:u}=a,l=await r(f);if(l&&l.session.expires.valueOf()<Date.now()&&(await o(f),l=null),l){let{user:t,session:r}=l,a=e.session.updateAge,o=r.expires.valueOf()-1e3*d+1e3*a,h=nP(d);o<=Date.now()&&await u({sessionToken:f,expires:h});let y=await c.session({session:{...r,user:t},user:t,newSession:i,...n?{trigger:"update"}:{}});p.body=y,p.cookies?.push({name:e.cookies.sessionToken.name,value:f,options:{...e.cookies.sessionToken.options,expires:h}}),await s.session?.({session:y})}else f&&p.cookies?.push(...t.clean())}catch(e){u.error(new $(e))}return p}async function a4(e,t){let r,n,{logger:i,provider:a}=t,o=a.authorization?.url;if(!o||"authjs.dev"===o.host){let e=new URL(a.issuer),t=await n5(e,{[nW]:a[rb],[nI]:!0}),r=await n4(e,t).catch(t=>{if(!(t instanceof TypeError)||"Invalid URL"!==t.message)throw t;throw TypeError(`Discovery request responded with an invalid issuer. expected: ${e}`)});if(!r.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");o=new URL(r.authorization_endpoint)}let s=o.searchParams,c=a.callbackUrl;!t.isOnRedirectProxy&&a.redirectProxyUrl&&(c=a.redirectProxyUrl,n=a.callbackUrl,i.debug("using redirect proxy",{redirect_uri:c,data:n}));let u=Object.assign({response_type:"code",client_id:a.clientId,redirect_uri:c,...a.authorization?.params},Object.fromEntries(a.authorization?.url.searchParams??[]),e);for(let e in u)s.set(e,u[e]);let l=[];a.authorization?.url.searchParams.get("response_mode")==="form_post"&&(t.cookies.state.options.sameSite="none",t.cookies.state.options.secure=!0,t.cookies.nonce.options.sameSite="none",t.cookies.nonce.options.secure=!0);let d=await aM.create(t,n);if(d&&(s.set("state",d.value),l.push(d.cookie)),a.checks?.includes("pkce"))if(r&&!r.code_challenge_methods_supported?.includes("S256"))"oidc"===a.type&&(a.checks=["nonce"]);else{let{value:e,cookie:r}=await aW.create(t);s.set("code_challenge",e),s.set("code_challenge_method","S256"),l.push(r)}let p=await aN.create(t);return p&&(s.set("nonce",p.value),l.push(p.cookie)),"oidc"!==a.type||o.searchParams.has("scope")||o.searchParams.set("scope","openid profile email"),i.debug("authorization url is ready",{url:o,cookies:l,provider:a}),{redirect:o.toString(),cookies:l}}async function a8(e,t){let r,{body:n}=e,{provider:i,callbacks:a,adapter:o}=t,s=(i.normalizeIdentifier??function(e){if(!e)throw Error("Missing email from request body.");let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`})(n?.email),c={id:crypto.randomUUID(),email:s,emailVerified:null},u=await o.getUserByEmail(s)??c,l={providerAccountId:s,userId:u.id,type:"email",provider:i.id};try{r=await a.signIn({user:u,account:l,email:{verificationRequest:!0}})}catch(e){throw new w(e)}if(!r)throw new w("AccessDenied");if("string"==typeof r)return{redirect:await a.redirect({url:r,baseUrl:t.url.origin})};let{callbackUrl:d,theme:p}=t,f=await i.generateVerificationToken?.()??rl(32),h=new Date(Date.now()+(i.maxAge??86400)*1e3),y=i.secret??t.secret,m=new URL(t.basePath,t.url.origin),b=i.sendVerificationRequest({identifier:s,token:f,expires:h,url:`${m}/callback/${i.id}?${new URLSearchParams({callbackUrl:d,token:f,email:s})}`,provider:i,theme:p,request:new Request(e.url,{headers:e.headers,method:e.method,body:"POST"===e.method?JSON.stringify(e.body??{}):void 0})}),g=o.createVerificationToken?.({identifier:s,token:await ru(`${f}${y}`),expires:h});return await Promise.all([b,g]),{redirect:`${m}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}}async function a9(e,t,r){let n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{let{redirect:n,cookies:i}=await a4(e.query,r);return i&&t.push(...i),{redirect:n,cookies:t}}case"email":return{...await a8(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function a7(e,t,r){let{jwt:n,events:i,callbackUrl:a,logger:o,session:s}=r,c=t.value;if(!c)return{redirect:a,cookies:e};try{if("jwt"===s.strategy){let e=r.cookies.sessionToken.name,t=await n.decode({...n,token:c,salt:e});await i.signOut?.({token:t})}else{let e=await r.adapter?.deleteSession(c);await i.signOut?.({session:e})}}catch(e){o.error(new D(e))}return e.push(...t.clean()),{redirect:a,cookies:e}}async function oe(e,t){let{adapter:r,jwt:n,session:{strategy:i}}=e,a=t.value;if(!a)return null;if("jwt"===i){let t=e.cookies.sessionToken.name,r=await n.decode({...n,token:a,salt:t});if(r&&r.sub)return{id:r.sub,name:r.name,email:r.email,image:r.picture}}else{let e=await r?.getSessionAndUser(a);if(e)return e.user}return null}async function ot(e,t,r,n){let i=aQ(t),{provider:a}=i,{action:o}=e.query??{};if("register"!==o&&"authenticate"!==o&&void 0!==o)return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};let s=await oe(t,r),c=s?{user:s,exists:!0}:await a.getUserInfo(t,e),u=c?.user;switch(function(e,t,r){let{user:n,exists:i=!1}=r??{};switch(e){case"authenticate":return"authenticate";case"register":if(n&&t===i)return"register";break;case void 0:if(!t)if(!n)return"authenticate";else if(i)return"authenticate";else return"register"}return null}(o,!!s,c)){case"authenticate":return aV(i,e,u,n);case"register":if("string"==typeof u?.email)return aF(i,e,u,n);break;default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function or(e,t){let{action:r,providerId:n,error:i,method:a}=e,o=t.skipCSRFCheck===ry,{options:s,cookies:c}=await rA({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:"POST"===a,csrfDisabled:o}),u=new h(s.cookies.sessionToken,e.cookies,s.logger);if("GET"===a){let t=nT({...s,query:e.query,cookies:c});switch(r){case"callback":return await a5(e,s,u,c);case"csrf":return t.csrf(o,s,c);case"error":return t.error(i);case"providers":return t.providers(s.providers);case"session":return await a6(s,u,c);case"signin":return t.signin(n,i);case"signout":return t.signout();case"verify-request":return t.verifyRequest();case"webauthn-options":return await ot(e,s,u,c)}}else{let{csrfTokenVerified:t}=s;switch(r){case"callback":return"credentials"===s.provider.type&&rp(r,t),await a5(e,s,u,c);case"session":return rp(r,t),await a6(s,u,c,!0,e.body?.data);case"signin":return rp(r,t),await a9(e,c,s);case"signout":return rp(r,t),await a7(c,u,s)}}throw new W(`Cannot handle action: ${r}`)}function on(e,t,r,n,i){let a,o=i?.basePath,s=n.AUTH_URL??n.NEXTAUTH_URL;if(s)a=new URL(s),o&&"/"!==o&&"/"!==a.pathname&&(a.pathname!==o&&rr(i).warn("env-url-basepath-mismatch"),a.pathname="/");else{let e=r.get("x-forwarded-host")??r.get("host"),n=r.get("x-forwarded-proto")??t??"https",i=n.endsWith(":")?n:n+":";a=new URL(`${i}//${e}`)}let c=a.toString().replace(/\/$/,"");if(o){let t=o?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${c}/${t}/${e}`)}return new URL(`${c}/${e}`)}async function oi(e,t){let r=rr(t),n=await rs(e,t);if(!n)return Response.json("Bad request.",{status:400});let i=function(e,t){let{url:r}=e,n=[];if(!X&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new N(`Host must be trusted. URL was: ${e.url}`);if(!t.secret?.length)return new O("Please define a `secret`");let i=e.query?.callbackUrl;if(i&&!Z(i,r.origin))return new k(`Invalid callback URL. Received: ${i}`);let{callbackUrl:a}=f(t.useSecureCookies??"https:"===r.protocol),o=e.cookies?.[t.cookies?.callbackUrl?.name??a.name];if(o&&!Z(o,r.origin))return new k(`Invalid callback URL. Received: ${o}`);let s=!1;for(let e of t.providers){let t="function"==typeof e?e():e;if(("oauth"===t.type||"oidc"===t.type)&&!(t.issuer??t.options?.issuer)){let e,{authorization:r,token:n,userinfo:i}=t;if("string"==typeof r||r?.url?"string"==typeof n||n?.url?"string"==typeof i||i?.url||(e="userinfo"):e="token":e="authorization",e)return new A(`Provider "${t.id}" is missing both \`issuer\` and \`${e}\` endpoint config. At least one of them is required`)}if("credentials"===t.type)Y=!0;else if("email"===t.type)Q=!0;else if("webauthn"===t.type){var c;if(ee=!0,t.simpleWebAuthnBrowserVersion&&(c=t.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(c)))return new y(`Invalid provider config for "${t.id}": simpleWebAuthnBrowserVersion "${t.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(t.enableConditionalUI){if(s)return new B("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(s=!0,!Object.values(t.formFields).some(e=>e.autocomplete&&e.autocomplete.toString().indexOf("webauthn")>-1))return new z(`Provider "${t.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(Y){let e=t.session?.strategy==="database",r=!t.providers.some(e=>"credentials"!==("function"==typeof e?e():e).type);if(e&&r)return new L("Signing in with credentials only supported if JWT strategy is enabled");if(t.providers.some(e=>{let t="function"==typeof e?e():e;return"credentials"===t.type&&!t.authorize}))return new P("Must define an authorize() handler to use credentials authentication provider")}let{adapter:u,session:l}=t,d=[];if(Q||l?.strategy==="database"||!l?.strategy&&u)if(Q){if(!u)return new R("Email login requires an adapter");d.push(...et)}else{if(!u)return new R("Database session requires an adapter");d.push(...er)}if(ee){if(!t.experimental?.enableWebAuthn)return new G("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(n.push("experimental-webauthn"),!u)return new R("WebAuthn requires an adapter");d.push(...en)}if(u){let e=d.filter(e=>!(e in u));if(e.length)return new T(`Required adapter methods were missing: ${e.join(", ")}`)}return X||(X=!0),n}(n,t);if(Array.isArray(i))i.forEach(r.warn);else if(i){if(r.error(i),!new Set(["signin","signout","error","verify-request"]).has(n.action)||"GET"!==n.method)return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:e,theme:a}=t,o=e?.error&&n.url.searchParams.get("callbackUrl")?.startsWith(e.error);if(!e?.error||o)return o&&r.error(new _(`The error page ${e?.error} should not require authentication`)),rc(nT({theme:a}).error("Configuration"));let s=`${n.url.origin}${e.error}?error=Configuration`;return Response.redirect(s)}let a=e.headers?.has("X-Auth-Return-Redirect"),o=t.raw===rm;try{let e=await or(n,t);if(o)return e;let r=rc(e),i=r.headers.get("Location");if(!a||!i)return r;return Response.json({url:i},{headers:r.headers})}catch(d){r.error(d);let i=d instanceof y;if(i&&o&&!a)throw d;if("POST"===e.method&&"session"===n.action)return Response.json(null,{status:400});let s=new URLSearchParams({error:d instanceof y&&q.has(d.type)?d.type:"Configuration"});d instanceof E&&s.set("code",d.code);let c=i&&d.kind||"error",u=t.pages?.[c]??`${t.basePath}/${c.toLowerCase()}`,l=`${n.url.origin}${u}?${s}`;if(a)return Response.json({url:l});return Response.redirect(l)}}var oa=r(23794);function oo(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let{origin:r}=new URL(t),{href:n,origin:i}=e.nextUrl;return new oa.NextRequest(n.replace(i,r),e)}function os(e){try{e.secret??(e.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return;let{pathname:r}=new URL(t);if("/"===r)return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),function(e,t,r=!1){try{let n=e.AUTH_URL;n&&(t.basePath?r||rr(t).warn("env-url-basepath-redundant"):t.basePath=new URL(n).pathname)}catch{}finally{t.basePath??(t.basePath="/auth")}if(!t.secret?.length){t.secret=[];let r=e.AUTH_SECRET;for(let n of(r&&t.secret.push(r),[1,2,3])){let r=e[`AUTH_SECRET_${n}`];r&&t.secret.unshift(r)}}t.redirectProxyUrl??(t.redirectProxyUrl=e.AUTH_REDIRECT_PROXY_URL),t.trustHost??(t.trustHost=!!(e.AUTH_URL??e.AUTH_TRUST_HOST??e.VERCEL??e.CF_PAGES??"production"!==e.NODE_ENV)),t.providers=t.providers.map(t=>{let{id:r}="function"==typeof t?t({}):t,n=r.toUpperCase().replace(/-/g,"_"),i=e[`AUTH_${n}_ID`],a=e[`AUTH_${n}_SECRET`],o=e[`AUTH_${n}_ISSUER`],s=e[`AUTH_${n}_KEY`],c="function"==typeof t?t({clientId:i,clientSecret:a,issuer:o,apiKey:s}):t;return"oauth"===c.type||"oidc"===c.type?(c.clientId??(c.clientId=i),c.clientSecret??(c.clientSecret=a),c.issuer??(c.issuer=o)):"email"===c.type&&(c.apiKey??(c.apiKey=s)),c})}(process.env,e,!0)}}var oc=r(23874),ou=r(79097);async function ol(e,t){return oi(new Request(on("session",e.get("x-forwarded-proto"),e,process.env,t),{headers:{cookie:e.get("cookie")??""}}),{...t,callbacks:{...t.callbacks,async session(...e){let r=await t.callbacks?.session?.(...e)??{...e[0].session,expires:e[0].session.expires?.toISOString?.()??e[0].session.expires};return{user:e[0].user??e[0].token,...r}}}})}function od(e){return"function"==typeof e}function op(e,t){return"function"==typeof e?async(...r)=>{if(!r.length){let r=await (0,ou.b)(),n=await e(void 0);return t?.(n),ol(r,n).then(e=>e.json())}if(r[0]instanceof Request){let n=r[0],i=r[1],a=await e(n);return t?.(a),of([n,i],a)}if(od(r[0])){let n=r[0];return async(...r)=>{let i=await e(r[0]);return t?.(i),of(r,i,n)}}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1],a=await e(n);return t?.(a),ol(new Headers(n.headers),a).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",t):i.appendHeader("set-cookie",t);return t})}:(...t)=>{if(!t.length)return Promise.resolve((0,ou.b)()).then(t=>ol(t,e).then(e=>e.json()));if(t[0]instanceof Request)return of([t[0],t[1]],e);if(od(t[0])){let r=t[0];return async(...t)=>of(t,e,r).then(e=>e)}let r="req"in t[0]?t[0].req:t[0],n="res"in t[0]?t[0].res:t[1];return ol(new Headers(r.headers),e).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in n?n.headers.append("set-cookie",t):n.appendHeader("set-cookie",t);return t})}}async function of(e,t,r){let n=oo(e[0]),i=await ol(n.headers,t),a=await i.json(),o=!0;t.callbacks?.authorized&&(o=await t.callbacks.authorized({request:n,auth:a}));let s=oa.NextResponse.next?.();if(o instanceof Response){s=o;let e=o.headers.get("Location"),{pathname:r}=n.nextUrl;e&&function(e,t,r){let n=t.replace(`${e}/`,""),i=Object.values(r.pages??{});return(oh.has(n)||i.includes(t))&&t===e}(r,new URL(e).pathname,t)&&(o=!0)}else if(r)n.auth=a,s=await r(n,e[1])??oa.NextResponse.next();else if(!o){let e=t.pages?.signIn??`${t.basePath}/signin`;if(n.nextUrl.pathname!==e){let t=n.nextUrl.clone();t.pathname=e,t.searchParams.set("callbackUrl",n.nextUrl.href),s=oa.NextResponse.redirect(t)}}let c=new Response(s?.body,s);for(let e of i.headers.getSetCookie())c.headers.append("set-cookie",e);return c}r(3582);let oh=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var oy=r(64665);async function om(e,t={},r,n){let i=new Headers(await (0,ou.b)()),{redirect:a=!0,redirectTo:o,...s}=t instanceof FormData?Object.fromEntries(t):t,c=o?.toString()??i.get("Referer")??"/",u=on("signin",i.get("x-forwarded-proto"),i,process.env,n);if(!e)return u.searchParams.append("callbackUrl",c),a&&(0,oy.redirect)(u.toString()),u.toString();let l=`${u}/${e}?${new URLSearchParams(r)}`,d={};for(let t of n.providers){let{options:r,...n}="function"==typeof t?t():t,i=r?.id??n.id;if(i===e){d={id:i,type:r?.type??n.type};break}}if(!d.id){let e=`${u}?${new URLSearchParams({callbackUrl:c})}`;return a&&(0,oy.redirect)(e),e}"credentials"===d.type&&(l=l.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let p=new Request(l,{method:"POST",headers:i,body:new URLSearchParams({...s,callbackUrl:c})}),f=await oi(p,{...n,raw:rm,skipCSRFCheck:ry}),h=await (0,oc.U)();for(let e of f?.cookies??[])h.set(e.name,e.value,e.options);let y=(f instanceof Response?f.headers.get("Location"):f.redirect)??l;return a?(0,oy.redirect)(y):y}async function ob(e,t){let r=new Headers(await (0,ou.b)());r.set("Content-Type","application/x-www-form-urlencoded");let n=on("signout",r.get("x-forwarded-proto"),r,process.env,t),i=new URLSearchParams({callbackUrl:e?.redirectTo??r.get("Referer")??"/"}),a=new Request(n,{method:"POST",headers:r,body:i}),o=await oi(a,{...t,raw:rm,skipCSRFCheck:ry}),s=await (0,oc.U)();for(let e of o?.cookies??[])s.set(e.name,e.value,e.options);return e?.redirect??!0?(0,oy.redirect)(o.redirect):o}async function ow(e,t){let r=new Headers(await (0,ou.b)());r.set("Content-Type","application/json");let n=new Request(on("session",r.get("x-forwarded-proto"),r,process.env,t),{method:"POST",headers:r,body:JSON.stringify({data:e})}),i=await oi(n,{...t,raw:rm,skipCSRFCheck:ry}),a=await (0,oc.U)();for(let e of i?.cookies??[])a.set(e.name,e.value,e.options);return i.body}function og(e){if("function"==typeof e){let t=async t=>{let r=await e(t);return os(r),oi(oo(t),r)};return{handlers:{GET:t,POST:t},auth:op(e,e=>os(e)),signIn:async(t,r,n)=>{let i=await e(void 0);return os(i),om(t,r,n,i)},signOut:async t=>{let r=await e(void 0);return os(r),ob(t,r)},unstable_update:async t=>{let r=await e(void 0);return os(r),ow(t,r)}}}os(e);let t=t=>oi(oo(t),e);return{handlers:{GET:t,POST:t},auth:op(e),signIn:(t,r,n)=>om(t,r,n,e),signOut:t=>ob(t,e),unstable_update:t=>ow(t,e)}}},59311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{REDIRECT_ERROR_CODE:function(){return i},RedirectType:function(){return a},isRedirectError:function(){return o}});let n=r(18389),i="NEXT_REDIRECT";var a=function(e){return e.push="push",e.replace="replace",e}({});function o(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,a]=t,o=t.slice(2,-2).join(";"),s=Number(t.at(-2));return r===i&&("replace"===a||"push"===a)&&"string"==typeof o&&!isNaN(s)&&s in n.RedirectStatusCode}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},61096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rootParams",{enumerable:!0,get:function(){return l}});let n=r(23302),i=r(75124),a=r(29294),o=r(63033),s=r(37461),c=r(51078),u=new WeakMap;async function l(){let e=a.workAsyncStorage.getStore();if(!e)throw Object.defineProperty(new n.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});let t=o.workUnitAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error(`Route ${e.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(t.type){case"unstable-cache":case"cache":throw Object.defineProperty(Error(`Route ${e.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-ppr":case"prerender-legacy":return function(e,t,r){let n=t.fallbackRouteParams;if(n){let p=!1;for(let t in e)if(n.has(t)){p=!0;break}if(p){if("prerender"===r.type){let t=u.get(e);if(t)return t;let n=(0,s.makeHangingPromise)(r.renderSignal,"`unstable_rootParams`");return u.set(e,n),n}var a=e,o=n,l=t,d=r;let p=u.get(a);if(p)return p;let f={...a},h=Promise.resolve(f);return u.set(a,h),Object.keys(a).forEach(e=>{c.wellKnownProperties.has(e)||(o.has(e)?Object.defineProperty(f,e,{get(){let t=(0,c.describeStringPropertyAccess)("unstable_rootParams",e);"prerender-ppr"===d.type?(0,i.postponeWithTracking)(l.route,t,d.dynamicTracking):(0,i.throwToInterruptStaticGeneration)(t,l,d)},enumerable:!0}):h[e]=a[e])}),h}}return Promise.resolve(e)}(t.rootParams,e,t);default:return Promise.resolve(t.rootParams)}}},61794:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let r=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},64043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isBot:function(){return i},userAgent:function(){return o},userAgentFromString:function(){return a}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(12130));function i(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function a(e){return{...(0,n.default)(e),isBot:void 0!==e&&i(e)}}function o({headers:e}){return a(e.get("user-agent")||void 0)}},64665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return l},RedirectType:function(){return i.RedirectType},forbidden:function(){return o.forbidden},notFound:function(){return a.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return s.unauthorized},unstable_rethrow:function(){return c.unstable_rethrow}});let n=r(68022),i=r(59311),a=r(86834),o=r(91777),s=r(24796),c=r(81452);class u extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class l extends URLSearchParams{append(){throw new u}delete(){throw new u}set(){throw new u}sort(){throw new u}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},68022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return l},getURLFromRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return s}});let n=r(18389),i=r(59311),a=r(19121).actionAsyncStorage;function o(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let a=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a.digest=i.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",a}function s(e,t){var r;throw null!=t||(t=(null==a?void 0:null==(r=a.getStore())?void 0:r.isAction)?i.RedirectType.push:i.RedirectType.replace),o(e,t,n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){throw void 0===t&&(t=i.RedirectType.replace),o(e,t,n.RedirectStatusCode.PermanentRedirect)}function u(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function l(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function d(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},70388:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"URLPattern",{enumerable:!0,get:function(){return r}});let r="undefined"==typeof URLPattern?void 0:URLPattern},71356:(e,t,r)=>{"use strict";function n(e){return{createUser:({id:t,...r})=>e.user.create(i(r)),getUser:t=>e.user.findUnique({where:{id:t}}),getUserByEmail:t=>e.user.findUnique({where:{email:t}}),async getUserByAccount(t){let r=await e.account.findUnique({where:{provider_providerAccountId:t},include:{user:!0}});return r?.user??null},updateUser:({id:t,...r})=>e.user.update({where:{id:t},...i(r)}),deleteUser:t=>e.user.delete({where:{id:t}}),linkAccount:t=>e.account.create({data:t}),unlinkAccount:t=>e.account.delete({where:{provider_providerAccountId:t}}),async getSessionAndUser(t){let r=await e.session.findUnique({where:{sessionToken:t},include:{user:!0}});if(!r)return null;let{user:n,...i}=r;return{user:n,session:i}},createSession:t=>e.session.create(i(t)),updateSession:t=>e.session.update({where:{sessionToken:t.sessionToken},...i(t)}),deleteSession:t=>e.session.delete({where:{sessionToken:t}}),async createVerificationToken(t){let r=await e.verificationToken.create(i(t));return"id"in r&&r.id&&delete r.id,r},async useVerificationToken(t){try{let r=await e.verificationToken.delete({where:{identifier_token:t}});return"id"in r&&r.id&&delete r.id,r}catch(e){if(e&&"object"==typeof e&&"code"in e&&"P2025"===e.code)return null;throw e}},getAccount:async(t,r)=>e.account.findFirst({where:{providerAccountId:t,provider:r}}),createAuthenticator:async t=>e.authenticator.create(i(t)),getAuthenticator:async t=>e.authenticator.findUnique({where:{credentialID:t}}),listAuthenticatorsByUserId:async t=>e.authenticator.findMany({where:{userId:t}}),updateAuthenticatorCounter:async(t,r)=>e.authenticator.update({where:{credentialID:t},data:{counter:r}})}}function i(e){let t={};for(let r in e)void 0!==e[r]&&(t[r]=e[r]);return{data:t}}r.d(t,{y:()=>n})},75659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(7153));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}let a={current:null},o="function"==typeof n.cache?n.cache:e=>e,s=console.warn;function c(e){return function(...t){s(e(...t))}}o(e=>{try{s(a.current)}finally{a.current=null}})},78745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return a},ReadonlyHeadersError:function(){return i}});let n=r(10492);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==o)return n.ReflectAdapter.get(t,o,i)},set(t,r,i,a){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,a);let o=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===o);return n.ReflectAdapter.set(t,s??r,i,a)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==a&&n.ReflectAdapter.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===a||n.ReflectAdapter.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},79097:(e,t,r)=>{"use strict";Object.defineProperty(t,"b",{enumerable:!0,get:function(){return d}});let n=r(78745),i=r(29294),a=r(63033),o=r(75124),s=r(66224),c=r(37461),u=r(75659),l=(r(97748),r(16296));function d(){let e=i.workAsyncStorage.getStore(),t=a.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(e.forceStatic)return f(n.HeadersAdapter.seal(new Headers({})));if(t){if("cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});else if("unstable-cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(e.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(t)if("prerender"===t.type){var r=e.route,u=t;let n=p.get(u);if(n)return n;let i=(0,c.makeHangingPromise)(u.renderSignal,"`headers()`");return p.set(u,i),Object.defineProperties(i,{append:{value:function(){let e=`\`headers().append(${h(arguments[0])}, ...)\``,t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},delete:{value:function(){let e=`\`headers().delete(${h(arguments[0])})\``,t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},get:{value:function(){let e=`\`headers().get(${h(arguments[0])})\``,t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},has:{value:function(){let e=`\`headers().has(${h(arguments[0])})\``,t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},set:{value:function(){let e=`\`headers().set(${h(arguments[0])}, ...)\``,t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},getSetCookie:{value:function(){let e="`headers().getSetCookie()`",t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},forEach:{value:function(){let e="`headers().forEach(...)`",t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},keys:{value:function(){let e="`headers().keys()`",t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},values:{value:function(){let e="`headers().values()`",t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},entries:{value:function(){let e="`headers().entries()`",t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},[Symbol.iterator]:{value:function(){let e="`headers()[Symbol.iterator]()`",t=m(r,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}}}),i}else"prerender-ppr"===t.type?(0,o.postponeWithTracking)(e.route,"headers",t.dynamicTracking):"prerender-legacy"===t.type&&(0,o.throwToInterruptStaticGeneration)("headers",e,t);(0,o.trackDynamicDataInDynamicRender)(e,t)}return f((0,a.getExpectedRequestStore)("headers").headers)}let p=new WeakMap;function f(e){let t=p.get(e);if(t)return t;let r=Promise.resolve(e);return p.set(e,r),Object.defineProperties(r,{append:{value:e.append.bind(e)},delete:{value:e.delete.bind(e)},get:{value:e.get.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},getSetCookie:{value:e.getSetCookie.bind(e)},forEach:{value:e.forEach.bind(e)},keys:{value:e.keys.bind(e)},values:{value:e.values.bind(e)},entries:{value:e.entries.bind(e)},[Symbol.iterator]:{value:e[Symbol.iterator].bind(e)}}),r}function h(e){return"string"==typeof e?`'${e}'`:"..."}let y=(0,u.createDedupedByCallsiteServerErrorLoggerDev)(m);function m(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})}},81452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(4431).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},82362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return p},ReadonlyRequestCookiesError:function(){return s},RequestCookiesAdapter:function(){return c},appendMutableCookies:function(){return d},areCookiesMutableInCurrentPhase:function(){return h},getModifiedCookieValues:function(){return l},responseCookiesToRequestCookies:function(){return m},wrapWithMutableAccessCheck:function(){return f}});let n=r(14659),i=r(10492),a=r(29294),o=r(63033);class s extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new s}}class c{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return s.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let u=Symbol.for("next.mutated.cookies");function l(e){let t=e[u];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let r=l(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),a=i.getAll();for(let e of r)i.set(e);for(let e of a)i.set(e);return!0}class p{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let o=[],s=new Set,c=()=>{let e=a.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),o=r.getAll().filter(e=>s.has(e.name)),t){let e=[];for(let t of o){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},l=new Proxy(r,{get(e,t,r){switch(t){case u:return o;case"delete":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),l}finally{c()}};case"set":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),l}finally{c()}};default:return i.ReflectAdapter.get(e,t,r)}}});return l}}function f(e){let t=new Proxy(e,{get(e,r,n){switch(r){case"delete":return function(...r){return y("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return y("cookies().set"),e.set(...r),t};default:return i.ReflectAdapter.get(e,r,n)}}});return t}function h(e){return"action"===e.phase}function y(e){if(!h((0,o.getExpectedRequestStore)(e)))throw new s}function m(e){let t=new n.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},86834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return i}});let n=""+r(32913).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function i(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},91339:(e,t)=>{"use strict";function r(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageResponse",{enumerable:!0,get:function(){return r}})},91777:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(32913).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},97683:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return i}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}}};