(()=>{var e={};e.id=575,e.ids=[575],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8954:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,85814,23)),Promise.resolve().then(r.bind(r,65232))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19570:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4536,23)),Promise.resolve().then(r.bind(r,41210))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},38571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,dynamic:()=>c});var a=r(37413),s=r(31183),d=r(4536),i=r.n(d),l=r(65081),o=r(41210);let c="force-dynamic";async function n(){let e=await s.z.product.findMany({where:{isArchived:!1},orderBy:{createdAt:"desc"}});return(0,a.jsxs)("div",{className:"flex flex-col gap-8 w-full max-w-6xl",children:[(0,a.jsxs)("div",{className:"flex items-end justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Product Inventory"}),(0,a.jsx)("p",{className:"text-slate-500 mt-2",children:"Manage the Stag Kashmir willow bats shown on your active storefront."})]}),(0,a.jsxs)(i(),{href:"/admin/products/new",className:"flex items-center gap-2 bg-primary hover:bg-primary-dark text-white font-bold py-2.5 px-6 rounded-lg transition-colors shadow-sm",children:[(0,a.jsx)("span",{className:"material-symbols-outlined !text-[20px]",children:"add"}),"Add New Bat"]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50",children:[(0,a.jsx)("th",{className:"py-4 px-6 font-bold text-xs uppercase tracking-wider text-slate-500",children:"Product"}),(0,a.jsx)("th",{className:"py-4 px-6 font-bold text-xs uppercase tracking-wider text-slate-500",children:"Added"}),(0,a.jsx)("th",{className:"py-4 px-6 font-bold text-xs uppercase tracking-wider text-slate-500",children:"Stock"}),(0,a.jsx)("th",{className:"py-4 px-6 font-bold text-xs uppercase tracking-wider text-slate-500 text-right",children:"Price"}),(0,a.jsx)("th",{className:"py-4 px-6 font-bold text-xs uppercase tracking-wider text-slate-500 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"py-12 text-center text-slate-500",children:"No products found in the database."})}):e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"size-12 bg-slate-100 dark:bg-slate-800 rounded-lg overflow-hidden shrink-0",children:(0,a.jsx)("img",{src:e.imageUrl||"/placeholder.jpg",alt:e.name,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-bold text-slate-900 dark:text-white",children:e.name}),(0,a.jsxs)("span",{className:"text-xs font-mono text-slate-500",children:["ID: ",e.id.slice(0,8)]})]})]})}),(0,a.jsx)("td",{className:"py-4 px-6 align-middle",children:(0,a.jsx)("span",{className:"text-sm text-slate-500",children:(0,l.m)(e.createdAt,{addSuffix:!0})})}),(0,a.jsx)("td",{className:"py-4 px-6 align-middle",children:(0,a.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold tracking-wider ${e.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":e.stock>0?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.stock," units"]})}),(0,a.jsx)("td",{className:"py-4 px-6 align-middle text-right",children:(0,a.jsxs)("span",{className:"font-bold text-slate-900 dark:text-white",children:["â‚¹",e.price.toLocaleString()]})}),(0,a.jsx)("td",{className:"py-4 px-6 align-middle text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 text-slate-400",children:[(0,a.jsx)(i(),{href:`/admin/products/${e.id}`,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors hover:text-primary",title:"Edit Product",children:(0,a.jsx)("span",{className:"material-symbols-outlined !text-[20px]",children:"edit"})}),(0,a.jsx)(o.default,{productId:e.id,productName:e.name})]})})]},e.id))})]})})]})}},41210:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Suhail - CGIT\\\\Desktop\\\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\\\src\\\\app\\\\admin\\\\products\\\\DeleteProductButton.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\products\\DeleteProductButton.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},59325:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"404ce44822ec5c46ecfc1d9fab15774785f69bf107":()=>l,"40c2666a33a735d3856b50daa686683ef47cded97c":()=>o,"60c43dd9ba67b724358fefe2a4f9586948eaed6e45":()=>c,"7f3b2c42cab10e20cad01db774d9f831841c6fb349":()=>a.M$,"7f57427a84a646118002d5cd67de268ed9131f7a24":()=>a.Sz,"7f968c88eb464a3622087bfbc6c0b8b9a5109a8131":()=>a.d$,"7fe405c67d1c0db1ace49ea43db24c8d93b7d3f676":()=>a.zh});var a=r(21941),s=r(91199);r(42087);var d=r(70664),i=r(7944);async function l(e){try{return await d.z.product.update({where:{id:e},data:{isArchived:!0}}),(0,i.revalidatePath)("/admin/products"),(0,i.revalidatePath)("/shop"),{success:!0}}catch(e){return console.error("Failed to archive product:",e),{success:!1,error:"Failed to retire product."}}}async function o(e){try{let t=await d.z.product.create({data:{name:e.name,slug:e.slug,description:e.description,price:e.price,compareAtPrice:e.compareAtPrice||null,stock:e.stock,imageUrl:e.imageUrl,images:e.images||[],videoUrl:e.videoUrl,willowType:e.willowType||null,grade:e.grade||null,blade:e.blade||null,ballType:e.ballType||null,warranty:e.warranty||null,features:e.features||[],category:e.category||null,variations:{create:e.variations||[]}}});return(0,i.revalidatePath)("/admin/products"),(0,i.revalidatePath)("/shop"),{success:!0,product:t}}catch(e){if(console.error("Failed to create product:",e),e&&"object"==typeof e&&"code"in e&&"P2002"===e.code)return{success:!1,error:"A product with this slug already exists."};return{success:!1,error:"Failed to create product."}}}async function c(e,t){try{await d.z.productVariation.deleteMany({where:{productId:e}});let r=await d.z.product.update({where:{id:e},data:{name:t.name,slug:t.slug,description:t.description,price:t.price,compareAtPrice:t.compareAtPrice||null,stock:t.stock,...t.imageUrl&&{imageUrl:t.imageUrl},...void 0!==t.images&&{images:t.images},...void 0!==t.videoUrl&&{videoUrl:t.videoUrl},willowType:t.willowType||null,grade:t.grade||null,blade:t.blade||null,ballType:t.ballType||null,warranty:t.warranty||null,features:t.features||[],category:t.category||null,variations:{create:t.variations?.map(e=>({name:e.name,price:e.price,compareAtPrice:e.compareAtPrice||null,stock:e.stock}))||[]}}});return(0,i.revalidatePath)("/admin/products"),(0,i.revalidatePath)("/shop"),(0,i.revalidatePath)(`/shop/${r.slug}`),{success:!0,product:r}}catch(e){if(console.error("Failed to update product:",e),e&&"object"==typeof e&&"code"in e&&"P2002"===e.code)return{success:!1,error:"A product with this slug already exists."};return{success:!1,error:"Failed to update product."}}}(0,r(33331).D)([l,o,c]),(0,s.A)(l,"404ce44822ec5c46ecfc1d9fab15774785f69bf107",null),(0,s.A)(o,"40c2666a33a735d3856b50daa686683ef47cded97c",null),(0,s.A)(c,"60c43dd9ba67b724358fefe2a4f9586948eaed6e45",null)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64549:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"00baa4b735df1f70c1f3c6249c1ec986c75bc304df":()=>a.$$RSC_SERVER_ACTION_0});var a=r(99111)},65232:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(60687),s=r(43210),d=r(6475);let i=(0,d.createServerReference)("404ce44822ec5c46ecfc1d9fab15774785f69bf107",d.callServer,void 0,d.findSourceMapURL,"deleteProduct");function l({productId:e,productName:t}){let[r,d]=(0,s.useTransition)();return(0,a.jsx)("button",{onClick:()=>{confirm(`Are you sure you want to delete ${t}? This cannot be undone.`)&&d(async()=>{let t=await i(e);t.success||alert(t.error)})},disabled:r,className:`p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors hover:text-red-500 ${r?"opacity-50 cursor-not-allowed text-red-500":""}`,title:"Delete Product",children:(0,a.jsx)("span",{className:"material-symbols-outlined !text-[20px]",children:r?"sync":"delete"})})}},94358:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>n,routeModule:()=>u,tree:()=>c});var a=r(65239),s=r(48088),d=r(88170),i=r.n(d),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c={children:["",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,38571)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,16439)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,n=["C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\products\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[80,479,43,538,389,81,341,391],()=>r(94358));module.exports=a})();