(()=>{var e={};e.id=124,e.ids=[124],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25218:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Suhail - CGIT\\\\Desktop\\\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\\\src\\\\app\\\\admin\\\\orders\\\\OrderStatusDropdown.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\orders\\OrderStatusDropdown.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32012:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,85814,23)),Promise.resolve().then(s.bind(s,99709))},33873:e=>{"use strict";e.exports=require("path")},38622:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(37413),a=s(31183),l=s(4536),i=s.n(l),n=s(39916),d=s(35133),o=s(25218);async function c({params:e}){let{id:t}=await e,s=await a.z.order.findUnique({where:{id:t},include:{items:{include:{product:!0}}}});s||(0,n.notFound)();let l=s.amountPaid??("PAID"===s.status?s.total:0),c=Math.max(0,s.total-l);return(0,r.jsxs)("div",{className:"flex flex-col gap-8 w-full max-w-6xl",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(i(),{href:"/admin/orders",className:"text-sm text-slate-400 hover:text-primary transition-colors flex items-center gap-1 mb-3",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[16px]",children:"arrow_back"}),"Back to Orders"]}),(0,r.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Order #",s.id.slice(-8).toUpperCase()]}),(0,r.jsxs)("p",{className:"text-slate-400 mt-1",children:["Placed on ",(0,d.GP)(new Date(s.createdAt),"MMMM d, yyyy 'at' h:mm a")]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 bg-slate-800 border border-slate-700 px-4 py-3 rounded-xl",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Current Status"}),(0,r.jsx)(o.default,{orderId:s.id,currentStatus:s.status})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-slate-700 bg-slate-800/50 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[20px] text-slate-400",children:"inventory_2"}),(0,r.jsx)("h2",{className:"font-bold text-white text-lg",children:"Order Items"})]}),(0,r.jsx)("ul",{className:"divide-y divide-slate-800",children:s.items.map(e=>(0,r.jsxs)("li",{className:"p-6 flex gap-5 items-start hover:bg-slate-800/30 transition-colors",children:[(0,r.jsx)("div",{className:"size-20 rounded-xl bg-slate-800 border border-slate-700 overflow-hidden shrink-0",children:e.product?.imageUrl?(0,r.jsx)("img",{src:e.product.imageUrl,className:"w-full h-full object-cover",alt:""}):(0,r.jsx)("span",{className:"material-symbols-outlined !text-3xl text-slate-600 flex items-center justify-center h-full",children:"sports_cricket"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-bold text-white text-base",children:e.product?.name||"Deleted Product"}),e.product?.description&&(0,r.jsx)("p",{className:"text-sm text-slate-400 line-clamp-2 mt-1",children:e.product.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,r.jsxs)("span",{className:"text-sm font-bold text-slate-300 bg-slate-700 px-3 py-1 rounded-lg",children:["Qty: ",e.quantity]}),(0,r.jsxs)("span",{className:"font-bold text-lg text-white",children:["₹",(e.price*e.quantity).toLocaleString("en-IN")]})]})]})]},e.id))}),(0,r.jsxs)("div",{className:"border-t border-slate-700 bg-slate-800/40",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center px-6 py-3 border-b border-slate-700/50",children:[(0,r.jsx)("span",{className:"text-slate-400 text-sm",children:"Order Total"}),(0,r.jsxs)("span",{className:"font-bold text-white",children:["₹",s.total.toLocaleString("en-IN")]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center px-6 py-3 border-b border-slate-700/50",children:[(0,r.jsxs)("span",{className:"text-slate-400 text-sm flex items-center gap-1.5",children:["Amount Paid","PARTIAL"===s.paymentType&&(0,r.jsx)("span",{className:"text-[10px] bg-amber-500/20 text-amber-300 px-2 py-0.5 rounded-full font-bold",children:"Booking"})]}),(0,r.jsxs)("span",{className:`font-bold ${l>0?"text-green-300":"text-slate-500"}`,children:["₹",l.toLocaleString("en-IN")]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center px-6 py-4",children:[(0,r.jsx)("span",{className:"text-slate-400 text-sm font-bold",children:"Balance Due"}),c>0?(0,r.jsxs)("span",{className:"font-extrabold text-amber-300 text-lg",children:["₹",c.toLocaleString("en-IN")]}):(0,r.jsx)("span",{className:"font-bold text-green-400 text-sm",children:"✓ FULLY PAID"})]})]})]}),s.address&&(0,r.jsxs)("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[20px] text-slate-400",children:"location_on"}),(0,r.jsx)("h2",{className:"font-bold text-white text-lg",children:"Shipping Address"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Street",value:s.address},{label:"City",value:s.city},{label:"State",value:s.state},{label:"Pincode",value:s.pincode},{label:"Landmark",value:s.landmark}].filter(e=>e.value).map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:e.label}),(0,r.jsx)("p",{className:"text-white font-medium text-sm",children:e.value})]},e.label))})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-5",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[20px] text-purple-400",children:"account_circle"}),(0,r.jsx)("h2",{className:"font-bold text-white text-lg",children:"Customer"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Name"}),(0,r.jsx)("p",{className:"text-white font-semibold",children:s.customer})]}),(0,r.jsx)("hr",{className:"border-slate-700"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Email"}),(0,r.jsxs)("a",{href:`mailto:${s.email}`,className:"text-primary hover:underline font-medium flex items-center gap-2 text-sm",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[15px]",children:"mail"}),s.email]})]}),s.phone&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("hr",{className:"border-slate-700"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Phone"}),(0,r.jsxs)("a",{href:`tel:${s.phone}`,className:"text-white hover:text-primary font-medium flex items-center gap-2 text-sm transition-colors",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[15px] text-slate-400",children:"call"}),s.phone]})]})]}),(0,r.jsx)("hr",{className:"border-slate-700"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Payment Type"}),(0,r.jsx)("p",{className:"text-white font-medium text-sm capitalize",children:s.paymentType?.toLowerCase()??"—"})]})]})]}),s.adminNote&&(0,r.jsxs)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-2xl p-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[18px] text-amber-400",children:"sticky_note_2"}),(0,r.jsx)("h3",{className:"font-bold text-amber-300 text-sm",children:"Admin Note"})]}),(0,r.jsx)("p",{className:"text-amber-200/80 text-sm",children:s.adminNote})]}),(0,r.jsxs)("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 p-5 space-y-2",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3",children:"Quick Actions"}),(0,r.jsxs)("a",{href:`https://wa.me/${s.phone?.replace(/\D/g,"")}`,target:"_blank",className:"flex items-center gap-3 text-sm text-white hover:text-green-300 transition-colors py-2 border-b border-slate-800",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[18px] text-green-400",children:"chat"}),"Message on WhatsApp"]}),(0,r.jsxs)("a",{href:`mailto:${s.email}`,className:"flex items-center gap-3 text-sm text-white hover:text-primary transition-colors py-2",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[18px] text-blue-400",children:"mail"}),"Send Email"]})]})]})]})]})}},42942:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"60f97187c73d9ebce955552a292be5de744788f71a":()=>h,"7f3b2c42cab10e20cad01db774d9f831841c6fb349":()=>r.M$,"7f57427a84a646118002d5cd67de268ed9131f7a24":()=>r.Sz,"7f968c88eb464a3622087bfbc6c0b8b9a5109a8131":()=>r.d$,"7fe405c67d1c0db1ace49ea43db24c8d93b7d3f676":()=>r.zh});var r=s(21941),a=s(91199);s(42087);var l=s(70664),i=s(51243),n=s(71356);let d={providers:[(0,s(40347).A)({allowDangerousEmailAccountLinking:!0})],pages:{signIn:"/login"},callbacks:{signIn:async({user:e,account:t,profile:s})=>(e?.email,!0),session:async({session:e,token:t})=>(e.user&&t.sub&&(e.user.id=t.sub),e),jwt:async({token:e,user:t})=>(t&&(e.sub=t.id),e)}},{handlers:o,signIn:c,signOut:x,auth:m}=(0,i.Ay)({adapter:(0,n.y)(l.z),session:{strategy:"jwt"},trustHost:!0,...d});var p=s(7944);async function u(){let e=await m();if(e?.user?.email!=="stagkashmir248@gmail.com")throw Error("Unauthorized")}async function h(e,t){try{if(await u(),!["PENDING","PROCESSING","PAID","PAID_PARTIAL","DISPATCHED","SHIPPED","DELIVERED","CANCELLED"].includes(t))return{success:!1,error:"Invalid status value."};return await l.z.order.update({where:{id:e},data:{status:t}}),(0,p.revalidatePath)("/admin/orders"),(0,p.revalidatePath)("/admin"),{success:!0}}catch(e){if(e?.message==="Unauthorized")return{success:!1,error:"Unauthorized."};return console.error("Failed to update order status:",e),{success:!1,error:"Failed to update status."}}}(0,s(33331).D)([h]),(0,a.A)(h,"60f97187c73d9ebce955552a292be5de744788f71a",null)},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64549:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"00baa4b735df1f70c1f3c6249c1ec986c75bc304df":()=>r.$$RSC_SERVER_ACTION_0});var r=s(99111)},64584:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=s(65239),a=s(48088),l=s(88170),i=s.n(l),n=s(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o={children:["",{children:["admin",{children:["orders",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,38622)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\orders\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,99111)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,16439)),"C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\Suhail - CGIT\\Desktop\\Playground_StagKashmir_VPS+Coolify+Anitigravity\\src\\app\\admin\\orders\\[id]\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/orders/[id]/page",pathname:"/admin/orders/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},68460:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4536,23)),Promise.resolve().then(s.bind(s,25218))},96330:e=>{"use strict";e.exports=require("@prisma/client")},99709:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(60687),a=s(6475);let l=(0,a.createServerReference)("60f97187c73d9ebce955552a292be5de744788f71a",a.callServer,void 0,a.findSourceMapURL,"updateOrderStatus");var i=s(43210),n=s(37590);let d=["PENDING","PROCESSING","SHIPPED","DELIVERED","CANCELLED"];function o({orderId:e,currentStatus:t}){let[s,a]=(0,i.useTransition)(),[o,c]=(0,i.useState)(t);return(0,r.jsx)("select",{value:o,onChange:s=>{let r=s.target.value;c(r),a(async()=>{let s=await l(e,r);s.success?n.Ay.success(`Order marked as ${r}`):(n.Ay.error(s.error||"Failed to update order"),c(t))})},disabled:s,className:`text-xs font-bold uppercase tracking-wider rounded-full px-3 py-1.5 border appearance-none cursor-pointer text-center outline-none focus:ring-2 focus:ring-offset-1 transition-all ${(e=>{switch(e){case"PENDING":return"bg-amber-100 text-amber-800 border-amber-200 focus:ring-amber-500";case"PROCESSING":return"bg-blue-100 text-blue-800 border-blue-200 focus:ring-blue-500";case"SHIPPED":return"bg-indigo-100 text-indigo-800 border-indigo-200 focus:ring-indigo-500";case"DELIVERED":return"bg-green-100 text-green-800 border-green-200 focus:ring-green-500";case"CANCELLED":return"bg-red-100 text-red-800 border-red-200 focus:ring-red-500";default:return"bg-slate-100 text-slate-800 border-slate-200 focus:ring-slate-500"}})(o)} ${s?"opacity-50 cursor-not-allowed":""}`,children:d.map(e=>(0,r.jsx)("option",{value:e,className:"bg-white text-slate-900 font-medium",children:e},e))})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[80,479,43,538,389,133,52,341,391],()=>s(64584));module.exports=r})();