(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8959,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={callServer:function(){return s.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return d.findSourceMapURL}};for(var l in a)Object.defineProperty(t,l,{enumerable:!0,get:a[l]});let s=e.r(3571),d=e.r(70850),i=e.r(53782)},41405,(e,r,t)=>{r.exports=e.r(2781)},12614,e=>{"use strict";var r=e.i(15431),t=e.i(77038),a=e.i(41405),l=e.i(8959);let s=(0,l.createServerReference)("40a218d9021ac51f0554ac143a761d06e21b153a9b",l.callServer,void 0,l.findSourceMapURL,"createProduct");var d=e.i(12455);function i(){let e=(0,a.useRouter)(),[l,i]=(0,t.useState)(!1),[o,n]=(0,t.useState)(""),[c,u]=(0,t.useState)(null),[x,m]=(0,t.useState)(""),[b,p]=(0,t.useState)(""),[g,f]=(0,t.useState)(""),[h,v]=(0,t.useState)(""),[j,y]=(0,t.useState)(""),[N,k]=(0,t.useState)(void 0),w=async r=>{r.preventDefault(),n(""),i(!0);try{let r=await s({name:x,slug:b,description:g,price:Number(h),stock:Number(j),imageUrl:N});r.success?e.push("/admin/products"):(n(r.error||"Failed to add product"),i(!1))}catch(e){n("An unexpected error occurred."),i(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col gap-8 w-full max-w-4xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d.default,{href:"/admin/products",className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors text-slate-500",children:(0,r.jsx)("span",{className:"material-symbols-outlined !text-[24px]",children:"arrow_back"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Add New Bat"}),(0,r.jsx)("p",{className:"text-slate-500 mt-2",children:"Create a new product listing in your inventory."})]})]}),(0,r.jsxs)("form",{onSubmit:w,className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8 flex flex-col gap-6",children:[o&&(0,r.jsx)("div",{className:"p-4 bg-red-50 text-red-600 border border-red-200 rounded-lg text-sm font-medium",children:o}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Product Name"}),(0,r.jsx)("input",{required:!0,type:"text",value:x,onChange:e=>{let r=e.target.value;m(r),p(r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""))},placeholder:"e.g. Thunder Strike Pro",className:"w-full p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"URL Slug"}),(0,r.jsx)("input",{required:!0,type:"text",value:b,onChange:e=>p(e.target.value),placeholder:"thunder-strike-pro",className:"w-full p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Description"}),(0,r.jsx)("textarea",{required:!0,rows:4,value:g,onChange:e=>f(e.target.value),placeholder:"Grade 1 Kashmir Willow...",className:"w-full p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all resize-y"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 border-y border-slate-100 dark:border-slate-800 py-6 my-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Price (â‚¹)"}),(0,r.jsx)("input",{required:!0,type:"number",min:"0",value:h,onChange:e=>v(e.target.value),placeholder:"3499",className:"w-full p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Initial Stock"}),(0,r.jsx)("input",{required:!0,type:"number",min:"0",value:j,onChange:e=>y(e.target.value),placeholder:"50",className:"w-full p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Product Image"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[c?(0,r.jsxs)("div",{className:"relative size-32 md:size-48 bg-slate-100 dark:bg-slate-800 rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700 shrink-0",children:[(0,r.jsx)("img",{src:c,alt:"Preview",className:"w-full h-full object-cover"}),(0,r.jsx)("button",{type:"button",onClick:()=>{u(null),k(void 0)},className:"absolute top-2 right-2 size-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 shadow-md",children:(0,r.jsx)("span",{className:"material-symbols-outlined !text-[16px]",children:"close"})})]}):(0,r.jsxs)("label",{className:"cursor-pointer size-32 md:size-48 bg-slate-50 dark:bg-slate-800 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl flex flex-col items-center justify-center text-slate-500 hover:border-primary hover:text-primary transition-colors shrink-0",children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-3xl mb-2",children:"add_photo_alternate"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Upload Image"}),(0,r.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let r=e.target.files?.[0];if(!r)return;if(!r.type.startsWith("image/"))return void n("Please select a valid image file.");let t=new FileReader;t.onload=e=>{let r=new Image;r.onload=()=>{let e=document.createElement("canvas"),t=r.width,a=r.height;t>800&&(a=Math.round(800*a/t),t=800),e.width=t,e.height=a;let l=e.getContext("2d");if(!l)return;l.fillStyle="#FFFFFF",l.fillRect(0,0,t,a),l.drawImage(r,0,0,t,a);let s=e.toDataURL("image/webp",.8);k(s),u(s),n("")},r.src=e.target?.result},t.readAsDataURL(r)}})]}),(0,r.jsxs)("div",{className:"flex-1 text-sm text-slate-500 flex flex-col justify-center h-full",children:[(0,r.jsxs)("p",{className:"mb-2",children:[(0,r.jsx)("strong",{children:"Tip:"})," Upload a square image for best results across the shop interface."]}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-slate-400",children:[(0,r.jsx)("li",{children:"Max width automatically compressed to 800px"}),(0,r.jsx)("li",{children:"Converted to lightweight WebP format natively"}),(0,r.jsx)("li",{children:"Stored securely in your PostgreSQL database"})]})]})]})]}),(0,r.jsx)("div",{className:"pt-6 mt-2 border-t border-slate-100 dark:border-slate-800 flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:l,className:"bg-primary hover:bg-primary-dark text-white font-bold py-3 px-8 rounded-xl transition-all shadow-md shadow-primary/20 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"material-symbols-outlined animate-spin !text-[20px]",children:"sync"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"material-symbols-outlined !text-[20px]",children:"save"}),"Create Product"]})})})]})]})}e.s(["default",()=>i],12614)}]);